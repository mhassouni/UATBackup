import{D as Y,h as X,j as Z,r as y,w as Se,c as G,A as o,I as P,J as Oe,m as r,q as t,W as q,x as R,u as e,v as m,B as $,a2 as V,z as O,ao as et,_ as ee,k as pe,F as D,y as M,K as tt,ap as lt,V as we,a6 as se,a7 as ce,a8 as ge,o as Te,N as _e,ac as ot,S as Fe,P as Ie,n as be,al as at,ab as Ee,U as oe,Q as he,a4 as Re,l as nt}from"./index.js";import{E as rt,P as Ve}from"./EmptyState.08a8d7f0.js";const z=new Y,x={async getJobDataForObject(l,j,n,c,v,E,A,L,f,i,p,b,g,k,I,F,W){return await z.call("dc3OjrDetailWebController.getJobDataForObject",{objectPrefix:l,offset:j,orderBy:I,order:F,jobTypes:c,sourceOwners:v,matchOwners:E,sourceRecordTypes:A,matchRecordTypes:L,resultLimit:n,sourceObjectFilter:f,matchObjectFilter:i,sourcePredefinedFilter:p,matchPredefinedFilter:b,sourceQueryFilter:g,matchQueryFilter:k,groupId:null})},async getGroupContent(l,j,n,c,v,E){return await z.call("dc3OjrDetailWebController.getGroupContent",{groupIds:l,objectPrefix:j,sourcePredefinedFilter:n,matchPredefinedFilter:c,sourceQueryFilter:v,matchQueryFilter:E})},async deleteRecord(l){return await z.call("dc3OjrDetailWebController.deleteRecord",{recordId:l})},async quickMerge(l){return await z.call("dc3OjrDetailWebController.quickMerge",{objectId:l})},async quickConvert(l){return await z.call("dc3OjrDetailWebController.quickConvert",{objectId:l})},async discardRecords(l,j){return await z.call("dc3OjrDetailWebController.discardRecords",{jobId:l,idList:j})},async discardRecordsForever(l,j){return await z.call("dc3OjrDetailWebController.discardRecordsForever",{jobId:l,idList:j})},async searchUser(l){return await z.call("dc3OjrDetailWebController.searchUser",{query:l})},async getContactAccountId(l){return await z.call("dc3OjrDetailWebController.getContactAccountId",{contactId:l})},async getRecordTypes(l){return await z.call("dc3OjrDetailWebController.getRecordTypes",{objectPrefix:l})},async getPredefinedFilters(l){return await z.call("dc3OjrDetailWebController.getPredefinedFilters",{objectPrefix:l})},async getLookupLabelById(l,j){return await z.call("dc3OjrDetailWebController.getLookupLabelById",{type:l,idValue:j})},async getSobjectLookup(l,j){return await z.call("dc3OjrDetailWebController.searchSobjectLookup",{type:l,value:j})},async getAttributeValues(l,j,n,c,v){return await z.call("dc3OjrDetailWebController.getAttributeValues",{objectPrefix:l,sourcePredefinedFilter:j,matchPredefinedFilter:n,sourceRecordType:c,matchRecordType:v})}},st=X({__name:"DeleteConfirmation",props:["isOpen","currentlyDeletingRecord"],emits:["openRecordPage","cancel","delete","blur"],setup(l,{emit:j}){const{t:n}=Z(),c=j,v=y();Se(v,()=>{v.value?.focus&&v.value?.focus()});const E=G(()=>n("DCJOB_OVERALLJOBRESULTS_AREYOUSUREYOUWANTTODELETE").split("[[insertHTMLWithLink]]"));return(A,L)=>(o(),P(et,{name:"fade"},{default:Oe(()=>[l.isOpen?(o(),r("div",{key:0,ref_key:"deleteConfirmationContainer",ref:v,tabindex:"-1",class:"delete-confirmation",onBlur:L[3]||(L[3]=f=>c("blur"))},[t("span",null,[q(R(e(n)("DCJOB_OVERALLJOBRESULTS_DELETINGRECORDSNOTUNDOABLE"))+" "+R(E.value[0]??"")+" ",1),t("a",{class:"record-link",onClick:L[0]||(L[0]=f=>c("openRecordPage"))},[q(R(e(n)("DCJOB_OVERALLJOBRESULTS_RECORD").toLowerCase())+" ",1),m(e($),{name:"slds-icon-new_window",size:12,color:"#0176d3"})]),q(" "+R(E.value[1]??""),1)]),m(e(V),{type:"danger",loading:l.currentlyDeletingRecord,label:e(n)("DCJOB_OVERALLJOBRESULTS_DELETERECORD"),onClick:L[1]||(L[1]=f=>c("delete"))},null,8,["loading","label"]),m(e(V),{type:"regular",label:e(n)("DCJOB_BUTTON_CANCEL"),disabled:l.currentlyDeletingRecord,onClick:L[2]||(L[2]=f=>c("cancel"))},null,8,["label","disabled"])],544)):O("",!0)]),_:1}))}});const ye=ee(st,[["__scopeId","data-v-829c0d8b"]]),ct={class:"jobMessage"},it=X({__name:"DisplayJobName",props:{jobName:{}},setup(l){const{t:j}=Z();return(n,c)=>(o(),r("div",ct,[m(e($),{class:"jobIcon",name:"slds-icon-info",size:12}),t("p",null,R(e(j)("groupObject.GROUPFOUNDJOB"))+' "'+R(n.jobName)+'"',1)]))}});const Je=ee(it,[["__scopeId","data-v-5f816c74"]]),Ue=l=>(se("data-v-3e846bd8"),l=l(),ce(),l),ut={key:0,class:"viewContainer"},dt={class:"viewContainerHeader"},vt={class:"checkboxCol"},bt={class:"checkboxContainer"},Ot=["checked"],pt=Ue(()=>t("th",null,null,-1)),mt={class:"checkboxCol"},ft={class:"checkboxContainer"},Ct=["value"],_t={class:"buttonsColumn"},Et={class:"flatButton"},ht={class:"flatButton"},Rt={class:"viewContainer"},St={class:"viewContainerHeader"},yt={class:"objectName"},Lt=Ue(()=>t("th",null,null,-1)),gt={class:"buttonsColumn"},Tt={class:"flatButton"},kt={class:"flatButton"},jt={key:0,class:"linkIconContainer"},Dt={class:"linkIcon"},Jt=X({__name:"RecordsGroupView",props:["group","jobId","jobName"],emits:["forceReload","mergeIds"],setup(l,{emit:j}){const n=new Y,{t:c}=Z(),v=pe(),E=j,A=l,L=u=>"slds-icon-"+u.toLowerCase().replace(/\s/g,"_"),f=u=>{if(v.recordEvent("DC Job Overall Results - Open record button clicked",{}),v.persist(),u===null){console.warn("Can't open record page for recordId: null");return}n.navigate(`${u}`)},i=y(null),p=u=>{i.value=u,g(),v.recordEvent("DC Job Overall Results - Delete record button clicked",{}),v.persist()},b=y(null),g=()=>{b.value!==null&&(clearTimeout(b.value),b.value=null)},k=()=>{g(),b.value=setTimeout(I,5e3)},I=()=>{F.value||(i.value=null,b.value=null)},F=y(!1),W=async()=>{F.value=!0,await x.deleteRecord(i.value),E("forceReload"),i.value=null,F.value=!1,v.recordEvent("DC Job Overall Results - Delete record confirmation button clicked",{}),v.persist()},B=y(new Set),H=()=>{if(N.value){B.value=new Set;return}const u=new Set;A.group.records.forEach(s=>{u.add(s.id)}),B.value=u},N=G(()=>B.value.size===A.group.records.length),h=()=>{B.value.size>1&&(E("mergeIds",Array.from(B.value)),B.value.clear())},J=y(!1),S=async()=>{J.value=!0,await x.discardRecords(A.jobId,Array.from(B.value)),E("forceReload"),B.value.clear(),J.value=!1,v.recordEvent("DC Job Overall Results - Discard Selection button clicked",{}),v.persist()},a=async()=>{J.value=!0,await x.discardRecordsForever(A.jobId,Array.from(B.value)),E("forceReload"),B.value.clear(),J.value=!1,v.recordEvent("DC Job Overall Results - Discard Selection Forever button clicked",{}),v.persist()};return(u,s)=>(o(),r(D,null,[l.group.crossObject?O("",!0):(o(),r("div",ut,[t("div",dt,[m(e(V),{disabled:B.value.size<=1,label:e(c)("DCJOB_OVERALLJOBRESULTS_MERGESELECTEDRECORDS"),onClick:h},null,8,["disabled","label"]),m(e(V),{disabled:B.value.size===0,loading:J.value,label:e(c)("DCJOB_OVERALLJOBRESULTS_DISCARDSELECTION"),onClick:S},null,8,["disabled","loading","label"]),m(e(V),{disabled:B.value.size<=1,loading:J.value,label:e(c)("DCJOB_OVERALLJOBRESULTS_DISCARDSELECTIONFOREVER"),onClick:a},null,8,["disabled","loading","label"]),m(Je,{"job-name":l.jobName},null,8,["job-name"])]),t("table",null,[t("thead",null,[t("tr",null,[t("th",vt,[t("div",bt,[t("input",{type:"checkbox",checked:N.value,onClick:H},null,8,Ot)])]),(o(!0),r(D,null,M(l.group.fields,T=>(o(),r("th",null,R(T.label),1))),256)),pt])]),t("tbody",null,[(o(!0),r(D,null,M(l.group.records,T=>(o(),r("tr",null,[t("td",mt,[t("div",ft,[tt(t("input",{"onUpdate:modelValue":s[0]||(s[0]=U=>B.value=U),type:"checkbox",value:T.id},null,8,Ct),[[lt,B.value]])])]),(o(!0),r(D,null,M(T.fieldValues,U=>(o(),r("td",null,R(U),1))),256)),t("td",_t,[t("button",Et,[m(e($),{name:"slds-icon-open",onClick:U=>f(T.id)},null,8,["onClick"])]),t("button",ht,[m(e($),{name:"slds-icon-delete",onClick:U=>p(T.id)},null,8,["onClick"])]),m(ye,{"is-open":i.value===T.id,"currently-deleting-record":F.value,onOpenRecordPage:s[1]||(s[1]=U=>f(i.value)),onCancel:I,onDelete:W,onBlur:k},null,8,["is-open","currently-deleting-record"])])]))),256))])])])),l.group.crossObject?(o(!0),r(D,{key:1},M(l.group.crossObjects.keys(),T=>(o(),r(D,null,[t("div",Rt,[t("div",St,[m(we,{"icon-name":L(l.group.crossObjects?.[T]?.records?.[0]?.objectName),"icon-size":14},{label:Oe(()=>[t("span",yt,R(l.group.crossObjects?.[T]?.records?.[0]?.objectName),1)]),_:2},1032,["icon-name"]),m(Je,{"job-name":l.jobName},null,8,["job-name"])]),t("table",null,[t("thead",null,[t("tr",null,[(o(!0),r(D,null,M(l.group.crossObjects?.[T]?.fields,U=>(o(),r("th",null,R(U.label),1))),256)),Lt])]),t("tbody",null,[(o(!0),r(D,null,M(l.group.crossObjects?.[T]?.records,U=>(o(),r("tr",null,[(o(!0),r(D,null,M(U.fieldValues,ae=>(o(),r("td",null,R(ae),1))),256)),t("td",gt,[t("button",Tt,[m(e($),{name:"slds-icon-open",onClick:ae=>f(U.id)},null,8,["onClick"])]),t("button",kt,[m(e($),{name:"slds-icon-delete",onClick:ae=>p(U.id)},null,8,["onClick"])]),m(ye,{"is-open":i.value===U.id,"currently-deleting-record":F.value,onOpenRecordPage:s[2]||(s[2]=ae=>f(i.value)),onCancel:I,onDelete:W,onBlur:k},null,8,["is-open","currently-deleting-record"])])]))),256))])])]),T===0?(o(),r("div",jt,[t("div",Dt,[m(e($),{name:"slds-icon-link2",size:"16",color:"#747474"})])])):O("",!0)],64))),256)):O("",!0)],64))}});const Pt=ee(Jt,[["__scopeId","data-v-3e846bd8"]]),me=l=>(se("data-v-4dcb004d"),l=l(),ce(),l),At={class:"viewContainer"},Bt={class:"viewContainerHeader"},wt={class:"badge"},Ft=me(()=>t("div",{class:"spacer"},null,-1)),It=me(()=>t("th",null,"\xA0",-1)),Vt={class:"buttonsColumn"},Ut={class:"flatButton"},$t={class:"flatButton"},Nt={class:"viewContainerHeader"},xt={class:"badge"},Gt=me(()=>t("div",{class:"spacer"},null,-1)),Mt=me(()=>t("th",{class:"fitToContent"},null,-1)),Wt=me(()=>t("th",null,"\xA0",-1)),Ht={class:"fitToContent"},Qt={class:"buttonsColumn"},qt={class:"flatButton"},zt={class:"flatButton"},Kt=X({__name:"RecordsPairView",props:["group","convertIsEnabled"],emits:["mergePair","forceReload","convertPair"],setup(l,{emit:j}){const n=new Y,{t:c}=Z(),v=pe(),E=y(!1),A=j,L=N=>"slds-icon-"+N.toLowerCase().replace(/\s/g,"_"),f=N=>{if(v.recordEvent("DC Job Overall Results - Open record button clicked",{}),v.persist(),N===null){console.warn("Can't open record page for recordId: null");return}n.navigate(`${N}`)},i=y(null),p=N=>{i.value=N,g(),v.recordEvent("DC Job Overall Results - Delete record button clicked",{}),v.persist()},b=y(null),g=()=>{b.value!==null&&(clearTimeout(b.value),b.value=null)},k=()=>{g(),b.value=setTimeout(I,5e3)},I=()=>{F.value||(i.value=null,b.value=null)},F=y(!1),W=async()=>{F.value=!0,await x.deleteRecord(i.value),A("forceReload"),i.value=null,F.value=!1,v.recordEvent("DC Job Overall Results - Delete record confirmation button clicked",{}),v.persist()},B=async N=>{E.value=!0,await x.quickMerge(N),A("forceReload"),E.value=!1,v.recordEvent("DC Job Overall Results - Quick Merge Pair button clicked",{}),v.persist()},H=async N=>{E.value=!0,await x.quickConvert(N),A("forceReload"),E.value=!1,v.recordEvent("DC Job Overall Results - Quick Convert Pair button clicked",{}),v.persist()};return(N,h)=>(o(!0),r(D,null,M(l.group.pairs,J=>(o(),r("div",At,[l.group.crossObject?O("",!0):(o(),r(D,{key:0},[t("div",Bt,[t("div",wt,[m(e(ge),{label:J.name,type:"dark"},null,8,["label"])]),Ft,m(e(V),{type:"primary",label:e(c)("DCJOB_OVERALLJOBRESULTS_MERGEPAIR"),onClick:S=>A("mergePair",J.id)},null,8,["label","onClick"]),m(e(V),{type:"primary",loading:E.value,label:e(c)("DCJOB_OVERALLJOBRESULTS_QUICKMERGEPAIR"),onClick:S=>B(J.id)},null,8,["loading","label","onClick"])]),t("table",null,[t("thead",null,[t("tr",null,[(o(!0),r(D,null,M(l.group.fields,S=>(o(),r("th",null,R(S.label),1))),256)),It])]),t("tbody",null,[(o(!0),r(D,null,M(J.records,S=>(o(),r("tr",null,[(o(!0),r(D,null,M(S.fieldValues,a=>(o(),r("td",null,R(a),1))),256)),t("td",Vt,[t("button",Ut,[m(e($),{name:"slds-icon-open",onClick:a=>f(S.id)},null,8,["onClick"])]),t("button",$t,[m(e($),{name:"slds-icon-delete",onClick:a=>p(S.id)},null,8,["onClick"])]),m(ye,{"is-open":i.value===S.id,"currently-deleting-record":F.value,onOpenRecordPage:h[0]||(h[0]=a=>f(i.value)),onCancel:I,onDelete:W,onBlur:k},null,8,["is-open","currently-deleting-record"])])]))),256))])])],64)),l.group.crossObject?(o(),r(D,{key:1},[t("div",Nt,[t("div",xt,[m(e(ge),{label:J.name,type:"dark"},null,8,["label"])]),Gt,l.convertIsEnabled?(o(),P(e(V),{key:0,type:"primary",label:e(c)("DCJOB_OVERALLJOBRESULTS_CONVERTPAIR"),onClick:S=>A("convertPair",J.records[0],J.records[1])},null,8,["label","onClick"])):O("",!0),l.convertIsEnabled?(o(),P(e(V),{key:1,type:"primary",loading:E.value,label:e(c)("DCJOB_OVERALLJOBRESULTS_QUICKCONVERTPAIR"),onClick:S=>H(J.id)},null,8,["loading","label","onClick"])):O("",!0)]),(o(!0),r(D,null,M(J.records,S=>(o(),r("table",null,[t("thead",null,[t("tr",null,[Mt,(o(!0),r(D,null,M(S.fields,a=>(o(),r("th",null,R(a.label),1))),256)),Wt])]),t("tbody",null,[t("tr",null,[t("td",Ht,[m(we,{"icon-name":L(S.objectName),"icon-size":14},null,8,["icon-name"])]),(o(!0),r(D,null,M(S.fieldValues,a=>(o(),r("td",null,R(a),1))),256)),t("td",Qt,[t("button",qt,[m(e($),{name:"slds-icon-open",onClick:a=>f(S.id)},null,8,["onClick"])]),t("button",zt,[m(e($),{name:"slds-icon-delete",onClick:a=>p(S.id)},null,8,["onClick"])]),m(ye,{"is-open":i.value===S.id,"currently-deleting-record":F.value,onOpenRecordPage:h[1]||(h[1]=a=>f(i.value)),onCancel:I,onDelete:W,onBlur:k},null,8,["is-open","currently-deleting-record"])])])])]))),256))],64)):O("",!0)]))),256))}});const Yt=ee(Kt,[["__scopeId","data-v-4dcb004d"]]),$e=l=>(se("data-v-1d145b0a"),l=l(),ce(),l),Xt={key:0,class:"tableContainer"},Zt={key:0,class:"emptyContainer"},el={key:1},tl=$e(()=>t("th",null,null,-1)),ll={key:0},ol=["onClick"],al={class:"buttonsColumn"},nl={key:0,class:"rowActionBtn"},rl={key:1,class:"rowActionBtn"},sl={key:2,class:"rowActionBtn"},cl={class:"rowActionBtn"},il={key:0},ul={class:"expandedRow",colspan:"7"},dl={key:0,class:"error-message"},vl={key:1,class:"groupView"},bl={class:"loadingPlaceholder"},Ol={key:2,class:"groupView"},pl={key:1},ml=$e(()=>t("div",{class:"loadingPlaceholder"},[t("div",{class:"placeholderItem"})],-1)),fl=[ml],Le="PAIR_VIEW",de="GROUP_VIEW",Cl=X({__name:"DetailViewTable",props:["jobGroups","loadingState","objectPrefix","expandedGroups","sortColumn","sortDirection","viewMode","convertEnabled","filter","isCrossObject"],emits:["openGroup","closeGroup","forceReload","columnSort","hideGroupFromlist"],setup(l,{emit:j}){const{t:n}=Z(),c=pe(),v=l,E=y({}),A=y(0),L=y(!1),f=y(new Map),i=j;Te(async()=>{await h(),window.addEventListener("message",a=>{try{if(typeof a.data!="string")return;if(a=JSON.parse(a?.data),a?.name==="dupcheck__dc3Merge"){if(a?.payload?.status&&a.payload.status.startsWith("MERGE_OK")){const u=JSON.stringify({name:"CLOSE_MODAL"});if(Y.eventToSf({name:"dupcheck__dc3Merge",value:u}),a.payload.status==="MERGE_OK_NEXT"&&a.payload.returnData.type==="group"){i("forceReload",s=>{if(s.length>0){let T=A.value;T>s.length-1&&(T=0),s?.[T]?.id&&g(s[T].id,T)}});return}else if(a.payload.returnData.type==="group"){i("forceReload");return}i("forceReload")}}else a?.name==="dupcheck__dc3Convert_converted"&&i("forceReload")}catch(u){console.error(u)}})});const p=async a=>{if(v.expandedGroups.has(a)){i("closeGroup",a);return}i("openGroup",a)},b=a=>v.jobGroups.find(u=>u.id===a),g=(a,u)=>{A.value=u;const s=JSON.stringify({name:"OPEN_MODAL",groupId:a,type:"group"});Y.eventToSf({name:"dupcheck__dc3Merge",value:s});const T=b(a);c.recordEvent("DC Job Overall Results - Merge Group button clicked",{record_count:T?.recordCount??0,average_score:T?.avgScore??0,pair_count:T?.pairCount??0}),c.persist()},k=a=>{const u=JSON.stringify({name:"OPEN_MODAL",pairId:a,type:"pair"});Y.eventToSf({name:"dupcheck__dc3Merge",value:u}),c.recordEvent("DC Job Overall Results - Merge Pair button clicked",{}),c.persist()},I=a=>{const u=JSON.stringify({name:"OPEN_MODAL",idList:a,type:"idList",meta:"NOREDIRECT"});Y.eventToSf({name:"dupcheck__dc3Merge",value:u}),c.recordEvent("DC Job Overall Results - Merge Selection button clicked",{}),c.persist()},F=async(a,u)=>{const s={name:"OPEN_MODAL",contactId:"",accountId:"",leadId:""};switch(a.objectPrefix){case"00Q":s.leadId=a.id;break;case"001":s.accountId=a.id;break;case"003":s.contactId=a.id;break;case"001P":s.accountId=a.id;break}switch(u.objectPrefix){case"00Q":s.leadId=u.id;break;case"001":s.accountId=u.id;break;case"003":s.contactId=u.id;break;case"001P":s.accountId=u.id;break}if(s.contactId&&!s.accountId){const T=await x.getContactAccountId(s.contactId);T&&T?.id&&(s.accountId=T.id)}Y.eventToSf({name:"convert",value:JSON.stringify(s)}),L.value=!1,c.recordEvent("DC Job Overall Results - Convert Pair button clicked",{}),c.persist()},W=async(a,u)=>{f.value.delete(a),L.value=!0;try{await x.quickMerge(a)}catch(T){const U=f.value;U.set(a,T||"Unexpected Error"),f.value=new Map(U),L.value=!1,i("openGroup",a);return}i("hideGroupFromList",u),L.value=!1,i("forceReload");const s=b(a);c.recordEvent("DC Job Overall Results - Quick Merge Group button clicked",{record_count:s?.recordCount??0,average_score:s?.avgScore??0,pair_count:s?.pairCount??0}),c.persist()},B=async(a,u)=>{f.value.delete(a),L.value=!0;try{await x.quickConvert(a)}catch(T){const U=f.value;U.set(a,T||"Unexpected Error"),f.value=new Map(U),L.value=!1,i("openGroup",a);return}i("hideGroupFromList",u),L.value=!1,i("forceReload");const s=b(a);c.recordEvent("DC Job Overall Results - Quick Convert Group button clicked",{record_count:s?.recordCount??0,average_score:s?.avgScore??0,pair_count:s?.pairCount??0}),c.persist()},H=a=>{i("openGroup",a),c.recordEvent("DC Job Overall Results - More button clicked",{}),c.persist()},N=(a,u)=>[{isHeader:!1,label:de===v.viewMode?n("DCJOB_OVERALLJOBRESULTS_ACTIONS_SHOWPAIRVIEW"):n("DCJOB_OVERALLJOBRESULTS_ACTIONS_SHOWGROUPVIEW"),align:!1,icon:de===v.viewMode?"slds-icon-people":"slds-icon-groups",iconPos:"left",iconColor:"#747474",callback:()=>{const s=v.viewMode===Le?de:Le;i("updateViewMode",s),i("openGroup",a.id),de===v.viewMode?c.recordEvent("DC Job Overall Results - Pair View button clicked",{selected_object:v.objectPrefix}):c.recordEvent("DC Job Overall Results - Group View button clicked",{selected_object:v.objectPrefix}),c.persist()}},{isHeader:!0,label:n("DCJOB_OVERALLJOBRESULTS_ACTIONS_DISCARDGROUPFROMJOB")},{isHeader:!1,label:n("DCJOB_OVERALLJOBRESULTS_ACTIONS_DISCARDGROUPINJOB"),align:!1,icon:"slds-icon-clear",iconPos:"left",iconColor:"#747474",callback:async()=>{const s=new Date().getTime();i("hideGroupFromList",u),await x.discardRecords(a.jobId,[a.id]),i("forceReload"),c.recordEvent("DC Job Overall Results - Discard Group in this Job button clicked",{time_taken:new Date().getTime()-s}),c.persist()}},{isHeader:!1,label:n("DCJOB_OVERALLJOBRESULTS_ACTIONS_DISCARDGROUPFOREVER"),align:!1,icon:"slds-icon-ban",iconPos:"left",iconColor:"#747474",callback:async()=>{const s=new Date().getTime();i("hideGroupFromList",u),await x.discardRecordsForever(a.jobId,[a.id]),i("forceReload"),c.recordEvent("DC Job Overall Results - Discard Group Forever button clicked",{time_taken:new Date().getTime()-s}),c.persist()}}],h=async()=>{const a=[...v.expandedGroups].filter(u=>!E.value.hasOwnProperty(u));a.length!==0&&await J(a)},J=async a=>{const u=E.value,s=v.filter?.useAndLogic==="TRUE";E.value={...u,...await x.getGroupContent(a,s?`${v.objectPrefix}-${v.objectPrefix}`:v.objectPrefix,v.filter.sourcePredefinedFilter,s?v.filter.sourcePredefinedFilter:v.filter.matchPredefinedFilter,v.filter.sourceQueryFilter,s?v.filter.sourceQueryFilter:v.filter.matchQueryFilter)}};Se(()=>v.expandedGroups,async()=>{await h()});const S=G(()=>v.sortDirection==="ASC"?"slds-icon-arrowdown":"slds-icon-arrowup");return(a,u)=>l.jobGroups?(o(),r("div",Xt,[l.jobGroups.length===0?(o(),r("div",Zt,[m(rt)])):O("",!0),l.jobGroups.length>0?(o(),r("table",el,[t("thead",null,[t("tr",null,[t("th",null,[t("span",{onClick:u[0]||(u[0]=()=>i("columnSort","Name"))},[q(R(e(n)("DCJOB_OVERALLJOBRESULTS_GROUP"))+" ",1),l.sortColumn==="Name"?(o(),P(e($),{key:0,class:"sortIndicator",name:S.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:u[1]||(u[1]=()=>i("columnSort","lowScore__c"))},[q(R(e(n)("DCJOB_OVERALLJOBRESULTS_MINSCORE"))+" ",1),l.sortColumn==="lowScore__c"?(o(),P(e($),{key:0,class:"sortIndicator",name:S.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:u[2]||(u[2]=()=>i("columnSort","highScore__c"))},[q(R(e(n)("DCJOB_OVERALLJOBRESULTS_MAXSCORE"))+" ",1),l.sortColumn==="highScore__c"?(o(),P(e($),{key:0,class:"sortIndicator",name:S.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:u[3]||(u[3]=()=>i("columnSort","avgScore__c"))},[q(R(e(n)("DCJOB_OVERALLJOBRESULTS_AVGSCORE"))+" ",1),l.sortColumn==="avgScore__c"?(o(),P(e($),{key:0,class:"sortIndicator",name:S.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:u[4]||(u[4]=()=>i("columnSort","duplicateCount__c"))},[q(R(e(n)("DCJOB_OVERALLJOBRESULTS_PAIRCOUNT"))+" ",1),l.sortColumn==="duplicateCount__c"?(o(),P(e($),{key:0,class:"sortIndicator",name:S.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:u[5]||(u[5]=()=>i("columnSort","recordCount__c"))},[q(R(e(n)("DCJOB_OVERALLJOBRESULTS_RECORDCOUNT"))+" ",1),l.sortColumn==="recordCount__c"?(o(),P(e($),{key:0,class:"sortIndicator",name:S.value},null,8,["name"])):O("",!0)])]),tl])]),l.loadingState?O("",!0):(o(),r("tbody",ll,[(o(!0),r(D,null,M(l.jobGroups,(s,T)=>(o(),r(D,null,[t("tr",{class:"expandable",onClick:()=>p(s.id)},[t("td",null,[m(e($),{name:l.expandedGroups.has(s.id)?"slds-icon-chevrondown":"slds-icon-chevronright"},null,8,["name"]),q(" "+R(s.name)+" ",1),f.value.has(s.id)?(o(),P(e(ge),{key:0,label:e(n)("DCJOB_OVERALLJOBRESULTS_ONEERROR"),type:"error"},null,8,["label"])):O("",!0)]),t("td",null,R(s.lowScore)+"%",1),t("td",null,R(s.maxScore)+"%",1),t("td",null,R(s.avgScore)+"%",1),t("td",null,R(s.pairCount),1),t("td",null,R(s.recordCount),1),t("td",al,[s.crossObject?O("",!0):(o(),r("div",nl,[m(e(V),{loading:L.value,label:e(n)("buttons.MERGE"),icon:"slds-icon-merge","icon-color":"#747474",onClick:_e(()=>g(s.id,T),["stop"])},null,8,["loading","label","onClick"])])),s.crossObject?O("",!0):(o(),r("div",rl,[s.showQuickMerge?(o(),P(e(V),{key:0,loading:L.value,label:e(n)("buttons.QUICKMERGE"),icon:"slds-icon-fallback","icon-color":"#747474",onClick:_e(()=>W(s.id,T),["stop"])},null,8,["loading","label","onClick"])):O("",!0)])),s.crossObject?(o(),r("div",sl,[l.convertEnabled?(o(),P(e(V),{key:0,loading:L.value,label:e(n)("buttons.QUICKCONVERT"),icon:"slds-icon-redo","icon-color":"#747474",onClick:_e(()=>B(s.id,T),["stop"])},null,8,["loading","label","onClick"])):O("",!0)])):O("",!0),t("div",cl,[m(e(ot),{label:e(n)("buttons.MORE"),"menu-pos":"right",options:N(s,T),onClick:_e(()=>H(s.id),["stop"])},null,8,["label","options","onClick"])])])],8,ol),l.expandedGroups.has(s.id)?(o(),r("tr",il,[t("td",ul,[f.value.has(s.id)?(o(),r("div",dl,R(f.value.get(s.id)),1)):O("",!0),E.value[s.id]?O("",!0):(o(),r("div",vl,[t("div",bl,[m(e(Fe),{size:"large",variant:"primary"})])])),E.value[s.id]?(o(),r("div",Ol,[de===l.viewMode?(o(),P(Pt,{key:0,"job-id":s.jobId,"job-name":s.jobName,group:E.value[s.id],onMergeIds:I,onForceReload:u[6]||(u[6]=U=>i("forceReload"))},null,8,["job-id","job-name","group"])):O("",!0),Le===l.viewMode?(o(),P(Yt,{key:1,group:E.value[s.id],"convert-is-enabled":l.convertEnabled,onMergePair:k,onConvertPair:F,onForceReload:u[7]||(u[7]=U=>i("forceReload"))},null,8,["group","convert-is-enabled"])):O("",!0)])):O("",!0)])])):O("",!0)],64))),256))])),l.loadingState?(o(),r("tbody",pl,[(o(!0),r(D,null,M([...Array(10).keys()],s=>(o(),r("tr",{key:s},[(o(!0),r(D,null,M([...Array(6).keys()],T=>(o(),r("td",{key:s+":"+T},fl))),128)),t("td",null,[m(e(V),{disabled:!0,label:"View Results",icon:"slds-icon-list","icon-color":"#747474"})])]))),128))])):O("",!0)])):O("",!0)])):O("",!0)}});const _l=ee(Cl,[["__scopeId","data-v-1d145b0a"]]),El=l=>(se("data-v-fb830718"),l=l(),ce(),l),hl={key:0,class:"headerContainer"},Rl={class:"headerButton"},Sl={class:"headerButton"},yl={class:"headerButton"},Ll={class:"headerButton"},gl={key:0,class:"headerButton"},Tl={class:"contentContainer"},kl={class:"detailTable"},jl={key:0,class:"loadingPlaceholder"},Dl={key:0,class:"sidebar"},Jl={class:"filterOption"},Pl={class:"filterOption"},Al={class:"filterOption"},Bl={class:"filterOption"},wl={class:"filterOption"},Fl={class:"filterOption"},Il={class:"filterOption"},Vl=El(()=>t("p",null,"All records in a pair must match filters",-1)),Ul={class:"filterOption"},$l={class:"filterOption"},Nl={key:1,class:"filterOption"},xl={class:"filterOption"},Gl={key:1,class:"filterOption"},Ml={key:8,class:"filterButtons"},Wl={key:1,class:"paginationContainer"},Hl=15,Ql="GROUP_VIEW",ql=X({__name:"OverallJobResultsDetail",props:["objectPrefix","numPerPage","hideHeader","objectList","filterPreset","filterEditable","isEmbedded","sortOrderPreset","sortFieldPreset","requestFilterAttrs"],emits:["switchView"],setup(l,{emit:j}){const{t:n}=Z(),c=pe(),v={search:"DC Job Results","search-ext":"DC Local / Plauti Cloud",delta:"Unique Import / API Bulk insert",deltasingle:"API Single Insert",web2lead:"Web-To-Lead",setformerge:"Set For Merge"},E={TRUE:"True",FALSE:"False"},A={jobType:[],sourceOwner:[],matchOwner:[],sourceRecordType:[],matchRecordType:[],sourceObjectFilter:[],matchObjectFilter:[],sourcePredefinedFilter:[],matchPredefinedFilter:[],sourceQueryFilter:null,matchQueryFilter:null,useAndLogic:E.FALSE},L=y([]),f=y(!0),i=y(new Set),p=y({...A}),b=y({...A}),g=y(0),k=y(!1),I=y(!1),F=y(null),W=y(null),B=y("ASC"),H=y("Name"),N=y(Ql),h=l,J=j;Ie(()=>{h.filterPreset&&Object.keys(h.filterPreset).length>0&&(p.value=JSON.parse(JSON.stringify(h.filterPreset)),b.value=JSON.parse(JSON.stringify(h.filterPreset))),H.value=h.sortFieldPreset,B.value=h.sortOrderPreset}),Te(async()=>{await S(!0),F.value=await x.getRecordTypes(h.objectPrefix),W.value=await x.getPredefinedFilters(h.objectPrefix)});const S=async C=>{f.value=C;const d=g.value*Ce.value,_=Q.value.useAndLogic==="TRUE",K=_?`${h.objectPrefix}-${h.objectPrefix}`:h.objectPrefix,le=_?Q.value.sourcePredefinedFilter:Q.value.matchPredefinedFilter,Ze=(await x.getJobDataForObject(K,d,Ce.value,Q.value.jobType,Q.value.sourceOwner,Q.value.matchOwner,Q.value.sourceRecordType,Q.value.matchRecordType,Q.value.sourceObjectFilter,Q.value.matchObjectFilter,Q.value.sourcePredefinedFilter,le,Q.value.sourceQueryFilter,Q.value.matchQueryFilter,H.value,B.value,h.requestFilterAttrs)).groups;U(),f.value=!0,await be(),L.value=[...Ze],f.value=!1,k.value&&s()},a=C=>{const d=new Set(i.value);d.add(C),i.value=d},u=C=>{const d=new Set(i.value);d.delete(C),i.value=d},s=()=>{k.value=!0,i.value=new Set,be(()=>{const C=new Set;L.value.forEach(d=>{C.add(d.id)}),i.value=C})},T=()=>{s();const C=h.objectList?.find(d=>d.value===h.objectPrefix)?.groupCount;c.recordEvent("DC Job Overall Results - Open all groups button clicked",{selected_object:h.objectPrefix,number_of_grouping:C??0}),c.persist()},U=()=>{k.value=!1,i.value=new Set},ae=()=>{U();const C=h.objectList?.find(d=>d.value===h.objectPrefix)?.groupCount;c.recordEvent("DC Job Overall Results - Close all groups button clicked",{selected_object:h.objectPrefix,number_of_grouping:C??0}),c.persist()},xe=async C=>{const d=new Set(i.value);await S(!1),await be(),i.value=d,C&&C instanceof Function&&C([...L.value])},Ge=(C,d)=>{const _=new Set(i.value);_.delete(d),i.value=_;const K=[...L.value];K.splice(C,1),L.value=K},Me=async()=>{g.value--,i.value=new Set,await S(!0),k.value&&T()},We=async()=>{g.value++,i.value=new Set,await S(!0),k.value&&T()},ke=async(C,d)=>{const _=await x.getSobjectLookup(d,C);return Object.fromEntries(_.map(K=>[K.value,K.label]))},He=()=>{S(!0);const d=Q.value.useAndLogic==="TRUE"?`${h.objectPrefix}-${h.objectPrefix}`:h.objectPrefix;c.recordEvent("DC Job Overall Results - Refresh button clicked",{selected_object:d}),c.persist()},Qe=()=>{I.value=!I.value,c.recordEvent("DC Job Overall Results - Filter button clicked",{showFilter:I.value}),c.persist()},qe=()=>{b.value=JSON.parse(JSON.stringify({...p.value})),i.value=new Set,g.value=0,S(!0),c.recordEvent("DC Job Overall Results - Filter button clicked",{}),c.persist()},ze=C=>{N.value=C},Ke=C=>{C===H.value?B.value=B.value==="ASC"?"DESC":"ASC":(H.value=C,C==="Name"?B.value="ASC":B.value="DESC"),i.value=new Set,g.value=0,S(!0)},je=async C=>{if(!C||C.length<2)return{};const d=await x.searchUser(C);return d?Object.fromEntries(d.map(_=>[_.value,_.label])):{}},Ye=G(()=>{if(h.isEmbedded||h.objectList.length===0)return[];const C=[];return h.objectList.forEach(d=>{d.groupCount>0&&C.push({callback:()=>J("switchView",d.value),active:h.objectPrefix===d.value,label:`${d.label} (${d.groupCount})`})}),C}),w=G(()=>h.objectList.find(C=>C.value===h.objectPrefix)),ie=G(()=>F.value?.sourceRecordTypes?Object.fromEntries(F.value?.sourceRecordTypes.map(C=>[C.value,C.label])):{}),ue=G(()=>F.value?.matchRecordTypes?Object.fromEntries(F.value?.matchRecordTypes.map(C=>[C.value,C.label])):{}),ne=G(()=>W.value?.sourcePredefinedFilters?Object.fromEntries(W.value?.sourcePredefinedFilters.map(C=>[C.value,C.label])):{}),fe=G(()=>W.value?.matchPredefinedFilters?Object.fromEntries(W.value?.matchPredefinedFilters.map(C=>[C.value,C.label])):{}),Q=G(()=>{const C=b.value.matchPredefinedFilter?.[0]!==void 0,d=!h.objectPrefix?.includes("-"),K=h.isEmbedded&&d&&C?"TRUE":b.value.useAndLogic,le={matchOwner:b.value.matchOwner.length>0?[b.value.matchOwner[0].value]:[],sourceOwner:b.value.sourceOwner.length>0?[b.value.sourceOwner[0].value]:[],jobType:b.value.jobType,matchRecordType:b.value.matchRecordType,sourceRecordType:b.value.sourceRecordType,sourceObjectFilter:null,matchObjectFilter:null,sourcePredefinedFilter:b.value.sourcePredefinedFilter?.[0]||null,matchPredefinedFilter:b.value.matchPredefinedFilter?.[0]||null,sourceQueryFilter:b.value.sourceQueryFilter,matchQueryFilter:b.value.matchQueryFilter,useAndLogic:K};return b.value.sourceObjectFilter&&b.value.sourceObjectFilter.length>0&&(w.value.sourceObjectFilter.fieldType==="REFERENCE"?le.sourceObjectFilter=b.value.sourceObjectFilter[0].value:le.sourceObjectFilter=b.value.sourceObjectFilter[0]),b.value.matchObjectFilter&&b.value.matchObjectFilter.length>0&&(w.value.matchObjectFilter.fieldType==="REFERENCE"?le.matchObjectFilter=b.value.matchObjectFilter[0].value:le.matchObjectFilter=b.value.matchObjectFilter[0]),JSON.parse(JSON.stringify(le))}),De=G(()=>{let C=!1;for(const[d,_]of Object.entries(b.value))try{if(_?.length>0&&_?.[0]?.length>0){C=!0;break}}catch{}return I.value||C?{iconColor:"#ffffff",type:"primary"}:{iconColor:"#747474",type:"regular"}}),Ce=G(()=>Math.min(Hl,h.numPerPage)),Xe=G(()=>h.objectList.find(C=>C.value===h.objectPrefix)?.convertEnabled);return Se(()=>h.objectPrefix,async()=>{F.value=null,await be(),f.value=!0,F.value=await x.getRecordTypes(h.objectPrefix),await S(!0)}),Se(b,async(C,d)=>{await S(!0)},{deep:!0}),(C,d)=>(o(),r(D,null,[l.hideHeader?O("",!0):(o(),r("div",hl,[m(Ve,{title:w.value?.label,"sub-title":e(n)("DCJOB_OVERALLJOBRESULTS_OVERALLJOBRESULTS"),options:Ye.value,"dropdown-header":e(n)("DCJOB_OVERALLJOBRESULTS_DUPLICATERESULTS")},{buttons:Oe(()=>[t("div",Rl,[m(e(V),{label:e(n)("DCJOB_OVERALLJOBRESULTS_OPENALLGROUPS"),icon:"slds-icon-chevrondown","icon-color":"#747474",onClick:T},null,8,["label"])]),t("div",Sl,[m(e(V),{label:e(n)("DCJOB_OVERALLJOBRESULTS_CLOSEALLGROUPS"),icon:"slds-icon-chevronup","icon-color":"#747474",onClick:ae},null,8,["label"])]),t("div",yl,[m(e(V),{label:e(n)("DCJOB_BUTTON_REFRESH"),icon:"slds-icon-refresh","icon-color":"#747474",onClick:He},null,8,["label"])]),t("div",Ll,[m(e(V),{label:e(n)("DCJOB_FILTER_FILTER"),icon:"slds-icon-filterList",type:De.value.type,"icon-color":De.value.iconColor,onClick:Qe},null,8,["label","type","icon-color"])]),l.isEmbedded?O("",!0):(o(),r("div",gl,[m(e(V),{label:e(n)("buttons.DCJOB_BACK"),icon:"slds-icon-back","icon-color":"#747474",onClick:d[0]||(d[0]=_=>J("switchView",null))},null,8,["label"])]))]),_:1},8,["title","sub-title","options","dropdown-header"])])),t("div",Tl,[t("div",kl,[f.value?(o(),r("div",jl,[m(e(Fe),{size:"large",variant:"primary"})])):O("",!0),f.value?O("",!0):(o(),P(_l,{key:1,"convert-enabled":Xe.value,"object-prefix":l.objectPrefix,"is-cross-object":w.value.crossObject,"view-mode":N.value,"sort-column":H.value,"sort-direction":B.value,"job-groups":L.value,"expanded-groups":i.value,filter:Q.value,onForceReload:xe,onHideGroupFromList:Ge,onUpdateViewMode:ze,onColumnSort:Ke,onOpenGroup:a,onCloseGroup:u},null,8,["convert-enabled","object-prefix","is-cross-object","view-mode","sort-column","sort-direction","job-groups","expanded-groups","filter"]))]),I.value&&!f.value?(o(),r("div",Dl,[t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_JOBTYPE")),1),t("div",Jl,[m(e(at),{modelValue:p.value.jobType,"onUpdate:modelValue":d[1]||(d[1]=_=>p.value.jobType=_),disabled:!l.filterEditable,options:v,placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SELECTANOPTION"),"placeholder-search":e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHOPTIONS"),"search-bar":"always"},null,8,["modelValue","disabled","placeholder","placeholder-search"])]),t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_OWNER",{objectName:w.value.sourceObjectName})),1),t("div",Pl,[m(e(Ee),{modelValue:p.value.sourceOwner,"onUpdate:modelValue":d[2]||(d[2]=_=>p.value.sourceOwner=_),disabled:!l.filterEditable,icon:"slds-icon-search","icon-color":"#747474",placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHUSERS"),"options-callback":je},null,8,["modelValue","disabled","placeholder"])]),w.value.crossObject?(o(),r(D,{key:0},[t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_OWNER",{objectName:w.value.matchObjectName})),1),t("div",Al,[m(e(Ee),{modelValue:p.value.matchOwner,"onUpdate:modelValue":d[3]||(d[3]=_=>p.value.matchOwner=_),disabled:!l.filterEditable,icon:"slds-icon-search","icon-color":"#747474",placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHUSERS"),"options-callback":je},null,8,["modelValue","disabled","placeholder"])])],64)):O("",!0),ie.value&&Object.keys(ie.value).length>0?(o(),r(D,{key:1},[t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_RECORDTYPE",{objectName:w.value.sourceObjectName})),1),t("div",Bl,[m(e(oe),{modelValue:p.value.sourceRecordType[0],"onUpdate:modelValue":d[4]||(d[4]=_=>p.value.sourceRecordType[0]=_),disabled:!l.filterEditable||!ie.value||Object.keys(ie.value).length===0,options:ie.value,placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SELECTANOPTION"),"placeholder-search":e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHOPTIONS"),"search-bar":"always"},null,8,["modelValue","disabled","options","placeholder","placeholder-search"])])],64)):O("",!0),w.value.crossObject&&ue.value&&Object.keys(ue.value).length>0?(o(),r(D,{key:2},[t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_RECORDTYPE",{objectName:w.value.matchObjectName})),1),t("div",wl,[m(e(oe),{modelValue:p.value.matchRecordType[0],"onUpdate:modelValue":d[5]||(d[5]=_=>p.value.matchRecordType[0]=_),disabled:!l.filterEditable||!ue.value||Object.keys(ue.value).length===0,options:ue.value,placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SELECTANOPTION"),"placeholder-search":e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHOPTIONS"),"search-bar":"always"},null,8,["modelValue","disabled","options","placeholder","placeholder-search"])])],64)):O("",!0),ne.value&&Object.keys(ne.value).length>0?(o(),r(D,{key:3},[t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_PREDEFINED",{objectName:w.value.sourceObjectName})),1),t("div",Fl,[m(e(oe),{modelValue:p.value.sourcePredefinedFilter[0],"onUpdate:modelValue":d[6]||(d[6]=_=>p.value.sourcePredefinedFilter[0]=_),disabled:!l.filterEditable||!ne.value||Object.keys(ne.value).length===0,options:ne.value,placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SELECTANOPTION"),"placeholder-search":e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHOPTIONS"),"search-bar":"always"},null,8,["modelValue","disabled","options","placeholder","placeholder-search"])])],64)):O("",!0),w.value.crossObject&&fe.value&&Object.keys(ne.value).length>0?(o(),r(D,{key:4},[t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_PREDEFINED",{objectName:w.value.matchObjectName})),1),t("div",Il,[m(e(oe),{modelValue:p.value.matchPredefinedFilter[0],"onUpdate:modelValue":d[7]||(d[7]=_=>p.value.matchPredefinedFilter[0]=_),disabled:!l.filterEditable||!fe.value||Object.keys(fe.value).length===0,options:fe.value,placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SELECTANOPTION"),"placeholder-search":e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHOPTIONS"),"search-bar":"always"},null,8,["modelValue","disabled","options","placeholder","placeholder-search"])])],64)):O("",!0),!w.value.crossObject&&!h.isEmbedded?(o(),r(D,{key:5},[Vl,t("div",Ul,[m(e(oe),{modelValue:p.value.useAndLogic,"onUpdate:modelValue":d[8]||(d[8]=_=>p.value.useAndLogic=_),disabled:!l.filterEditable,options:E},null,8,["modelValue","disabled"])])],64)):O("",!0),w.value.sourceObjectFilter&&l.filterEditable?(o(),r(D,{key:6},[t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_FIELD",{objectName:w.value.sourceObjectName,fieldName:w.value.sourceObjectFilter.fieldLabel})),1),t("div",$l,[w.value.sourceObjectFilter.fieldType==="REFERENCE"?(o(),P(e(Ee),{key:0,modelValue:p.value.sourceObjectFilter,"onUpdate:modelValue":d[9]||(d[9]=_=>p.value.sourceObjectFilter=_),disabled:!l.filterEditable,"lookup-context":Object.fromEntries(w.value.sourceObjectFilter.relatedObjects.map(_=>[_,{label:_}])),"options-callback":ke,icon:"slds-icon-search","icon-color":"#747474"},null,8,["modelValue","disabled","lookup-context"])):["PICKLIST","MULTIPICKLIST","COMBOBOX"].includes(w.value.sourceObjectFilter.fieldType)?(o(),r("div",Nl,[m(e(oe),{modelValue:p.value.sourceObjectFilter,"onUpdate:modelValue":d[10]||(d[10]=_=>p.value.sourceObjectFilter=_),disabled:!l.filterEditable,options:()=>Object.fromEntries(w.value.sourceObjectFilter.selectList.map(_=>[_.value,_.label])),placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SELECTANOPTION"),"placeholder-search":e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHOPTIONS"),"search-bar":"always"},null,8,["modelValue","disabled","options","placeholder","placeholder-search"])])):(o(),r(D,{key:2},[l.filterEditable?(o(),P(e(he),{key:1,modelValue:p.value.sourceObjectFilter[0],"onUpdate:modelValue":d[11]||(d[11]=_=>p.value.sourceObjectFilter[0]=_)},null,8,["modelValue"])):(o(),P(e(he),{key:0,disabled:""}))],64))])],64)):O("",!0),w.value.matchObjectFilter&&l.filterEditable?(o(),r(D,{key:7},[t("p",null,R(e(n)("DCJOB_OVERALLJOBRESULTS_FILTER_FIELD",{objectName:w.value.matchObjectName,fieldName:w.value.matchObjectFilter.fieldLabel})),1),t("div",xl,[w.value.matchObjectFilter.fieldType==="REFERENCE"?(o(),P(e(Ee),{key:0,modelValue:p.value.matchObjectFilter,"onUpdate:modelValue":d[12]||(d[12]=_=>p.value.matchObjectFilter=_),disabled:!l.filterEditable,"lookup-context":Object.fromEntries(w.value.matchObjectFilter.relatedObjects.map(_=>[_,{label:_}])),"options-callback":ke,icon:"slds-icon-search","icon-color":"#747474"},null,8,["modelValue","disabled","lookup-context"])):["PICKLIST","MULTIPICKLIST","COMBOBOX"].includes(w.value.matchObjectFilter.fieldType)?(o(),r("div",Gl,[m(e(oe),{modelValue:p.value.matchObjectFilter,"onUpdate:modelValue":d[13]||(d[13]=_=>p.value.matchObjectFilter=_),disabled:!l.filterEditable,options:()=>Object.fromEntries(w.value.matchObjectFilter.selectList.map(_=>[_.value,_.label])),placeholder:e(n)("DCJOB_OVERALLJOBRESULTS_SELECTANOPTION"),"placeholder-search":e(n)("DCJOB_OVERALLJOBRESULTS_SEARCHOPTIONS"),"search-bar":"always"},null,8,["modelValue","disabled","options","placeholder","placeholder-search"])])):(o(),r(D,{key:2},[l.filterEditable?(o(),P(e(he),{key:1,modelValue:p.value.matchObjectFilter[0],"onUpdate:modelValue":d[14]||(d[14]=_=>p.value.matchObjectFilter[0]=_)},null,8,["modelValue"])):(o(),P(e(he),{key:0,disabled:""}))],64))])],64)):O("",!0),l.filterEditable?(o(),r("div",Ml,[m(e(V),{label:e(n)("DCJOB_BUTTON_CANCEL"),onClick:d[15]||(d[15]=_=>I.value=!1)},null,8,["label"]),m(e(V),{type:"primary",label:e(n)("DCJOB_OVERALLJOBRESULTS_APPLYFILTER"),onClick:qe},null,8,["label"])])):O("",!0)])):O("",!0)]),!f.value&&!(g.value===0&&L.value.length<Ce.value)?(o(),r("div",Wl,[m(e(V),{disabled:g.value===0,label:e(n)("pageNavigation.PREVIOUSPAGE"),icon:"slds-icon-back","icon-color":"#747474",onClick:Me},null,8,["disabled","label"]),m(e(V),{disabled:L.value.length<Ce.value,label:e(n)("pageNavigation.NEXTPAGE"),icon:"slds-icon-forward","icon-pos":"right","icon-color":"#747474",onClick:We},null,8,["disabled","label"])])):O("",!0)],64))}});const zl=ee(ql,[["__scopeId","data-v-fb830718"]]),Ne=l=>(se("data-v-44a08f9a"),l=l(),ce(),l),Kl={key:0,class:"tableContainer"},Yl=Ne(()=>t("th",null,"\xA0",-1)),Xl={key:0},Zl={key:1},eo=Ne(()=>t("div",{class:"loadingPlaceholder"},[t("div",{class:"placeholderItem"})],-1)),to=[eo],re="ASC",lo="DESC",ve="SORT_NUMBER",Pe="SORT_STRING",oo=X({__name:"OverviewTable",props:["objectList","loadingState"],emits:["showResults"],setup(l,{emit:j}){const{t:n}=Z(),c=j,v=l,E=y("label"),A=y(re),L=y(Pe),f=(b,g)=>{if(b===E.value){A.value=re===A.value?lo:re;return}E.value=b,A.value=re,L.value=g},i=G(()=>{if(!v?.objectList)return[];const b=A.value===re?1:-1;return ve===L.value?v.objectList.sort((g,k)=>(g[E.value]<k[E.value]?1:-1)*b):v.objectList.sort((g,k)=>g[E.value].localeCompare(k[E.value])*b)}),p=G(()=>A.value===re?"slds-icon-arrowdown":"slds-icon-arrowup");return(b,g)=>l.objectList?(o(),r("div",Kl,[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,[t("span",{onClick:g[0]||(g[0]=k=>f("label",Pe))},[q(R(e(n)("metaData.DCJOB_OVERALLJOBRESULTS_OBJECT")),1),E.value==="label"?(o(),P(e($),{key:0,class:"sortIndicator",name:p.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:g[1]||(g[1]=k=>f("groupCount",ve))},[q(R(e(n)("metaData.DCJOB_OVERALLJOBRESULTS_GROUPS")),1),E.value==="groupCount"?(o(),P(e($),{key:0,class:"sortIndicator",name:p.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:g[2]||(g[2]=k=>f("pairCount",ve))},[q(R(e(n)("metaData.DCJOB_OVERALLJOBRESULTS_PAIRS")),1),E.value==="pairCount"?(o(),P(e($),{key:0,class:"sortIndicator",name:p.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:g[3]||(g[3]=k=>f("recordCount",ve))},[q(R(e(n)("metaData.DCJOB_OVERALLJOBRESULTS_RECORDS")),1),E.value==="recordCount"?(o(),P(e($),{key:0,class:"sortIndicator",name:p.value},null,8,["name"])):O("",!0)])]),t("th",null,[t("span",{onClick:g[4]||(g[4]=k=>f("avgScore",ve))},[q(R(e(n)("metaData.DCJOB_OVERALLJOBRESULTS_AVERAGESCORE")),1),E.value==="avgScore"?(o(),P(e($),{key:0,class:"sortIndicator",name:p.value},null,8,["name"])):O("",!0)])]),Yl])]),l.loadingState?O("",!0):(o(),r("tbody",Xl,[(o(!0),r(D,null,M(i.value,(k,I)=>(o(),r("tr",{key:I},[t("td",null,R(k.label),1),t("td",null,R(k.groupCount),1),t("td",null,R(k.pairCount),1),t("td",null,R(k.recordCount),1),t("td",null,R(k.avgScore),1),t("td",null,[m(e(V),{disabled:k.groupCount===0,label:`${e(n)("buttons.DCJOB_OVERALLJOBRESULTS_VIEWRESULTS_NUMBER")} (${k.groupCount})`,icon:"slds-icon-list","icon-color":"#747474",onClick:F=>c("showResults",k.value)},null,8,["disabled","label","onClick"])])]))),128))])),l.loadingState?(o(),r("tbody",Zl,[(o(!0),r(D,null,M([...Array(7).keys()],k=>(o(),r("tr",{key:k},[(o(!0),r(D,null,M([...Array(5).keys()],I=>(o(),r("td",{key:k+":"+I},to))),128)),t("td",null,[m(e(V),{disabled:!0,label:e(n)("buttons.DCJOB_OVERALLJOBRESULTS_VIEWRESULTS"),icon:"slds-icon-list","icon-color":"#747474"},null,8,["label"])])]))),128))])):O("",!0)])])):O("",!0)}});const ao=ee(oo,[["__scopeId","data-v-44a08f9a"]]),te=l=>(se("data-v-76bd3ee9"),l=l(),ce(),l),no={class:"summaryContainer"},ro={key:1,class:"loadingPlaceholder"},so=te(()=>t("div",{class:"placeholderItem headerTitle"},null,-1)),co=te(()=>t("div",{class:"placeholderItem headerValue"},null,-1)),io=[so,co],uo={class:"summaryContainer"},vo={key:1,class:"loadingPlaceholder"},bo=te(()=>t("div",{class:"placeholderItem headerTitle"},null,-1)),Oo=te(()=>t("div",{class:"placeholderItem headerValue"},null,-1)),po=[bo,Oo],mo={class:"summaryContainer"},fo={key:1,class:"loadingPlaceholder"},Co=te(()=>t("div",{class:"placeholderItem headerTitle"},null,-1)),_o=te(()=>t("div",{class:"placeholderItem headerValue"},null,-1)),Eo=[Co,_o],ho={class:"summaryContainer"},Ro={key:1,class:"loadingPlaceholder"},So=te(()=>t("div",{class:"placeholderItem headerTitle"},null,-1)),yo=te(()=>t("div",{class:"placeholderItem headerValue"},null,-1)),Lo=[So,yo],go=X({__name:"OverallJobResultsOverview",props:["loading","objectList"],emits:["showResults","refreshData"],setup(l,{emit:j}){const{t:n}=Z(),c=l,v=j,E=p=>{v("showResults",p)},A=G(()=>c.objectList.reduce((p,b)=>p+b.groupCount,0)),L=G(()=>c.objectList.reduce((p,b)=>p+b.pairCount,0)),f=G(()=>c.objectList.reduce((p,b)=>p+b.recordCount,0)),i=G(()=>{if(c.objectList.length===0)return;let p=0,b=0;return c.objectList.forEach(g=>{p+=g.avgScore,g.avgScore>0&&b++}),p===0||b===0?"0":(p/b).toFixed(0)+"%"});return(p,b)=>(o(),r(D,null,[m(Ve,{title:e(n)("DCJOB_OVERALLJOBRESULTS_DUPLICATERESULTSVIEW"),"sub-title":e(n)("DCJOB_OVERALLJOBRESULTS_OVERALLJOBRESULTS")},{buttons:Oe(()=>[m(e(V),{disabled:l.loading,label:e(n)("DCJOB_BUTTON_REFRESH"),icon:"slds-icon-refresh","icon-color":"#747474",onClick:b[0]||(b[0]=g=>v("refreshData"))},null,8,["disabled","label"])]),metaContent:Oe(()=>[t("div",no,[l.loading?O("",!0):(o(),P(e(Re),{key:0,label:e(n)("metaData.DCJOB_JOBPAGE_TOTALGROUPS"),value:A.value},null,8,["label","value"])),l.loading?(o(),r("div",ro,io)):O("",!0)]),t("div",uo,[l.loading?O("",!0):(o(),P(e(Re),{key:0,label:e(n)("metaData.DCJOB_JOBPAGE_TOTALPAIRS"),value:L.value},null,8,["label","value"])),l.loading?(o(),r("div",vo,po)):O("",!0)]),t("div",mo,[l.loading?O("",!0):(o(),P(e(Re),{key:0,label:e(n)("metaData.DCJOB_JOBPAGE_TOTALRECORDS"),value:f.value},null,8,["label","value"])),l.loading?(o(),r("div",fo,Eo)):O("",!0)]),t("div",ho,[l.loading?O("",!0):(o(),P(e(Re),{key:0,label:e(n)("metaData.DCJOB_JOBPAGE_AVERAGESCORE"),value:i.value},null,8,["label","value"])),l.loading?(o(),r("div",Ro,Lo)):O("",!0)])]),_:1},8,["title","sub-title"]),m(ao,{"object-list":l.objectList,"loading-state":l.loading,onShowResults:E},null,8,["object-list","loading-state"])],64))}});const To=ee(go,[["__scopeId","data-v-76bd3ee9"]]),Ae=new Y,Be={async getSingleObjectOverview(){return await Ae.call("dc3OjrOverviewWebController.getSingleObjectOverview",{})},async getCrossObjectOverview(){return await Ae.call("dc3OjrOverviewWebController.getCrossObjectOverview",{})}},Jo=X({__name:"OverallJobResultsPage",setup(l){const j=pe(),n=y([]),c=y(""),v=G(()=>{if(!!n.value)return n.value.find(J=>c.value===J.value)}),E=y(null),A=async()=>{try{if(E.value!==null){const J=Math.max(document.body.scrollHeight,E.value.offsetHeight);Y.eventToSf({name:"resize",value:J+4})}else console.warn("Can not sync height when ojrContainer is not found.")}catch{}},L=new ResizeObserver(function(){be(()=>{A()})}),f=y({jobType:[],sourceOwner:[],matchOwner:[],sourceRecordType:[],matchRecordType:[],sourceObjectFilter:[],matchObjectFilter:[],sourcePredefinedFilter:[],matchPredefinedFilter:[]}),i=y(!1),p=y("Name"),b=y("ASC"),g=y(!0),k=y(!1),I=y(15),F=y({}),W=y(!1);Ie(async()=>{const J=new URLSearchParams(window.location.search);if(J){const S=J.get("_config");if(S!==null){const a=JSON.parse(decodeURIComponent(S));if(console.info("OJR Initialized with following preset:",a),a.sourceObject&&(i.value=!0),a.matchObject&&a.sourceObject!==a.matchObject?c.value=`${a.sourceObject}-${a.matchObject}`:c.value=a.sourceObject,a.includeDcJob&&f.value.jobType.push("search"),a.includeExt&&f.value.jobType.push("search-ext"),a.includeUniqueImp&&f.value.jobType.push("delta"),a.includeApiSingle&&f.value.jobType.push("deltasingle"),a.includeSetForMerge&&f.value.jobType.push("setformerge"),a.includeWebToLead&&f.value.jobType.push("web2lead"),a.sourceRecordOwner){const u=await x.getLookupLabelById("User",a.sourceRecordOwner);f.value.sourceOwner=[{context:"",value:a.sourceRecordOwner,label:u}]}if(a.matchRecordOwner){const u=await x.getLookupLabelById("User",a.matchRecordOwner);f.value.matchOwner=[{context:"",value:a.matchRecordOwner,label:u}]}if(a.sortBy&&(p.value=a.sortBy),a.sortOrder&&(b.value=a.sortOrder),a.rowCount&&(I.value=a.rowCount),g.value=a.filterEditable,k.value=a.hideHeader,a.sourcePredefinedFilter||a.matchPredefinedFilter||a.sourceRecordType||a.matchRecordType){const u=await x.getAttributeValues(c.value,a.sourcePredefinedFilter||"",a.matchPredefinedFilter||"",a.sourceRecordType||"",a.matchRecordType||"");u.sourcePredefinedFilter&&(f.value.sourcePredefinedFilter=[u.sourcePredefinedFilter]),u.matchPredefinedFilter&&(f.value.matchPredefinedFilter=[u.matchPredefinedFilter]),u.sourceRecordType&&(f.value.sourceRecordType=[u.sourceRecordType]),u.matchRecordType&&(f.value.matchRecordType=[u.matchRecordType])}a.sourceQueryFilter&&(f.value.sourceQueryFilter=a.sourceQueryFilter),a.matchQueryFilter&&(f.value.matchQueryFilter=a.matchQueryFilter),W.value=!0}}}),Te(()=>{const J=new Date().getTime();E.value!==null&&L.observe(E.value),L.observe(document.body),N();const S=c.value?n.value?.find(a=>a.value===c.value)?.groupCount:0;j.recordEvent("DC Job Overall Results - Loaded",{load_time:new Date().getTime()-J,component_title:"Job Overall Results",is_embedded:i.value,selected_object:c.value,number_of_grouping:S??0}),j.persist()}),nt(()=>{A()});const B=J=>{if(c.value=J,c.value!==null){const S=n.value?.find(a=>a.value===c.value)?.groupCount;j.recordEvent("DC Job Overall Results - View Results button clicked",{selected_object:c.value,number_of_grouping:S??0})}else j.recordEvent("DC Job Overall Results - Back button clicked",{});j.persist()},H=y(!0),N=async()=>{H.value=!0,n.value=[];const[J,S]=await Promise.all([Be.getSingleObjectOverview(),Be.getCrossObjectOverview()]);n.value=[...J.objects,...S.objects],H.value=!1},h=async()=>{await N(),j.recordEvent("DC Job Overall Results - Refresh button clicked",{}),j.persist()};return(J,S)=>(o(),r("div",{ref_key:"ojrContainer",ref:E,class:"ojrContainer"},[c.value?O("",!0):(o(),P(To,{key:0,"object-list":n.value,loading:H.value,onShowResults:B,onRefreshData:h},null,8,["object-list","loading"])),n.value&&v.value!==void 0?(o(),P(zl,{key:1,"filter-preset":f.value,"object-list":n.value,"object-prefix":v.value.value,"is-embedded":i.value,"sort-order-preset":b.value,"sort-field-preset":p.value,"hide-header":k.value,"filter-editable":g.value,"num-per-page":I.value,"request-filter-attrs":F.value,onSwitchView:B},null,8,["filter-preset","object-list","object-prefix","is-embedded","sort-order-preset","sort-field-preset","hide-header","filter-editable","num-per-page","request-filter-attrs"])):O("",!0)],512))}});export{Jo as default};
