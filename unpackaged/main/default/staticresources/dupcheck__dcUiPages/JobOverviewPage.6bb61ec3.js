import{h as Se,j as Ne,A as a,I as U,J as I,v as r,u as e,B as De,q as t,x as O,m as b,y as Re,a4 as qe,F as Z,a2 as x,a5 as He,a6 as Ie,a7 as we,_ as ye,r as i,w as Ce,c as H,o as We,z as c,U as pe,a8 as $e,a9 as Ve,C as je,aa as _t,n as bt,ab as ot,Q as tt,W as Le,Y as it,T as ze,D as Tt,V as rt,ac as Jt,H as Rt,S as Xe,ad as ut,a3 as vt,a as Bt,k as jt,ae as ct,af as gt,M as Lt,ag as St,K as Nt,R as yt,ah as Mt}from"./index.js";import{D as xe,H as fe,L as dt,P as pt,u as Et,J as Ut,C as lt,t as Ft,a as $t,b as It,c as wt,d as kt,N as Pt}from"./ConfirmationModal.a006cf8e.js";import{P as Gt,E as Vt}from"./EmptyState.08a8d7f0.js";import{d as B}from"./dcJobService.b3701bc0.js";import{d as st}from"./dcHelper.d839f820.js";const ft=N=>(Ie("data-v-a16c4d22"),N=N(),we(),N),xt={class:"title"},Ht={class:"summaryContainer"},Wt={key:1,class:"skeletonContainer"},Qt=ft(()=>t("div",{class:"item"},null,-1)),Kt=ft(()=>t("div",{class:"item"},null,-1)),zt=[Qt,Kt],Xt={class:"buttons"},qt={class:"button"},Yt=Se({__name:"ExportModal",props:{closeFunction:{},exportCallback:{},exportInfo:{}},setup(N){const{t:n}=Ne();return(o,s)=>(a(),U(e(He),{"close-function":o.closeFunction,width:"720px"},{headerContent:I(()=>[r(e(De),{name:"slds-icon-download",color:"#747474",size:18}),t("span",xt,O(e(n)("job.DCJOB_EXPORTMODAL_EXPORTRESULTS")),1)]),bodyContent:I(()=>[t("div",Ht,[(a(!0),b(Z,null,Re(o.exportInfo,(y,K)=>(a(),b("span",{key:K,class:"summary"},[y.value?(a(),U(e(qe),{key:0,label:y.label,value:y.value},null,8,["label","value"])):(a(),b("div",Wt,zt))]))),128))])]),footerContent:I(()=>[t("div",Xt,[t("div",qt,[r(e(x),{type:"regular",icon:"slds-icon-salesforce1",label:e(n)("buttons.DCJOB_EXPORTMODAL_EXPORTCLOUD"),"icon-color":"#747474",onClick:s[0]||(s[0]=()=>o.exportCallback(!0))},null,8,["label"])]),r(e(x),{type:"regular",icon:"slds-icon-desktop",label:e(n)("buttons.DCJOB_EXPORTMODAL_EXPORTDCLOCAL"),"icon-color":"#747474",onClick:s[1]||(s[1]=()=>o.exportCallback(!1))},null,8,["label"])])]),_:1},8,["close-function"]))}});const Zt=ye(Yt,[["__scopeId","data-v-a16c4d22"]]),eo=N=>(Ie("data-v-b16376f1"),N=N(),we(),N),to={class:"title"},oo={key:0,class:"trialWarning"},lo={class:"row"},so={class:"item"},ao={class:"item"},no={class:"row"},io={class:"item top alignWithCombobox"},ro={class:"item mergeThreshold"},uo={class:"thresholdWidth"},co={class:"warning"},Oo={class:"warningText"},_o={key:1,class:"row"},bo={class:"item top"},vo={class:"item processing"},po={class:"option"},Eo={class:"recommend right"},fo={class:"info"},Co={class:"option"},Do={class:"recommend right"},mo=["href"],ho={class:"info"},Ao={class:"option"},To={class:"recommend right"},Jo=["href"],Ro={class:"summaryContainer"},Bo={class:"confirmation"},jo={class:"text"},go={class:"modalFooter"},Lo=eo(()=>t("div",{class:"filler"},"\xA0",-1)),So={class:"progress"},No={class:"buttons"},yo={key:0,class:"warning"},Mo={class:"warningContainer"},Uo={class:"title"},Fo={class:"warningIcon"},$o={class:"label"},Io={class:"closeIcon"},wo={class:"description"},ko={class:"next"},Po=Se({__name:"AutoMergeModal",props:{job:{},license:{},closeFunction:{}},emits:["refresh"],setup(N,{emit:n}){const{t:o}=Ne(),s={CONFIGURE:"configure",PROCESS_OPTIONS:"ProcessOptions",CONFIRMATION:"confirmation"},y={LOCAL:"local",SF:"sf",CLOUD:"cloud"},K=[s.CONFIGURE,s.PROCESS_OPTIONS,s.CONFIRMATION],k=N,V=n,z=i({}),m=i({threshold:"100",processing:y.SF,sourceFilterMethod:"",groupFilterMethod:""}),T=i(!1),W=i(0),G=i(s.CONFIGURE),u=i([{label:o("job.DCJOB_AUTOMERGE_CONFIGUREAUTOMERGE"),value:s.CONFIGURE,active:!0,completed:!1},{label:o("job.options.DCJOB_AUTOMERGE_PROCESSINGOPTIONS"),value:s.PROCESS_OPTIONS,active:!1,completed:!1},{label:o("job.DCJOB_AUTOMERGE_CONFIRMATION"),value:s.CONFIRMATION,active:!1,completed:!1}]),j=i(0),J=i(!1),w=i(),Q=i(!1),P=i({}),h=i({}),M=i({"dupcheck__dcGroup__r.dupcheck__group__c":{label:o("groupObject.GROUPNUMBER"),fieldType:"NUMBERRANGE",operators:["EQUAL","NOT_EQUAL","LESS","GREATER","LESS_EQUAL","GREATER_EQUAL","BETWEEN"]},"dupcheck__dcGroup__r.dupcheck__duplicateCount__c":{label:o("groupObject.GROUPPAIRCOUNT"),fieldType:"NUMBER"},"dupcheck__dcGroup__r.dupcheck__recordCount__c":{label:o("groupObject.GROUPRECORDCOUNT"),fieldType:"NUMBER"},"dupcheck__dcGroup__r.dupcheck__errorCount__c":{label:o("groupObject.GROUPCONTAINSMERGEERROR"),fieldType:"BOOLEAN"}}),Y=i({filterLines:[],filterLogic:""}),oe=i(),ce=i(!1),ee=i({filterLines:[],filterLogic:""}),re=i(),Oe=i(!1),X=()=>{Q.value=!0,J.value=!1};Ce([()=>Y.value,()=>ee.value],()=>{X()},{deep:!0}),Ce(m.value,D=>{D.sourceFilterMethod!=="filter"&&(ee.value={filterLines:[],filterLogic:""}),D.groupFilterMethod!=="filter"&&(Y.value={filterLines:[],filterLogic:""}),X()});const ne=D=>!D.fieldApiName||!D.operator||!D.values,de=H(()=>ee.value.filterLines?.some(ne)?!0:Y.value.filterLines?.some(ne)),te=H(()=>{let D=!1;return J.value&&(D=!0),Q.value&&(D=!1,Q.value=!1),de.value&&(D=!0),D});We(async()=>{m.value.threshold=await B.getMaxScoreForJob(k.job.jobId);for(let D=1;D<m.value.threshold+1;D++)z.value[D]=`${D}%`;P.value=await B.getPredefinedFilters(k.job?.sourceObject?.prefix),h.value=await st.getFilterOptionsByObject(k.job?.sourceObject?.prefix)}),Ce(ce,()=>{ce.value||(Y.value={filterLines:[],filterLogic:""})});function le(D){m.value.processing=D}function A(D){return D.filterLines.length>0}function f(D){return D.startsWith("predefined-")}async function g(D=!1){const v=K.findIndex(_e=>_e===G.value);let E=0;const ae=await se();if(v+1===K.length&&D){B.startAutoMerge(ae),k.closeFunction(),V("refresh");return}if(v===0&&D){if(W.value++,j.value=await B.getRecordsToMerge(ae),j.value=k.license?.information?.isTrial&&!k.license?.information?.isSandbox&&j.value>20?20:j.value,W.value--,!J.value&&(J.value=j.value===0,J.value)){await bt(),w.value.openText();return}if(re.value="",f(m.value.sourceFilterMethod))re.value=P.value[m.value.sourceFilterMethod];else if(A(ee.value)){const _e={filters:Je(ee.value),filterLogic:ee.value.filterLogic,objectApiName:k.job?.sourceObject?.apiName,isNewVersion:!0};re.value=await B.parseFilterModel(_e)}if(oe.value="",A(Y.value)){const _e={filters:Je(Y.value),filterLogic:Y.value.filterLogic,objectApiName:"dupcheck__dcGroup__c"};oe.value=await B.parseFilterModel(_e)}}D&&v+1<K.length&&(E=v+1),!D&&v-1>=0&&(E=v-1),G.value=K[E],J.value=!1,be(E)}function be(D){u.value.map((v,E)=>(E<D&&(v.completed=!0,v.active=!1),E===D&&(v.completed=!1,v.active=!0),E>D&&(v.completed=!1,v.active=!1),{...v}))}const Te=H(()=>!!re.value),q=H(()=>{const D=[{label:o("job.DCJOB_AUTOMERGE_JOBNAME"),value:k.job.jobName},{label:o("job.options.DCJOB_AUTOMERGE_AUTOMERGETHRESHOLD"),value:m.value.threshold},{label:o("job.DCJOB_AUTOMERGE_PROCESSEDBY"),value:m.value.processing,format:v=>y.CLOUD===v?"Plauti Cloud":y.LOCAL===v?"DC Local":"Salesforce"}];return Te.value||D.push({label:o("DCJOB_AUTOMERGE_SELECTEDDUPLICATEPAIRS"),value:`${j.value}`}),re.value&&D.push({label:o("job.options.DCJOB_AUTOMERGE_OBJECTFILTER",{object:k.job?.sourceObject?.label}),value:re.value,wide:!0}),oe.value&&D.push({label:o("job.options.DCJOB_AUTOMERGE_OBJECTFILTER",{object:"Duplicate Group"}),value:oe.value,wide:!0}),D}),me=H(()=>Te.value?o("job.DCJOB_AUTOMERGE_AUTOMERGEACKNOWLEDGE_WITHOUT_RECORDCOUNT"):o("job.DCJOB_AUTOMERGE_AUTOMERGEACKNOWLEDGE",[j.value])),ge=H(()=>{const D=K.findIndex(E=>E===G.value),v=u.value.find(E=>E.value===G.value);return`${o("job.new.DCJOB_AUTOMERGE_STEP")} ${D+1} - ${v?.label}`});async function se(){return{jobName:k.job.jobName,jobId:k.job.jobId,sourceObject:k.job.sourceObject.prefix,matchObject:k.job.matchObject.prefix,threshold:parseInt(m.value.threshold),sourceFilterMethod:m.value.sourceFilterMethod,sourceFilter:JSON.stringify({filters:ee.value.filterLines,filterLogic:ee.value.filterLogic,objectApiName:k.job?.sourceObject.apiName,isNewVersion:!0}),groupFilter:JSON.stringify({filters:Je(Y.value),filterLogic:Y.value.filterLogic,objectApiName:"dupcheck__dcGroup__c"}),isExternal:[y.LOCAL,y.CLOUD].includes(m.value.processing),runOnCloud:y.CLOUD===m.value.processing}}function Je(D){return D.filterLines.map(v=>{if(v.fieldApiName.includes("errorCount__c")&&v.fieldType==="BOOLEAN"){let E="";return v.values.includes("FALSE")?E="EQUAL":E="GREATER",{...v,fieldType:"NUMBERRANGE",operator:E,values:[0]}}return v})}return(D,v)=>(a(),U(e(He),{"close-function":D.closeFunction,"footer-content-pos":"none",width:"720px"},{headerContent:I(()=>[t("span",to,O(ge.value),1)]),bodyContent:I(()=>[D.license?.information?.isTrial&&!D.license?.information?.isSandbox?(a(),b("div",oo,O(e(o)("DCJOB_AUTOMERGE_TRIALWARNING")),1)):c("",!0),t("div",{class:je(["modalBody",{options:G.value===s.CONFIGURE}])},[G.value===s.CONFIGURE?(a(),b(Z,{key:0},[t("div",lo,[t("div",so,[t("span",null,O(e(o)("job.DCJOB_AUTOMERGE_JOBNAME")),1)]),t("div",ao,[t("span",null,O(D.job.jobName),1)])]),t("div",no,[t("div",io,O(e(o)("job.options.DCJOB_AUTOMERGE_AUTOMERGETHRESHOLD")),1),t("div",ro,[t("div",uo,[r(e(pe),{modelValue:m.value.threshold,"onUpdate:modelValue":v[0]||(v[0]=E=>m.value.threshold=E),"compare-function":(E,ae)=>Number(E)>Number(ae)?-1:1,"compare-by-key":!0,"search-bar":"never",options:z.value},null,8,["modelValue","compare-function","options"])]),t("div",co,[t("span",null,O(e(o)("job.options.DCJOB_AUTOMERGE_AUTOMERGETEXT",[m.value.threshold])),1),t("span",Oo,O(e(o)("job.options.DCJOB_AUTOMERGE_AUTOMERGEWARNING")),1)])])]),r(xe,{"filter-method":m.value.sourceFilterMethod,"onUpdate:filterMethod":v[1]||(v[1]=E=>m.value.sourceFilterMethod=E),"filter-model":ee.value,"onUpdate:filterModel":v[2]||(v[2]=E=>ee.value=E),show:Oe.value,"onUpdate:show":v[3]||(v[3]=E=>Oe.value=E),license:D.license,"filterable-fields":h.value,"predefined-filters":P.value,"has-multiple-filters":m.value.sourceFilterMethod!=="none"&&ce.value,"filter-label":D.job?.sourceObject?.label},null,8,["filter-method","filter-model","show","license","filterable-fields","predefined-filters","has-multiple-filters","filter-label"]),r(xe,{"filter-method":m.value.groupFilterMethod,"onUpdate:filterMethod":v[4]||(v[4]=E=>m.value.groupFilterMethod=E),"filter-model":Y.value,"onUpdate:filterModel":v[5]||(v[5]=E=>Y.value=E),show:ce.value,"onUpdate:show":v[6]||(v[6]=E=>ce.value=E),license:D.license,"filterable-fields":M.value,"predefined-filters":{},"has-multiple-filters":!1,"filter-label":"Duplicate Group",onFilterChange:v[7]||(v[7]=E=>J.value=!1)},null,8,["filter-method","filter-model","show","license","filterable-fields"])],64)):c("",!0),G.value===s.PROCESS_OPTIONS?(a(),b("div",_o,[t("div",bo,[t("span",null,O(e(o)("job.options.DCJOB_AUTOMERGE_PROCESSINGOPTIONS")),1)]),t("div",vo,[t("div",po,[r(Ve,{height:120,"has-radio":!0,selected:m.value.processing===y.SF,title:e(o)("job.options.DCJOB_AUTOMERGE_RUNONSF"),description:`${e(o)("job.options.DCJOB_AUTOMERGE_SFPLATFORMMESSAGE")} ${e(o)("general.DCJOB_AUTOMERGE_SPEED")}: ${e(o)("general.DCJOB_AUTOMERGE_MEDIUM")}.`,onChange:v[8]||(v[8]=E=>le(y.SF))},{content:I(()=>[t("div",Eo,[j.value<=2500?(a(),b(Z,{key:0},[r(e($e),{type:"success",label:e(o)("general.DCJOB_AUTOMERGE_RECOMMENDED")},null,8,["label"]),t("div",fo,[r(fe,{position:"left","icon-size":16,"icon-name":"slds-icon-info",description:e(o)("job.options.DCJOB_AUTOMERGE_SFINFO")},null,8,["description"])])],64)):c("",!0)])]),_:1},8,["selected","title","description"])]),t("div",Co,[r(Ve,{height:120,"has-radio":!0,selected:m.value.processing===y.LOCAL,title:e(o)("job.options.DCJOB_AUTOMERGE_RUNONDCLOCAL"),description:`${e(o)("job.options.DCJOB_AUTOMERGE_DCLOCALMESSAGE")}`,onChange:v[9]||(v[9]=E=>le(y.LOCAL))},{content:I(()=>[t("div",Do,[t("a",{class:"link",href:e(dt).DCLOCALLEARNMORE,target:"_blank"},O(e(o)("general.DCJOB_AUTOMERGE_LEARNMORE")),9,mo),j.value>2500?(a(),b(Z,{key:0},[r(e($e),{type:"success",label:e(o)("general.DCJOB_AUTOMERGE_RECOMMENDED")},null,8,["label"]),t("div",ho,[r(fe,{position:"left-up","icon-size":16,"icon-name":"slds-icon-info",description:e(o)("job.options.DCJOB_AUTOMERGE_DCLOCALINFO")},null,8,["description"])])],64)):c("",!0)])]),_:1},8,["selected","title","description"])]),t("div",Ao,[r(Ve,{height:120,"has-radio":!0,selected:m.value.processing===y.CLOUD,title:e(o)("DCJOB_NEWJOB_RUNONPLAUTICLOUD"),description:`${e(o)("DCJOB_NEWJOB_PLAUTICLOUDPROCESSDESCRIPTION")}`,onChange:v[10]||(v[10]=E=>le(y.CLOUD))},{content:I(()=>[t("div",To,[t("a",{class:"link",target:"blank",href:e(dt).PLAUTICLOUDLEARNMORE},O(e(o)("general.DCJOB_NEWJOB_LEARNMORE")),9,Jo)])]),_:1},8,["selected","title","description"])])])])):c("",!0),G.value===s.CONFIRMATION?(a(),b(Z,{key:2},[t("div",Ro,[(a(!0),b(Z,null,Re(q.value,(E,ae)=>(a(),b("span",{key:ae,class:je(["summary",{"summary--wide":!!E.wide}])},[E.value?(a(),U(e(qe),{key:0,label:E.label,value:E.value,format:E.format},null,8,["label","value","format"])):c("",!0)],2))),128))]),t("div",Bo,[r(e(_t),{modelValue:T.value,"onUpdate:modelValue":v[11]||(v[11]=E=>T.value=E)},null,8,["modelValue"]),t("span",jo,O(me.value),1)])],64)):c("",!0)],2)]),footerContent:I(()=>[t("div",go,[Lo,t("div",So,[r(pt,{steps:u.value},null,8,["steps"])]),t("div",No,[J.value?(a(),b("div",yo,[r(fe,{ref_key:"warning",ref:w,"icon-size":24,"icon-color":"#FFBF68","icon-name":"slds-icon-warning",border:"1px solid #e5e5e5","background-color":"#fff","always-open":!0,onClick:v[12]||(v[12]=E=>w.value.closeText())},{default:I(()=>[t("div",Mo,[t("div",Uo,[t("div",Fo,[r(e(De),{color:"#000",name:"slds-icon-warning",size:14})]),t("span",$o,O(e(o)("DCJOB_NEWJOB_NORECORDSSELECTED")),1),t("div",Io,[r(e(De),{color:"#000",name:"slds-icon-close",size:14})])]),t("div",wo,[t("span",null,O(e(o)("DCJOB_AUTOCONVERT_NORECORDSSELECTED")),1)])])]),_:1},512)])):c("",!0),G.value===s.CONFIGURE?(a(),U(e(x),{key:1,label:e(o)("buttons.DCJOB_AUTOMERGE_CANCEL"),onClick:D.closeFunction},null,8,["label","onClick"])):c("",!0),G.value!==s.CONFIGURE?(a(),U(e(x),{key:2,label:e(o)("buttons.DCJOB_AUTOMERGE_BACK"),onClick:v[13]||(v[13]=E=>g())},null,8,["label"])):c("",!0),t("span",ko,[r(e(x),{"icon-pos":"left",loading:W.value>0,label:G.value===s.CONFIRMATION?e(o)("buttons.DCJOB_AUTOMERGE_START"):e(o)("buttons.DCJOB_AUTOMERGE_NEXT"),type:"primary",disabled:G.value===s.CONFIRMATION&&!T.value||te.value,onClick:v[14]||(v[14]=E=>g(!0))},null,8,["loading","label","disabled"])])])])]),_:1},8,["close-function"]))}});const Go=ye(Po,[["__scopeId","data-v-b16376f1"]]),Ye=N=>(Ie("data-v-eb749f40"),N=N(),we(),N),Vo={class:"title"},xo={key:0,class:"trialWarning"},Ho={class:"row"},Wo={class:"item"},Qo={class:"item"},Ko={class:"row"},zo={class:"item"},Xo={class:"item"},qo={class:"row"},Yo={class:"item"},Zo={class:"help"},el={class:"item"},tl={key:0,class:"row"},ol=Ye(()=>t("div",{class:"item"},null,-1)),ll={class:"item"},sl={class:"row"},al={class:"item top alignWithCombobox"},nl={class:"item convertThreshold"},il={class:"thresholdWidth"},rl={class:"warning"},ul={class:"warningText"},cl={key:1,class:"row"},dl={class:"item top"},Ol={class:"item processing"},_l={class:"option"},bl=Ye(()=>t("div",{class:"recommend right"},null,-1)),vl={class:"option"},pl=Ye(()=>t("div",{class:"recommend right"},null,-1)),El={class:"summaryContainer"},fl={class:"confirmation"},Cl={class:"text"},Dl={class:"modalFooter"},ml=Ye(()=>t("div",{class:"filler"},"\xA0",-1)),hl={class:"progress"},Al={class:"buttons"},Tl={key:0,class:"warning"},Jl={class:"warningContainer"},Rl={class:"title"},Bl={class:"warningIcon"},jl={class:"label"},gl={class:"closeIcon"},Ll={class:"description"},Sl={class:"next"},Nl=Se({__name:"AutoConvertModal",props:{job:{},license:{},closeFunction:{}},emits:["refresh"],setup(N,{emit:n}){const{t:o}=Ne(),s={CONFIGURE:"configure",PROCESS_OPTIONS:"ProcessOptions",CONFIRMATION:"confirmation"},y={LOCAL:"local",SF:"sf"},K={LEAD:"00Q",ACCOUNT:"001",CONTACT:"003",PERSON_ACCOUNT:"001P"},k=i({LEAD:o("DCJOB_NEWJOB_LEADOWNER"),ACCOUNT:o("DCJOB_NEWJOB_ACCOUNTOWNER"),LOGGEDINUSER:"",OTHER:o("DCJOB_NEWJOB_LOOKUPUSER")}),V=i({}),z=i([]),m=[s.CONFIGURE,s.PROCESS_OPTIONS,s.CONFIRMATION],T=N,W=n,G=i({}),u=i({convertOwner:"LEAD",convertOwnerId:"",convertStatus:"",threshold:"100",processing:y.SF,sourceFilterMethod:"",matchFilterMethod:"",groupFilterMethod:""}),j=i(!1),J=i(0),w=i(s.CONFIGURE),Q=i([{label:o("job.DCJOB_AUTOCONVERT_CONFIGUREAUTOCONVERT"),value:s.CONFIGURE,active:!0,completed:!1},{label:o("job.options.DCJOB_AUTOCONVERT_PROCESSINGOPTIONS"),value:s.PROCESS_OPTIONS,active:!1,completed:!1},{label:o("job.DCJOB_AUTOCONVERT_CONFIRMATION"),value:s.CONFIRMATION,active:!1,completed:!1}]),P=i(0),h=i(!1),M=i(),Y=i(!1),oe=i({}),ce=i({}),ee=i({}),re=i({}),Oe=i({"dcGroup__r.group__c":{label:o("groupObject.GROUPNUMBER"),fieldType:"NUMBERRANGE",operators:["EQUAL","NOT_EQUAL","LESS","GREATER","LESS_EQUAL","GREATER_EQUAL","BETWEEN"]},"dcGroup__r.duplicateCount__c":{label:o("groupObject.GROUPPAIRCOUNT"),fieldType:"NUMBER"},"dcGroup__r.recordCount__c":{label:o("groupObject.GROUPRECORDCOUNT"),fieldType:"NUMBER"},"dcGroup__r.errorCount__c":{label:o("groupObject.GROUPCONTAINSCONVERTERROR"),fieldType:"BOOLEAN"}}),X=i({filterLines:[],filterLogic:""}),ne=i(),de=i(!1),te=i({filterLines:[],filterLogic:""}),le=i(),A=i(!1),f=i({filterLines:[],filterLogic:""}),g=i(),be=i(!1),Te=()=>{Y.value=!0,h.value=!1};Ce([()=>f.value,()=>X.value,()=>te.value],()=>{Te()},{deep:!0}),Ce(u.value,async p=>{p.sourceFilterMethod!=="filter"&&(X.value={filterLines:[],filterLogic:""}),p.matchFilterMethod!=="filter"&&(te.value={filterLines:[],filterLogic:""}),p.groupFilterMethod!=="filter"&&(f.value={filterLines:[],filterLogic:""}),p.convertOwner==="LOGGEDINUSER"&&(u.value.convertOwnerId=await B.getCurrentUserId()),Te()});const q=p=>!p.fieldApiName||!p.operator||!p.values,me=H(()=>X.value.filterLines?.some(q)||te.value.filterLines?.some(q)?!0:f.value.filterLines?.some(q)),ge=H(()=>{let p=!1;return h.value&&(p=!0),Y.value&&(p=!1,Y.value=!1),me.value&&(p=!0),p});We(async()=>{const{sourceObject:p,matchObject:d}=T.job;u.value.threshold=await B.getMaxScoreForJob(T.job.jobId),u.value.sourceObject=p.label;for(let _=1;_<u.value.threshold+1;_++)G.value[_]=`${_}%`;oe.value=await B.getPredefinedFilters(T.job?.sourceObject?.prefix),ce.value=await st.getFilterOptionsByObject(T.job?.sourceObject?.prefix),ee.value=await B.getPredefinedFilters(T.job?.matchObject?.prefix),re.value=await st.getFilterOptionsByObject(T.job?.matchObject?.prefix),k.value.LOGGEDINUSER=await B.getCurrentUser(),await Je()});const se=async p=>await B.getUsersByQuery(p),Je=async()=>{const p=await B.getConvertStatusOptions();p.options.length!==0&&(p.options.forEach(d=>{V.value[d.value]=d.label}),u.value.convertStatus=p?.convertStatusDefault?p.convertStatusDefault:Object.keys(V.value)[0])};function D(p){u.value.processing=p}function v(p){return p.filterLines.length>0}function E(p){return p.startsWith("predefined-")}async function ae(p=!1){const d=m.findIndex(Ee=>Ee===w.value);let _=0;const he=Pe();if(d+1===m.length&&p){B.startAutoConvert(he),T.closeFunction(),W("refresh");return}if(d===0&&p){if(J.value++,P.value=await B.getRecordsToConvert(he),P.value=T.license?.information?.isTrial&&!T.license?.information?.isSandbox&&P.value>20?20:P.value,J.value--,!h.value&&(h.value=P.value===0,h.value)){await bt(),M.value.openText();return}if(ne.value="",E(u.value.sourceFilterMethod))ne.value=oe.value[u.value.sourceFilterMethod];else if(v(X.value)){const Ee={filters:Be(X.value),filterLogic:X.value.filterLogic,objectApiName:T.job?.sourceObject?.apiName,isNewVersion:!0};ne.value=await B.parseFilterModel(Ee)}if(le.value="",E(u.value.matchFilterMethod))le.value=ee.value[u.value.matchFilterMethod];else if(v(te.value)){const Ee={filters:Be(te.value),filterLogic:te.value.filterLogic,objectApiName:T.job?.matchObject?.apiName,isNewVersion:!0};le.value=await B.parseFilterModel(Ee)}if(g.value="",v(f.value)){const Ee={filters:Be(f.value),filterLogic:f.value.filterLogic,objectApiName:"dupcheck__dcGroup__c",isNewVersion:!0};g.value=await B.parseFilterModel(Ee)}}p&&d+1<m.length&&(_=d+1),!p&&d-1>=0&&(_=d-1),w.value=m[_],h.value=!1,_e(_)}function _e(p){Q.value.map((d,_)=>(_<p&&(d.completed=!0,d.active=!1),_===p&&(d.completed=!1,d.active=!0),_>p&&(d.completed=!1,d.active=!1),{...d}))}const ue=H(()=>ne.value||le.value),ie=H(()=>K.LEAD===T.job.sourceObject.prefix&&K.ACCOUNT===T.job.matchObject.prefix||K.LEAD===T.job.matchObject.prefix&&K.ACCOUNT===T.job.sourceObject.prefix),Me=H(()=>{const p=[{label:o("job.DCJOB_AUTOCONVERT_JOBNAME"),value:T.job.jobName},{label:o("DCJOB_NEWJOB_AUTOCONVERTTHRESHOLD"),value:u.value.threshold},{label:o("job.DCJOB_AUTOCONVERT_PROCESSEDBY"),value:u.value.processing,format:d=>d===y.SF?"Salesforce":"DC Local"}];return ue.value||p.push({label:o("DCJOB_AUTOCONVERT_SELECTEDRECORDS"),value:`${P.value}`}),p.push({label:o("DCJOB_AUTOCONVERT_CONVERTSTATUS"),value:V.value[u.value.convertStatus]}),ie.value&&p.push({label:o("DCJOB_AUTOCONVERT_NEWCONTACTOWNER"),value:k.value[u.value.convertOwner]}),ne.value&&p.push({label:o("job.options.DCJOB_AUTOMERGE_OBJECTFILTER",[T.job?.sourceObject?.label]),value:ne.value,wide:!0}),le.value&&p.push({label:o("job.options.DCJOB_AUTOMERGE_OBJECTFILTER",[T.job?.matchObject?.label]),value:le.value,wide:!0}),g.value&&p.push({label:o("job.options.DCJOB_AUTOMERGE_OBJECTFILTER",["Duplicate Group"]),value:g.value,wide:!0}),p}),Ue=H(()=>ue.value?o("DCJOB_AUTOCONVERT_CONVERTACKNOWLEDGE_WITHOUT_RECORDCOUNT"):o("DCJOB_AUTOCONVERT_CONVERTACKNOWLEDGE",[P.value])),ke=H(()=>{const p=m.findIndex(_=>_===w.value),d=Q.value.find(_=>_.value===w.value);return`${o("job.new.DCJOB_AUTOCONVERT_STEP")} ${p+1} - ${d?.label}`});function Pe(){return{jobName:T.job.jobName,jobId:T.job.jobId,sourceObject:T.job.sourceObject.prefix,matchObject:T.job.matchObject.prefix,convertOwner:u.value.convertOwner,convertOwnerId:u.value.convertOwner==="OTHER"?z.value?.[0]?.value:u.value.convertOwnerId,convertStatus:u.value.convertStatus,threshold:parseInt(u.value.threshold),sourceFilterMethod:u.value.sourceFilterMethod,sourceFilter:JSON.stringify({filters:X.value.filterLines,filterLogic:X.value.filterLogic,objectApiName:T.job?.sourceObject.apiName,isNewVersion:!0}),matchFilterMethod:u.value.matchFilterMethod,matchFilter:JSON.stringify({filters:te.value.filterLines,filterLogic:te.value.filterLogic,objectApiName:T.job?.matchObject.apiName,isNewVersion:!0}),groupFilter:JSON.stringify({filters:Be(f.value),filterLogic:f.value.filterLogic,objectApiName:"dupcheck__dcGroup__c"}),isExternal:u.value.processing===y.LOCAL}}function Be(p){return p.filterLines.map(d=>{if(d.fieldApiName.includes("errorCount__c")&&d.fieldType==="BOOLEAN"){let _="";return d.values.includes("FALSE")?_="EQUAL":_="GREATER",{...d,fieldType:"NUMBERRANGE",operator:_,values:[0]}}return d})}return(p,d)=>(a(),U(e(He),{"close-function":p.closeFunction,"footer-content-pos":"none",width:"720px"},{headerContent:I(()=>[t("span",Vo,O(ke.value),1)]),bodyContent:I(()=>[p.license?.information?.isTrial&&!p.license?.information?.isSandbox?(a(),b("div",xo,O(e(o)("DCJOB_AUTOCONVERT_TRIALWARNING")),1)):c("",!0),t("div",{class:je(["modalBody",{options:w.value===s.CONFIGURE}])},[w.value===s.CONFIGURE?(a(),b(Z,{key:0},[t("div",Ho,[t("div",Wo,[t("span",null,O(e(o)("job.DCJOB_AUTOCONVERT_JOBNAME")),1)]),t("div",Qo,[t("span",null,O(p.job.jobName),1)])]),t("div",Ko,[t("div",zo,[t("span",null,O(e(o)("DCJOB_NEWJOB_CONVERTSTATUS")),1)]),t("div",Xo,[r(e(pe),{modelValue:u.value.convertStatus,"onUpdate:modelValue":d[0]||(d[0]=_=>u.value.convertStatus=_),options:V.value},null,8,["modelValue","options"])])]),ie.value?(a(),b(Z,{key:0},[t("div",qo,[t("div",Yo,[t("span",null,O(e(o)("DCJOB_NEWJOB_CONVERTOWNER")),1),t("div",Zo,[r(fe,{description:e(o)("DCJOB_NEWJOB_CONVERTOWNERINFO"),"icon-name":"slds-icon-info"},null,8,["description"])])]),t("div",el,[r(e(pe),{modelValue:u.value.convertOwner,"onUpdate:modelValue":d[1]||(d[1]=_=>u.value.convertOwner=_),options:k.value},null,8,["modelValue","options"])])]),u.value.convertOwner==="OTHER"?(a(),b("div",tl,[ol,t("div",ll,[r(e(ot),{modelValue:z.value,"onUpdate:modelValue":d[2]||(d[2]=_=>z.value=_),placeholder:e(o)("DCJOB_PLACEHOLDER_SEARCH"),icon:"slds-icon-search","options-callback":se},null,8,["modelValue","placeholder"])])])):c("",!0)],64)):c("",!0),t("div",sl,[t("div",al,O(e(o)("DCJOB_NEWJOB_AUTOCONVERTTHRESHOLD")),1),t("div",nl,[t("div",il,[r(e(pe),{modelValue:u.value.threshold,"onUpdate:modelValue":d[3]||(d[3]=_=>u.value.threshold=_),"compare-function":(_,he)=>Number(_)>Number(he)?-1:1,"compare-by-key":!0,"search-bar":"never",options:G.value},null,8,["modelValue","compare-function","options"])]),t("div",rl,[t("span",null,O(e(o)("job.options.DCJOB_AUTOCONVERT_AUTOCONVERTEXPLANATION",[u.value.threshold])),1),t("span",ul,O(e(o)("DCJOB_NEWJOB_AUTOCONVERTWARNING")),1)])])]),r(xe,{"filter-method":u.value.sourceFilterMethod,"onUpdate:filterMethod":d[4]||(d[4]=_=>u.value.sourceFilterMethod=_),"filter-model":X.value,"onUpdate:filterModel":d[5]||(d[5]=_=>X.value=_),show:de.value,"onUpdate:show":d[6]||(d[6]=_=>de.value=_),license:p.license,"filterable-fields":ce.value,"predefined-filters":oe.value,"has-multiple-filters":A.value||be.value,"filter-label":p.job?.sourceObject?.label,onFilterChange:d[7]||(d[7]=_=>h.value=!1)},null,8,["filter-method","filter-model","show","license","filterable-fields","predefined-filters","has-multiple-filters","filter-label"]),r(xe,{"filter-method":u.value.matchFilterMethod,"onUpdate:filterMethod":d[8]||(d[8]=_=>u.value.matchFilterMethod=_),"filter-model":te.value,"onUpdate:filterModel":d[9]||(d[9]=_=>te.value=_),show:A.value,"onUpdate:show":d[10]||(d[10]=_=>A.value=_),license:p.license,"filterable-fields":re.value,"predefined-filters":ee.value,"has-multiple-filters":be.value,"filter-label":p.job?.matchObject?.label,onFilterChange:d[11]||(d[11]=_=>h.value=!1)},null,8,["filter-method","filter-model","show","license","filterable-fields","predefined-filters","has-multiple-filters","filter-label"]),r(xe,{"filter-method":u.value.groupFilterMethod,"onUpdate:filterMethod":d[12]||(d[12]=_=>u.value.groupFilterMethod=_),"filter-model":f.value,"onUpdate:filterModel":d[13]||(d[13]=_=>f.value=_),show:be.value,"onUpdate:show":d[14]||(d[14]=_=>be.value=_),license:p.license,"filterable-fields":Oe.value,"predefined-filters":{},"has-multiple-filters":!1,"filter-label":"Duplicate Group",onFilterChange:d[15]||(d[15]=_=>h.value=!1)},null,8,["filter-method","filter-model","show","license","filterable-fields"])],64)):c("",!0),w.value===s.PROCESS_OPTIONS?(a(),b("div",cl,[t("div",dl,[t("span",null,O(e(o)("job.options.DCJOB_AUTOCONVERT_PROCESSINGOPTIONS")),1)]),t("div",Ol,[t("div",_l,[r(Ve,{height:120,"has-radio":!0,selected:u.value.processing===y.SF,title:e(o)("job.options.DCJOB_AUTOCONVERT_RUNONSF"),description:`${e(o)("DCJOB_NEWJOB_SFPROCESSDESCRIPTION")}`,onChange:d[16]||(d[16]=_=>D(y.SF))},{content:I(()=>[bl]),_:1},8,["selected","title","description"])]),t("div",vl,[r(Ve,{height:120,disabled:!0,"has-radio":!0,selected:u.value.processing===y.LOCAL,title:e(o)("job.options.DCJOB_AUTOCONVERT_RUNONDCLOCAL"),description:`${e(o)("DCJOB_AUTOCONVERT_DCLOCALMESSAGE")}`,onChange:d[17]||(d[17]=_=>D(y.LOCAL))},{content:I(()=>[pl]),_:1},8,["selected","title","description"])])])])):c("",!0),w.value===s.CONFIRMATION?(a(),b(Z,{key:2},[t("div",El,[(a(!0),b(Z,null,Re(Me.value,(_,he)=>(a(),b("span",{key:he,class:je(["summary",{"summary--wide":!!_.wide}])},[_.value?(a(),U(e(qe),{key:0,label:_.label,value:_.value,format:_.format},null,8,["label","value","format"])):c("",!0)],2))),128))]),t("div",fl,[r(e(_t),{modelValue:j.value,"onUpdate:modelValue":d[18]||(d[18]=_=>j.value=_)},null,8,["modelValue"]),t("span",Cl,O(Ue.value),1)])],64)):c("",!0)],2)]),footerContent:I(()=>[t("div",Dl,[ml,t("div",hl,[r(pt,{steps:Q.value},null,8,["steps"])]),t("div",Al,[h.value?(a(),b("div",Tl,[r(fe,{ref_key:"warning",ref:M,"icon-size":24,"icon-color":"#FFBF68","icon-name":"slds-icon-warning",border:"1px solid #e5e5e5","background-color":"#fff","always-open":!0,onClick:d[19]||(d[19]=_=>M.value.closeText())},{default:I(()=>[t("div",Jl,[t("div",Rl,[t("div",Bl,[r(e(De),{color:"#000",name:"slds-icon-warning",size:14})]),t("span",jl,O(e(o)("DCJOB_NEWJOB_NORECORDSSELECTED")),1),t("div",gl,[r(e(De),{color:"#000",name:"slds-icon-close",size:14})])]),t("div",Ll,[t("span",null,O(e(o)("DCJOB_AUTOCONVERT_NORECORDSSELECTED")),1)])])]),_:1},512)])):c("",!0),w.value===s.CONFIGURE?(a(),U(e(x),{key:1,label:e(o)("buttons.DCJOB_AUTOCONVERT_CANCEL"),onClick:p.closeFunction},null,8,["label","onClick"])):c("",!0),w.value!==s.CONFIGURE?(a(),U(e(x),{key:2,label:e(o)("buttons.DCJOB_AUTOCONVERT_BACK"),onClick:d[20]||(d[20]=_=>ae())},null,8,["label"])):c("",!0),t("span",Sl,[r(e(x),{"icon-pos":"left",loading:J.value>0,label:w.value===s.CONFIRMATION?e(o)("buttons.DCJOB_AUTOCONVERT_START"):e(o)("buttons.DCJOB_AUTOCONVERT_NEXT"),type:"primary",disabled:w.value===s.CONFIRMATION&&!j.value||ge.value,onClick:d[21]||(d[21]=_=>ae(!0))},null,8,["loading","label","disabled"])])])])]),_:1},8,["close-function"]))}});const yl=ye(Nl,[["__scopeId","data-v-eb749f40"]]),Ze=N=>(Ie("data-v-11bd4224"),N=N(),we(),N),Ml={class:"title"},Ul={class:"shareContainer"},Fl={class:"row"},$l={class:"item"},Il={class:"item"},wl=["value"],kl={class:"row"},Pl={class:"item"},Gl={class:"item"},Vl={class:"row copy"},xl={class:"row"},Hl={class:"item top"},Wl=Ze(()=>t("sup",{class:"required"},"*",-1)),Ql={class:"item"},Kl={class:"row"},zl={class:"item"},Xl={class:"item"},ql={class:"row textarea"},Yl={class:"item top"},Zl={class:"info"},es={class:"item textarea"},ts={class:"row"},os={class:"item top"},ls=Ze(()=>t("sup",{class:"required"},"*",-1)),ss={class:"item"},as={class:"row"},ns={class:"item"},is=Ze(()=>t("sup",{class:"required"},"*",-1)),rs={class:"item"},us={class:"row"},cs={class:"item"},ds={class:"item"},Os={class:"row"},_s={class:"item"},bs={class:"item"},vs={class:"row"},ps={class:"item"},Es=Ze(()=>t("sup",{class:"required"},"*",-1)),fs={class:"item"},Cs={class:"row textarea"},Ds={class:"item top"},ms={class:"info"},hs={class:"item textarea"},As={class:"buttons"},Ts={class:"confirm"},Js=Se({__name:"ShareModal",props:{closeFunction:{},title:{default:"Share"},shareLink:{}},emits:["confirm"],setup(N,{emit:n}){const{t:o}=Ne(),s={link:o("DCJOB_SHAREMODAL_DIRECTLINK"),email:o("DCJOB_SHAREMODAL_EMAIL"),task:o("DCJOB_SHAREMODAL_TASK")},y=N,K=i(),k=i(y.shareLink),V=i({show:!1,message:"",isError:!1}),z=i(!1),m=i("link"),T=i(!1),W=i(!1),G=i(!1),u=i(!1),j=i({recipients:[],subject:"",text:""}),J=i({recipients:[],subject:"",status:"",priority:"",dueDate:null,description:""}),w=i({}),Q=i({}),P=n;We(async()=>{w.value=await ce(),Q.value=await ee();const A=await h();j.value.text=`{!Link}

Kind regards,

${A}`,J.value.status=await re(),J.value.priority=await Oe(),J.value.dueDate=new Date().toISOString(),J.value.description="{!Link}"});const h=async()=>await B.getCurrentUser(),M=async A=>await B.getUsersByQuery(A),Y=async(A,f)=>await B.getGroupsByQuery({query:A,isQueue:f}),oe=async(A,f)=>f==="User"?await M(A):await Y(A,f==="Queue"),ce=async()=>B.getComboboxOptions("Task","Status"),ee=async()=>B.getComboboxOptions("Task","Priority"),re=async()=>B.getComboboxDefaultValue("Task","Status"),Oe=async()=>B.getComboboxDefaultValue("Task","Priority"),X={User:{label:o("DCJOB_OBJECT_USERS")},Group:{label:o("DCJOB_OBJECT_GROUPS")},Queue:{label:o("DCJOB_OBJECT_QUEUES")}},ne=async()=>{try{const A=K.value;A.focus(),A.select(),document.queryCommandSupported("copy"),document.execCommand("copy"),W.value=!0}catch(A){console.error("Could not copy text to clipboard"),console.error(A)}},de=async()=>{T.value=!0;try{if(te.value){const A={recipients:J.value.recipients.map(f=>({id:f.value,relatedObject:f.context})),subject:J.value.subject,description:J.value.description.replaceAll("{!Link}",y.shareLink),status:J.value.status,priority:J.value.priority,dueDate:J.value.dueDate};await B.createTask(A),V.value.isError=!1,V.value.message=o("DCJOB_SHAREMODAL_TASKSUCCESS"),V.value.show=!0}if(le.value){const A={recipients:j.value.recipients.map(f=>({id:f.value,relatedObject:f.context})),shareLink:y.shareLink,description:j.value.text.replaceAll("{!Link}",y.shareLink),subject:j.value.subject};await B.sendEmail(A),V.value.isError=!1,V.value.message=o("DCJOB_SHAREMODAL_EMAILSUCCESS"),V.value.show=!0}}catch(A){console.error(A),V.value.isError=!0,V.value.message=A,V.value.show=!0}finally{T.value=!1,y.closeFunction(),P("confirm",{detail:V.value})}},te=H(()=>m.value==="task"),le=H(()=>m.value==="email");return Ce(j.value,async A=>{u.value=A.recipients.length>0}),Ce(J.value,async A=>{G.value=A.recipients.length>0&&A.status!==""&&A.priority!==""}),(A,f)=>z.value?c("",!0):(a(),U(e(He),{key:0,"close-function":A.closeFunction,"has-footer":m.value!=="link",width:"initial"},{headerContent:I(()=>[r(e(De),{name:"slds-icon-internal_share",color:"#747474",size:18}),t("span",Ml,O(A.title),1)]),bodyContent:I(()=>[t("div",Ul,[t("div",Fl,[t("div",$l,O(e(o)("DCJOB_SHAREMODAL_SHAREMETHOD")),1),t("div",Il,[r(e(pe),{modelValue:m.value,"onUpdate:modelValue":f[0]||(f[0]=g=>m.value=g),options:s},null,8,["modelValue"])])]),t("textarea",{ref_key:"textAreaCopy",ref:K,class:"textAreaCopy",value:A.shareLink},null,8,wl),m.value==="link"?(a(),b(Z,{key:0},[t("div",kl,[t("div",Pl,O(e(o)("DCJOB_SHAREMODAL_LINK")),1),t("div",Gl,[r(e(tt),{modelValue:k.value,"onUpdate:modelValue":f[1]||(f[1]=g=>k.value=g),readonly:""},null,8,["modelValue"])])]),t("div",Vl,[r(e(x),{label:W.value?e(o)("DCJOB_SHAREMODAL_COPIED"):e(o)("DCJOB_SHAREMODAL_COPY"),icon:W.value?"slds-icon-success":"slds-icon-copy_to_clipboard","icon-color":W.value?"#45c65a":"#747474",onClick:ne},null,8,["label","icon","icon-color"])])],64)):c("",!0),le.value?(a(),b(Z,{key:1},[t("div",xl,[t("div",Hl,[Le(O(e(o)("DCJOB_SHAREMODAL_RECIPIENTS"))+" ",1),Wl]),t("div",Ql,[r(e(ot),{modelValue:j.value.recipients,"onUpdate:modelValue":f[2]||(f[2]=g=>j.value.recipients=g),"lookup-context":X,"options-callback":oe,"multi-select":"",icon:"slds-icon-search",placeholder:e(o)("DCJOB_PLACEHOLDER_SEARCH")},null,8,["modelValue","placeholder"])])]),t("div",Kl,[t("div",zl,O(e(o)("DCJOB_SHAREMODAL_SUBJECT")),1),t("div",Xl,[r(e(tt),{modelValue:j.value.subject,"onUpdate:modelValue":f[3]||(f[3]=g=>j.value.subject=g)},null,8,["modelValue"])])]),t("div",ql,[t("div",Yl,[Le(O(e(o)("DCJOB_SHAREMODAL_TEXT"))+" ",1),t("span",Zl,[r(fe,{"icon-name":"slds-icon-info",description:e(o)("DCJOB_SHAREMODAL_SHAREINFO",["{!Link}"])},null,8,["description"])])]),t("div",es,[r(e(it),{modelValue:j.value.text,"onUpdate:modelValue":f[4]||(f[4]=g=>j.value.text=g)},null,8,["modelValue"])])])],64)):c("",!0),te.value?(a(),b(Z,{key:2},[t("div",ts,[t("div",os,[Le(O(e(o)("DCJOB_SHAREMODAL_ASSIGNTO"))+" ",1),ls]),t("div",ss,[r(e(ot),{modelValue:J.value.recipients,"onUpdate:modelValue":f[5]||(f[5]=g=>J.value.recipients=g),"lookup-context":X,"options-callback":oe,"multi-select":"",icon:"slds-icon-search",placeholder:e(o)("DCJOB_PLACEHOLDER_SEARCH")},null,8,["modelValue","placeholder"])])]),t("div",as,[t("div",ns,[Le(O(e(o)("DCJOB_SHAREMODAL_STATUS")),1),is]),t("div",rs,[r(e(pe),{modelValue:J.value.status,"onUpdate:modelValue":f[6]||(f[6]=g=>J.value.status=g),options:w.value},null,8,["modelValue","options"])])]),t("div",us,[t("div",cs,O(e(o)("DCJOB_SHAREMODAL_SUBJECT")),1),t("div",ds,[r(e(tt),{modelValue:J.value.subject,"onUpdate:modelValue":f[7]||(f[7]=g=>J.value.subject=g)},null,8,["modelValue"])])]),t("div",Os,[t("div",_s,O(e(o)("DCJOB_SHAREMODAL_DUEDATE")),1),t("div",bs,[r(e(ze),{modelValue:J.value.dueDate,"onUpdate:modelValue":f[8]||(f[8]=g=>J.value.dueDate=g)},null,8,["modelValue"])])]),t("div",vs,[t("div",ps,[Le(O(e(o)("DCJOB_SHAREMODAL_PRIORITY")),1),Es]),t("div",fs,[r(e(pe),{modelValue:J.value.priority,"onUpdate:modelValue":f[9]||(f[9]=g=>J.value.priority=g),options:Q.value},null,8,["modelValue","options"])])]),t("div",Cs,[t("div",Ds,[Le(O(e(o)("DCJOB_SHAREMODAL_DESCRIPTION"))+" ",1),t("span",ms,[r(fe,{"icon-name":"slds-icon-info",description:e(o)("DCJOB_SHAREMODAL_SHAREINFO",["{!Link}"])},null,8,["description"])])]),t("div",hs,[r(e(it),{modelValue:J.value.description,"onUpdate:modelValue":f[10]||(f[10]=g=>J.value.description=g)},null,8,["modelValue"])])])],64)):c("",!0)])]),footerContent:I(()=>[t("div",As,[r(e(x),{label:e(o)("DCJOB_BUTTON_CANCEL"),onClick:A.closeFunction},null,8,["label","onClick"]),t("div",Ts,[r(e(x),{loading:T.value,disabled:te.value&&!G.value||le.value&&!u.value,type:"primary",label:te.value?e(o)("DCJOB_SHAREMODAL_CREATETASK"):e(o)("DCJOB_SHAREMODAL_EMAIL"),onClick:de},null,8,["loading","disabled","label"])])])]),_:1},8,["close-function","has-footer"]))}});const Rs=ye(Js,[["__scopeId","data-v-11bd4224"]]),Qe={"001":"account","001P":"person_account","002":"note","003":"contact","005":"user","006":"opportunity",500:"case",701:"campaign","00G":"groups","00I":"partners","00O":"report","00P":"attachment","00Q":"lead","00T":"task","00U":"event","00i":"pricebook","00j":"product","00v":"campaign_members","01s":"pricebook","01t":"product",800:"contract",801:"orders"},Ae={LEAD:"00Q",ACCOUNT:"001",CONTACT:"003",PERSON_ACCOUNT:"001P"},Bs=N=>(Ie("data-v-eb0ac5f1"),N=N(),we(),N),js={class:"job-card-container"},gs={class:"main"},Ls=["checked"],Ss={key:0,class:"iconLabel"},Ns={key:0,class:"iconLabel"},ys=["title"],Ms={key:1,class:"iconMargin"},Us={class:"filterHover"},Fs={key:0,class:"filterText"},$s={key:1,class:"filterText"},Is={key:2,class:"iconMargin"},ws={key:3,class:"iconMargin"},ks=Bs(()=>t("span",{class:"spacer"},null,-1)),Ps={class:"buttons"},Gs={class:"body"},Vs={class:"headerRow"},xs=["title"],Hs={class:"result",colspan:"3"},Ws=["title"],Qs=["title"],Ks={key:1,class:"spinnerContainer"},zs={key:2,class:"progressContainer"},Xs={class:"resultCell",colspan:"3"},qs={class:"resultContainer"},Ys={class:"result"},Zs=["title"],ea={key:0,class:"copy"},ta=["title"],oa={key:0,class:"icon"},la=["value"],sa={class:"badge"},aa={class:"action"},na={class:"actionContent"},ia=["title"],ra={key:2,class:"spinnerContainer"},ua={key:3,class:"progressContainer"},ca={class:"filterHover"},da={key:0,class:"filterText"},Oa={key:1,class:"filterText"},_a={key:1,class:"filterText"},ba={class:"resultCell",colspan:"3"},va={class:"resultContainer"},pa={class:"result"},Ea={key:0,class:"label"},fa={class:"action"},Ca={class:"actionContent"},Da=Se({__name:"JobCard",props:{job:{},license:{},actionWidth:{default:"120px"},markedForDeletion:{type:Boolean,default:!1}},emits:["refresh","mark-for-deletion","delete"],setup(N,{emit:n}){const{t:o}=Ne(),s=N,y=Et(),K=new Tt,k=n,V=i(!1),z=i(!1),m=i(!1),T=i(!1),W=i(!1),G=i(""),u=i([]),j=i(),J=i(),w=i({show:!1,message:"",isError:!1}),Q={task:o("job.DCJOB_JOBCARD_TASK"),started:o("job.DCJOB_JOBCARD_STARTED"),finished:o("job.DCJOB_JOBCARD_FINISHED"),user:o("job.DCJOB_JOBCARD_USER"),status:o("job.DCJOB_JOBCARD_STATUS")},P=i({}),h=s.job.jobData?.filterOn&&s.job.jobData.filterOn!=="all",M=s.job.jobData?.filterWith&&(s.job.jobData.filterWith!=="all"||!h&&s.job.jobData?.filterWith==="source")&&(s.job.jobData.filter!==null||s.job.jobData.filterMatch!==null),Y=l=>l!==null&&l.startsWith("predefined-"),oe=s.job.sourceObject.prefix!==s.job.matchObject.prefix,ce=oe?`${s.job.sourceObject.label} ${o("DCJOB_FILTER_FILTER")}`:o("filter.DCJOB_INFOMODAL_SOURCEFILTER"),ee=Y(s.job.jobData.filterOn)?s.job.jobData.filterOn:s.job.jobData.filter,re=`${ce} : ${ee}`,Oe=oe?`${s.job.matchObject.label} ${o("DCJOB_FILTER_FILTER")}`:o("filter.DCJOB_INFOMODAL_MATCHFILTER"),X=s.job.jobData.filterWith==="source"?ee:Y(s.job.jobData.filterWith)?s.job.jobData.filterWith:s.job.jobData.filterMatch,ne=`${Oe} : ${X}`,de=l=>Object.values(P.value).includes(l),te=async l=>{const C=l!==""?l:s.job.jobId;P.value[C]=C,await B.abortJob(C),k("refresh")},le=()=>{window.open("https://www.plauti.com/support/55usage-guide/why-you-need-to-check-your-record-limit?from_search=90409667","_blank")},A=()=>{try{const l=j.value;l.focus(),l.select(),document.queryCommandSupported("copy"),document.execCommand("copy")}catch(l){console.error("Could not copy text to clipboard"),console.error(l)}};function f(l){return["quickconvert","quickmerge","manualconvert","manualmerge","convert","merge","merge-ext"].includes(l)}function g(l){return["quickconvert","manualconvert","convert"].includes(l)?o("job.DCJOB_JOBCARD_CONVERTLOG"):o("job.DCJOB_JOBCARD_MERGELOG")}async function be(l=!1){z.value=!1,await B.createExportJob(s.job.jobId,l),k("refresh")}function Te(l,C){const R={isCrossObject:l,jobId:C};K.navigate(`lightning/n/dupcheck__dc3JobDetail#/job/${btoa(JSON.stringify(R))}`)}function q(l,C,R){const $=99<s.job?.subJobs?.[l]?.threshold?`(${s.job?.subJobs?.[l]?.threshold}%)`:`(${String.fromCharCode(8805)}${s.job?.subJobs?.[l]?.threshold}%)`;return Me(l)&&C==="task"?o("job.DCJOB_JOBCARD_EXPORTRESULTSDCLOCAL"):Ue(l)&&C==="task"?o("job.DCJOB_JOBCARD_EXPORTRESULTSCLOUD"):ke(l)&&C==="task"?`${o("job.DCJOB_JOBCARD_AUTOMERGE")} ${$}`:Be(l)&&C==="task"?o("job.DCJOB_JOBCARD_QUICKMERGE"):Pe(l)&&C==="task"?o("job.DCJOB_JOBCARD_MANUALMERGE"):_(l)&&C==="task"?`${o("job.DCJOB_JOBCARD_AUTOCONVERT")} ${$}`:Ee(l)&&C==="task"?o("job.DCJOB_JOBCARD_QUICKCONVERT"):he(l)&&C==="task"?o("job.DCJOB_JOBCARD_MANUALCONVERT"):p(l)&&C==="task"?`${o("job.DCJOB_JOBCARD_AUTOMERGEDCLOCAL")} ${$}`:d(l)&&C==="task"?`${o("job.DCJOB_JOBCARD_AUTOMERGECLOUD")} ${$}`:ie()&&C==="task"?o("DCJOB_OVERVIEW_DELETINGJOB"):C!=="status"||!D(l,C)?R:`${R} (${Je(l)}%)`}function me(l){return l?s.job?.subJobs?.[l]?.status==="Queued"||s.job?.subJobs?.[l]?.status==="Preparing":s.job.jobData.status==="Queued"||s.job.jobData.status==="Preparing"}function ge(l,C){return l>1?`${l} Errors`:`${l} Error`}function se(l,C){const R={lines:[{fieldType:"BOOLEAN",fieldApiName:"errorCount__c",fieldLabel:"Group Contains Merge Error",operator:"EQUAL",values:["true"],labels:["True"],index:0,filterNumber:"1.",dateTimeObject:[],displayValue:"True",picklistValueIsText:!1}],logic:""},$={isCrossObject:l,jobId:C,filterModel:JSON.stringify(R)};K.navigate(`lightning/n/dupcheck__dc3JobDetail#/job/${btoa(JSON.stringify($))}`)}function Je(l=null){return l?s.job?.subJobs?.[l]?.progress??0:s.job?.jobData?.progress}function D(l=null,C=null){return C!=="status"?!1:l?(s.job?.subJobs?.[l]?.progress??0)<100:s.job?.jobData?.progress<100}function v(l){return s.job?.subJobs?.[l]?.filter!==""&&s.job?.subJobs?.[l]?.filter!==null}function E(l){return s.job?.subJobs?.[l]?.filterMatch!==""&&s.job?.subJobs?.[l]?.filterMatch!==null}function ae(l){return s.job?.subJobs?.[l]?.groupFilter!==""&&s.job?.subJobs?.[l]?.groupFilter!==null}function _e(l,C){return C!=="task"||Me(l)||Ue(l)?!1:v(l)||E(l)||ae(l)}function ue(l,C){const R=[];return C&&l.filter&&R.push(l.filter),!C&&l.filterMatch&&R.push(l.filterMatch),l.groupFilter&&R.push(l.groupFilter),R.join(" AND ")}function ie(){return s.job?.jobData?.type==="search-del"}function Me(l){return s.job?.subJobs?.[l]?.type==="export-ext"&&!s.job?.subJobs?.[l]?.runInCloud}function Ue(l){return s.job?.subJobs?.[l]?.type==="export-ext"&&!!s.job?.subJobs?.[l]?.runInCloud}function ke(l){return s.job?.subJobs?.[l]?.type==="merge"}function Pe(l){return s.job?.subJobs?.[l]?.type==="manualmerge"}function Be(l){return s.job?.subJobs?.[l]?.type==="quickmerge"}function p(l){return s.job?.subJobs?.[l]?.type==="merge-ext"&&!s.job?.subJobs?.[l]?.runInCloud}function d(l){return s.job?.subJobs?.[l]?.type==="merge-ext"&&!!s.job?.subJobs?.[l]?.runInCloud}function _(l){return s.job?.subJobs?.[l]?.type==="convert"}function he(l){return s.job?.subJobs?.[l]?.type==="manualconvert"}function Ee(l){return s.job?.subJobs?.[l]?.type==="quickconvert"}function Ge(l){return["Completed","Aborted"].includes(l)}function et(l){const C=["quickconvert","manualconvert","convert"].includes(l)?"CONVERTLOG":"MERGELOG";J.value=C,V.value=!0}function L(){V.value=!1,J.value=void 0}const S=H(()=>Ae.LEAD===s.job.sourceObject.prefix&&Ae.ACCOUNT===s.job.matchObject.prefix||Ae.LEAD===s.job.matchObject.prefix&&Ae.ACCOUNT===s.job.sourceObject.prefix),F=H(()=>Ae.LEAD===s.job.sourceObject.prefix&&(Ae.CONTACT===s.job.matchObject.prefix||Ae.PERSON_ACCOUNT===s.job.matchObject.prefix)||Ae.LEAD===s.job.matchObject.prefix&&(Ae.CONTACT===s.job.sourceObject.prefix||Ae.PERSON_ACCOUNT===s.job.sourceObject.prefix)),Fe=H(()=>Object.keys(Qe).includes(s.job.sourceObject.prefix)?Qe[s.job.sourceObject.prefix]:"default"),Ct=H(()=>Object.keys(Qe).includes(s.job.matchObject.prefix)?Qe[s.job.matchObject.prefix]:"default"),nt=H(()=>s.job.jobData.status==="Aborted"?"":s.job.jobData.result?s.job.jobData?.errorMessage!==s.job.jobData.result?s.job.jobData.result:"":s.job.jobData.errorMessage?"":"N/A"),Dt=H(()=>[{label:o("job.DCJOB_JOBCARD_JOBNAME"),value:s.job.jobName},{label:o("job.DCJOB_JOBCARD_JOBID"),value:s.job.jobId},{label:o("job.DCJOB_JOBCARD_NUMBEROFRECORDS"),value:`${s.job.jobData.records}`},{label:o("job.DCJOB_JOBCARD_NUMBEROFPAIRS"),value:`${s.job.duplicates}`},{label:o("job.DCJOB_JOBCARD_RESULTFIELDS"),value:u.value?u.value.map(l=>l.fieldLabel).join(", "):""}]),mt=H(()=>!!y.featureSettings?.ShowQuickAutoMerge),ht=H(()=>{const l=["flow","setformerge","unique","delta","deltasingle","web2lead"],C=s.job,R=[{isHeader:!0,label:o("job.menuOptions.DCJOB_JOBCARD_TITLE")},{isHeader:!1,disabled:l.includes(C.jobData.type),label:o("job.menuOptions.DCJOB_JOBCARD_OPTION_RESTART"),align:!1,iconPos:"left",iconColor:"#747474",icon:"slds-icon-refresh",callback:async()=>{await B.restartJob(C.jobData?.jobId),k("refresh",!0)}},{isHeader:!1,disabled:!(s.license?.features?.batchConvert&&s.license?.features?.batchMerge&&C.jobData.duplicateGroups!==0&&Ge(C.jobData.statusApiName)),label:o(oe?"job.menuOptions.DCJOB_JOBCARD_OPTION_STARTAUTOCONVERT":"job.menuOptions.DCJOB_JOBCARD_OPTION_STARTAUTOMERGE"),align:!1,iconPos:"left",iconColor:"#747474",icon:"slds-icon-play",callback:()=>{T.value=oe,m.value=!oe}},{isHeader:!1,disabled:!(s.license?.features?.batchExport&&C.jobData.duplicateGroups!==0&&Ge(C.jobData.statusApiName)),label:o("job.menuOptions.DCJOB_JOBCARD_OPTION_EXPORTRESULTS"),align:!1,iconPos:"left",iconColor:"#747474",icon:"slds-icon-download",callback:async()=>{z.value=!0,u.value=await B.getResultFields(C.sourceObject.prefix)}},{isHeader:!1,label:o("job.menuOptions.DCJOB_JOBCARD_OPTION_SHAREJOB"),align:!1,iconPos:"left",iconColor:"#747474",icon:"slds-icon-internal_share",callback:async()=>{G.value=await B.generateShareLink(C.jobId,C.sourceObject?.prefix!==C.matchObject?.prefix),W.value=!0}},{isHeader:!1,label:o("job.menuOptions.DCJOB_JOBCARD_OPTION_DELETEJOB"),align:!1,iconPos:"left",iconColor:"#747474",icon:"slds-icon-delete",callback:()=>{k("delete",s.job)}}];return(!mt.value||s.job.sourceObject.prefix!==s.job.matchObject.prefix&&!S.value&&!F.value)&&R.splice(2,1),R});return(l,C)=>(a(),b(Z,null,[t("div",js,[t("div",gs,[t("input",{type:"checkbox",class:"delete-checkbox",checked:s.markedForDeletion,onChange:C[0]||(C[0]=R=>k("mark-for-deletion",{delete:R.target.checked,jobId:s.job.jobId}))},null,40,Ls),r(rt,{class:"icon","icon-name":`slds-icon-${Fe.value}`,"icon-size":12},{label:I(()=>[l.job.sourceObject.label?(a(),b("span",Ss,O(l.job.sourceObject.label),1)):c("",!0)]),_:1},8,["icon-name"]),l.job.matchObject.apiName!==l.job.sourceObject.apiName?(a(),U(rt,{key:0,class:"icon","icon-size":12,"icon-name":`slds-icon-${Ct.value}`},{label:I(()=>[l.job.matchObject.label?(a(),b("span",Ns,O(l.job.matchObject.label),1)):c("",!0)]),_:1},8,["icon-name"])):c("",!0),t("span",{class:"jobName",title:l.job.jobName},O(l.job.jobName),9,ys),e(h)||e(M)?(a(),b("div",Ms,[r(fe,{"icon-name":"slds-icon-filterList"},{default:I(()=>[t("div",Us,[e(h)?(a(),b("span",Fs,O(re))):c("",!0),e(M)?(a(),b("span",$s,O(ne))):c("",!0)])]),_:1})])):c("",!0),l.job.jobData.type.includes("ext")&&!l.job.jobData.runInCloud?(a(),b("div",Is,[r(fe,{"icon-name":"slds-icon-desktop",description:e(o)("DCJOB_JOBCARD_PROCESSEDWITHDCLOCAL")},null,8,["description"])])):c("",!0),l.job.jobData.type.includes("ext")&&l.job.jobData.runInCloud?(a(),b("div",ws,[r(fe,{"icon-name":"slds-icon-salesforce1",description:e(o)("DCJOB_JOBCARD_PROCESSEDWITHCLOUD")},null,8,["description"])])):c("",!0),ks,t("div",Ps,[r(e(x),{disabled:l.job.jobData.duplicateGroups===0,class:"button",label:`${e(o)("buttons.DCJOB_JOBCARD_VIEWRESULTS")} (${l.job.jobData.duplicateGroups})`,icon:"slds-icon-list","icon-color":"#747474",onClick:C[1]||(C[1]=R=>Te(l.job.matchObject.apiName!==l.job.sourceObject.apiName,l.job.jobId))},null,8,["disabled","label"]),r(e(x),{disabled:l.job.matchObject.prefix==="IMP",class:"button",label:e(o)("buttons.DCJOB_JOBCARD_INFO"),icon:"slds-icon-info","icon-color":"#747474",onClick:C[2]||(C[2]=R=>V.value=!0)},null,8,["disabled","label"]),r(e(Jt),{disabled:l.job.matchObject.prefix==="IMP",class:"button","icon-pos":"left","menu-pos":"right",options:ht.value,label:e(o)("buttons.DCJOB_JOBCARD_JOBOPTIONS"),"align-icons":!0},null,8,["disabled","options","label"])])]),t("div",Gs,[t("table",null,[t("thead",null,[t("tr",Vs,[(a(),b(Z,null,Re(Q,(R,$)=>t("th",{key:$,class:je($)},[t("span",{title:R,class:"value"},O(R),9,xs)],2)),64)),t("th",Hs,[t("span",{title:e(o)("job.DCJOB_JOBCARD_RESULT"),class:"value"},O(e(o)("job.DCJOB_JOBCARD_RESULT")),9,Ws)]),t("th",{class:"action",style:Rt({"--width":l.actionWidth})},null,4)])]),t("tbody",null,[t("tr",null,[(a(),b(Z,null,Re(Q,(R,$)=>t("td",{key:$},[t("div",{class:je($)},[l.job.jobData[$]?(a(),b("span",{key:0,title:q("",$,l.job.jobData[$]),class:"value"},O(q("",$,l.job.jobData[$])),9,Qs)):c("",!0),$==="status"&&me("")||$==="result"&&!l.job.jobData.result&&!l.job.jobData.errorMessage?(a(),b("div",Ks,[r(e(Xe),{variant:"primary"})])):c("",!0),D(null,$)?(a(),b("div",zs,[r(e(ut),{percentage:l.job.jobData?.progress,"element-width":20,"ring-width":2,color:"#45c65a"},null,8,["percentage"])])):c("",!0)],2)])),64)),t("td",Xs,[t("div",qs,[t("div",Ys,[t("span",{title:nt.value,class:"label"},O(nt.value),9,Zs),l.job.jobData?.errorMessage?(a(),b("div",ea,[t("span",{title:l.job.jobData?.errorMessage.includes("aborted")?e(o)("DCJOB_OVERVIEW_JOBABORTED"):l.job.jobData?.errorMessage,class:"errorMessage"},O(l.job.jobData?.errorMessage.includes("aborted")?e(o)("DCJOB_OVERVIEW_JOBABORTED"):l.job.jobData?.errorMessage),9,ta),l.job.jobData.status!=="Aborted"?(a(),b("div",oa,[r(e(De),{name:"slds-icon-copy_to_clipboard",color:"#747474",onClick:A}),t("textarea",{ref_key:"textAreaCopy",ref:j,class:"textAreaCopy",value:l.job.jobData.errorMessage},null,8,la)])):c("",!0)])):c("",!0),t("div",sa,[l.job.jobData?.errors>0&&Ge(l.job.jobData.statusApiName)?(a(),U(e($e),{key:0,type:"error",label:""},{content:I(()=>[t("span",{class:"errorLink",onClick:C[3]||(C[3]=R=>se(l.job.matchObject.apiName!==l.job.sourceObject.apiName,l.job.jobId))},O(ge(l.job.jobData.errors,l.job.jobData.type)),1)]),_:1})):c("",!0),l.job.jobData?.limit?(a(),U(e($e),{key:1,type:"warning",label:e(o)("badges.DCJOB_JOBCARD_LIMITTEXT")},{content:I(()=>[t("span",{class:"limitLink",onClick:le},O(e(o)("badges.DCJOB_JOBCARD_READMORE"))+".",1)]),_:1},8,["label"])):c("",!0)])])])]),t("td",aa,[t("div",na,[l.job.jobData.progress<100?(a(),U(e(x),{key:0,"spinner-type":"light",loading:de(l.job.jobId)&&l.job.jobData.status!=="Aborted",label:e(o)("buttons.DCJOB_JOBCARD_ABORT"),type:"danger",onClick:C[4]||(C[4]=R=>te(""))},null,8,["loading","label"])):c("",!0)])])]),l.job.subJobs?(a(!0),b(Z,{key:0},Re(l.job.subJobs,(R,$)=>(a(),b("tr",{key:$},[(a(),b(Z,null,Re(Q,(At,ve)=>t("td",{key:ve},[t("div",{class:je(ve)},[ve==="task"?(a(),U(e(De),{key:0,class:"subJob",name:"slds-icon-level_down",color:"#747474"})):c("",!0),ve!=="result"?(a(),b("span",{key:1,title:q($,ve,R[ve]),class:je(["value",ve])},O(q($,ve,R[ve])),11,ia)):c("",!0),ve==="status"&&me($)?(a(),b("div",ra,[r(e(Xe),{variant:"primary"})])):c("",!0),D($,ve)?(a(),b("div",ua,[r(e(ut),{percentage:R?.progress,"element-width":20,"ring-width":2,color:"#45c65a"},null,8,["percentage"])])):c("",!0),_e($,ve)?(a(),U(fe,{key:4,class:"hoverText","icon-name":"slds-icon-filterList","icon-color":"#747474"},{default:I(()=>[t("div",ca,[v($)||E($)?(a(),b(Z,{key:0},[v($)?(a(),b("span",da,O(`${s.job.sourceObject.label} ${e(o)("DCJOB_FILTER_FILTER")}`)+" : "+O(ue(R,!0)),1)):c("",!0),E($)?(a(),b("span",Oa,O(`${s.job.matchObject.label} ${e(o)("DCJOB_FILTER_FILTER")}`)+" : "+O(ue(R,!1)),1)):c("",!0)],64)):ae($)?(a(),b("span",_a,O(e(o)("DCJOB_FILTER_FILTER"))+" : "+O(R.groupFilter),1)):c("",!0)])]),_:2},1024)):c("",!0)],2)])),64)),t("td",ba,[t("div",va,[t("div",pa,[R?.result?(a(),b("span",Ea,O(R.result),1)):c("",!0)])])]),t("td",fa,[t("div",Ca,[f(R.type)?(a(),U(e(x),{key:0,"spinner-type":"light",label:g(R.type),type:"regular",onClick:At=>et(R.type)},null,8,["label","onClick"])):c("",!0),R.progress<100&&!R.type.includes("del")?(a(),U(e(x),{key:1,"spinner-type":"light",loading:de($)&&R.status!=="Aborted",label:de($)&&R.status!=="Aborted"?e(o)("DCJOB_BUTTON_ABORTING"):e(o)("buttons.DCJOB_JOBCARD_ABORT"),type:"danger",onClick:()=>te($)},null,8,["loading","label","onClick"])):c("",!0)])])]))),128)):c("",!0)])])])]),w.value.show?(a(),U(e(vt),{key:0,label:w.value.message,"toast-type":w.value.isError?"error":"success","close-function":()=>w.value.show=!1,"auto-close-timer":3e3},null,8,["label","toast-type","close-function"])):c("",!0),V.value?(a(),U(Ut,{key:1,"close-function":L,job:l.job,"active-tab":J.value},null,8,["job","active-tab"])):c("",!0),z.value?(a(),U(Zt,{key:2,"close-function":()=>z.value=!1,"export-info":Dt.value,"export-callback":be},null,8,["close-function","export-info"])):c("",!0),m.value?(a(),U(Go,{key:3,license:l.license,"close-function":()=>m.value=!1,job:l.job,onRefresh:C[5]||(C[5]=()=>k("refresh"))},null,8,["license","close-function","job"])):c("",!0),T.value?(a(),U(yl,{key:4,license:l.license,"close-function":()=>T.value=!1,job:l.job,onRefresh:C[6]||(C[6]=()=>k("refresh"))},null,8,["license","close-function","job"])):c("",!0),W.value?(a(),U(Rs,{key:5,"share-link":G.value,"close-function":()=>{W.value=!1},title:e(o)("DCJOB_SHAREMODAL_SHAREJOB"),onConfirm:C[7]||(C[7]=R=>w.value=R.detail)},null,8,["share-link","close-function","title"])):c("",!0)],64))}});const ma=ye(Da,[["__scopeId","data-v-eb0ac5f1"]]),ha={class:"title"},Aa={class:"body-container"},Ta={class:"row"},Ja={class:"item"},Ra={class:"item"},Ba={class:"row"},ja={class:"item"},ga={class:"item"},La={key:0,class:"row"},Sa={class:"item"},Na={class:"item"},ya={class:"fullwidth"},Ma={key:1,class:"row"},Ua={class:"item"},Fa={class:"item"},$a={class:"fullwidth"},Ia={key:2,class:"row"},wa={class:"item"},ka={class:"item"},Pa={class:"fullwidth"},Ga={class:"row"},Va={class:"item"},xa={class:"item"},Ha={class:"row"},Wa={class:"item"},Qa={class:"item"},Ka={class:"row"},za={class:"item"},Xa={class:"item"},qa={key:0,class:"spinner"},Ya={class:"buttons"},Za={class:"button"},en=Se({__name:"DeleteModal",props:{closeFunction:{type:Function},totalJobs:{},storageSpace:{}},emits:["refresh","toast"],setup(N,{emit:n}){const{t:o}=Ne(),s=n,y={all:o("general.DCJOB_DELETEMODAL_ALLTIME"),date:o("general.DCJOB_DELETEMODAL_SETDATE"),dateRange:o("general.DCJOB_DELETEMODAL_SETDATERANGE")},K={all:"All Types",search:"Duplicate Check Job",deltasingle:"Single API Insert",delta:"Unique Import/Bulk API Insert",web2lead:"Web to Lead",flow:"Flow"},k={TRUE:"True",FALSE:"False"},V=N,z=i(!1),m=i(!1),T=i(!1),W=i(0),G=i(0),u=Bt({createdAt:"all",date:null,dateFrom:null,dateUntil:null,type:"all",containsDupes:"FALSE"});We(async()=>{m.value=!0;const P=await B.getRecordsForDelete(j());W.value=P?.job??0,G.value=P?.total??0,m.value=!1,u.date=new Date().toISOString(),u.dateFrom=new Date().toISOString(),u.dateUntil=new Date().toISOString()});function j(){return{createdAt:u?.createdAt??"all",deleteDate:u?.date?u.date.split("T")[0]:new Date().toISOString().split("T")[0],dateFrom:u?.dateFrom?u.dateFrom.split("T")[0]:new Date().toISOString().split("T")[0],dateUntil:u?.dateUntil?u.dateUntil.split("T")[0]:new Date().toISOString().split("T")[0],type:u?.type??"all",containsDupes:u?.containsDupes??"FALSE"}}async function J(){const P=j();T.value=!0;try{await B.deleteJobs(P)}catch(h){s("toast","error",h.message)}s("refresh"),T.value=!1,z.value=!1,V.closeFunction()}Ce(u,async P=>{const h=j();m.value=!0;const M=await B.getRecordsForDelete(h);W.value=M?.job??0,G.value=M?.total??0,m.value=!1});const w=H(()=>{const P=`${V.totalJobs}`,h=V.storageSpace;if(h<1e3)return`${P} (${h} KB)`;const M=h/1e3;return`${P} (${h%1e3===0?M:M.toFixed(1)} MB)`}),Q=H(()=>{const P=W.value?W.value/V.totalJobs*100:0;return`${W.value} (${P.toFixed(0)}% of total)`});return(P,h)=>(a(),b(Z,null,[z.value?c("",!0):(a(),U(e(He),{key:0,"close-function":P.closeFunction,width:"initial"},{headerContent:I(()=>[r(e(De),{name:"slds-icon-delete",color:"#747474",size:18}),t("span",ha,O(e(o)("buttons.DCJOB_DELETEMODAL_DELETEJOBS")),1)]),bodyContent:I(()=>[t("div",Aa,[t("div",Ta,[t("div",Ja,O(e(o)("job.DCJOB_DELETEMODAL_CURRENTNUMBEROFJOBS")),1),t("div",Ra,O(w.value),1)]),t("div",Ba,[t("div",ja,O(e(o)("job.DCJOB_DELETEMODAL_JOBSCREATEDAT")),1),t("div",ga,[r(e(pe),{modelValue:u.createdAt,"onUpdate:modelValue":h[0]||(h[0]=M=>u.createdAt=M),options:y},null,8,["modelValue"])])]),u.createdAt==="date"?(a(),b("div",La,[t("div",Sa,O(e(o)("general.DCJOB_DELETEMODAL_DATE")),1),t("div",Na,[t("div",ya,[r(e(ze),{modelValue:u.date,"onUpdate:modelValue":h[1]||(h[1]=M=>u.date=M)},null,8,["modelValue"])])])])):c("",!0),u.createdAt==="dateRange"?(a(),b("div",Ma,[t("div",Ua,O(e(o)("general.DCJOB_DELETEMODAL_FROM")),1),t("div",Fa,[t("div",$a,[r(e(ze),{modelValue:u.dateFrom,"onUpdate:modelValue":h[2]||(h[2]=M=>u.dateFrom=M)},null,8,["modelValue"])])])])):c("",!0),u.createdAt==="dateRange"?(a(),b("div",Ia,[t("div",wa,O(e(o)("general.DCJOB_DELETEMODAL_UNTIL")),1),t("div",ka,[t("div",Pa,[r(e(ze),{modelValue:u.dateUntil,"onUpdate:modelValue":h[3]||(h[3]=M=>u.dateUntil=M)},null,8,["modelValue"])])])])):c("",!0),t("div",Ga,[t("div",Va,O(e(o)("general.DCJOB_DELETEMODAL_TYPE")),1),t("div",xa,[r(e(pe),{modelValue:u.type,"onUpdate:modelValue":h[4]||(h[4]=M=>u.type=M),options:K},null,8,["modelValue"])])]),t("div",Ha,[t("div",Wa,O(e(o)("job.DCJOB_DELETEMODAL_CONTAINSDUPLICATERESULTS")),1),t("div",Qa,[r(e(pe),{modelValue:u.containsDupes,"onUpdate:modelValue":h[5]||(h[5]=M=>u.containsDupes=M),options:k},null,8,["modelValue"])])]),t("div",Ka,[t("div",za,O(e(o)("job.DCJOB_DELETEMODAL_JOBSSELECTEDFORDELETION")),1),t("div",Xa,[r(e($e),{type:"warning",label:Q.value},null,8,["label"]),m.value?(a(),b("span",qa,[r(e(Xe),{variant:"primary"})])):c("",!0)])])])]),footerContent:I(()=>[t("div",Ya,[t("div",Za,[r(e(x),{label:e(o)("buttons.DCJOB_DELETEMODAL_CANCEL"),onClick:P.closeFunction},null,8,["label","onClick"])]),r(e(x),{type:"danger",label:e(o)("buttons.DCJOB_DELETEMODAL_DELETE"),disabled:G.value===0,onClick:h[6]||(h[6]=M=>z.value=!0)},null,8,["label","disabled"])])]),_:1},8,["close-function"])),z.value?(a(),U(lt,{key:1,title:e(o)("buttons.DCJOB_DELETEMODAL_DELETEJOBS"),"confirm-callback":J,loading:T.value,"cancel-button-label":e(o)("buttons.DCJOB_DELETEMODAL_CANCEL"),"confirm-button-label":e(o)("buttons.DCJOB_DELETEMODAL_DELETE"),message:e(o)("job.delete.DCJOB_DELETEMODAL_DELETEJOBSMESSAGE",[`${W.value}`]),"close-function":()=>z.value=!1},null,8,["title","loading","cancel-button-label","confirm-button-label","message","close-function"])):c("",!0)],64))}});const tn=ye(en,[["__scopeId","data-v-74021ba0"]]),on={xmlns:"http://www.w3.org/2000/svg",width:"52",height:"52",fill:"#fff",viewBox:"0 0 520 520"},ln=t("path",{d:"M440 25H190a47 47 0 0 0-47 47v8c0 5 3 8 8 8h227c26 0 47 21 47 47v243c0 5 3 8 8 8h7c26 0 47-21 47-47V72c0-26-21-47-47-47M330 135H80a47 47 0 0 0-47 47v266c0 26 21 47 47 47h250c26 0 47-21 47-47V182a46 46 0 0 0-47-47m-20 133L190 388c-5 5-10 7-16 7-5 0-12-2-16-7l-58-58c-5-5-5-12 0-16l16-16c5-5 12-5 16 0l42 42 103-103c5-5 12-5 16 0l16 16c5 3 5 11 1 15"},null,-1),sn=[ln];function an(N,n){return a(),b("svg",on,[...sn])}const Ot={render:an},at=N=>(Ie("data-v-c7104a78"),N=N(),we(),N),nn={class:"spinnerContainer"},rn={class:"sortOptionsContainer"},un={key:0,class:"sortOptions"},cn={class:"title"},dn={class:"box"},On={class:"title"},_n={class:"box"},bn={class:"buttons"},vn={class:"button"},pn={class:"button"},En={class:"buttons"},fn={class:"button"},Cn={class:"button"},Dn={class:"button"},mn={key:1,class:"skeletonContainer"},hn=at(()=>t("div",{class:"item"},null,-1)),An=at(()=>t("div",{class:"item"},null,-1)),Tn=[hn,An],Jn={key:0,class:"deleteContainer"},Rn={class:"bodyContainer"},Bn={class:"jobContainer"},jn={key:0,class:"empty"},gn={class:"noJobs"},Ln={class:"text"},Sn=at(()=>t("span",{class:"count"}," 0/0",-1)),Nn={key:0,class:"filterContainer"},yn={class:"filterCard"},Mn={class:"title"},Un={key:0,class:"cursive"},Fn={class:"filterWrapper"},$n={key:1,class:"filterActions"},Ke=10,In=Se({__name:"JobOverviewPage",setup(N){const{t:n}=Ne();Ft();const o=jt(),s=$t(),y=Et(),K=It(),k=St(),V=i([{label:n("titles.DCJOB_JOBPAGE_JOBOVERVIEW"),callback:()=>{},active:!0},{label:n("titles.DCJOB_SCHEDULEDJOBPAGE_SCHEDULEDJOB"),callback:()=>{k.push("/scheduledjoboverview")},active:!1}]),z=i({type:"",label:""}),m=i({}),T=i(!1),W=i(!1),G=i(!1),u=i(!1),j=i({}),J={Started__c:n("job.sortOptions.DCJOB_JOBPAGE_DATETIMESTARTED"),Ended__c:n("job.sortOptions.DCJOB_JOBPAGE_DATETIMEFINISHED"),groupCounter__c:n("job.sortOptions.DCJOB_JOBPAGE_NUMBEROFDUPLICATEGROUPS"),duplicateCount__c:n("job.sortOptions.DCJOB_JOBPAGE_NUMBEROFDUPLICATEPAIRS"),processedRecords__c:n("job.sortOptions.DCJOB_JOBPAGE_NUMBEROFDUPLICATERECORDSINVOLVED"),avgScore__c:n("metaData.DCJOB_JOBPAGE_AVERAGESCORE"),LastDuplicateAdded__c:n("job.sortOptions.DCJOB_JOBPAGE_LASTDUPLICATEADDED")};let w={};const Q=i({sortBy:"Started__c",sortOrder:"DESC"}),h=ct("dc-job-overview-sort",{sortBy:"Started__c",sortOrder:"DESC"},{mergeDefaults:!0}),M=i(!1);async function Y(){w=Q.value,h.value=w,M.value=!1,se.value=1,await ie()}async function oe(){const L=Array.from(q.value);try{await B.deleteSelectedJobs(L)}catch(S){Oe("error",S?.message)}_(),ie()}async function ce(L){j.value=L,G.value=!0}async function ee(){G.value=!1;try{await B.deleteJob(j.value.jobId)}catch(L){Oe("error",L?.message)}j.value={},ie()}function re(){G.value=!1,j.value={}}function Oe(L,S){z.value={type:L,label:S},be.value=!0}const X=i({avgScore__c:{label:n("metaData.DCJOB_JOBPAGE_AVERAGESCORE"),fieldType:"NUMBER"},OwnerId:{label:n("filter.jobFilterFields.DCJOB_JOBPAGE_STARTEDBYUSER"),fieldType:"REFERENCE",options:async L=>await B.getUsersByQuery(L)},Started__c:{label:n("job.sortOptions.DCJOB_JOBPAGE_DATETIMESTARTED"),fieldType:"DATE",operators:["LATER_EQUAL","EARLIER_EQUAL","BETWEEN"]},Ended__c:{label:n("job.sortOptions.DCJOB_JOBPAGE_DATETIMEFINISHED"),fieldType:"DATE",operators:["LATER_EQUAL","EARLIER_EQUAL","BETWEEN"]},Id:{label:n("job.DCJOB_JOBPAGE_JOBID"),fieldType:"TEXT"},apex__c:{label:n("DCJOB_JOBPAGE_APEXJOBID"),fieldType:"TEXT"},sourceObject__c:{label:n("general.DCJOB_JOBPAGE_OBJECT"),fieldType:"COMBOBOX",operators:["EQUAL","NOT_EQUAL"],options:{}},recordCount__c:{label:n("job.DCJOB_JOBPAGE_NUMBEROFRECORDS"),fieldType:"NUMBER"},groupCounter__c:{label:n("job.sortOptions.DCJOB_JOBPAGE_NUMBEROFDUPLICATEGROUPS"),fieldType:"NUMBER"},duplicateCount__c:{label:n("job.sortOptions.DCJOB_JOBPAGE_NUMBEROFDUPLICATEPAIRS"),fieldType:"NUMBER"},MERGE:{label:n("filter.jobFilterFields.DCJOB_JOBPAGE_CONTAINSAUTOMERGE"),fieldType:"BOOLEAN"},CONVERT:{label:n("filter.jobFilterFields.DCJOB_JOBPAGE_CONSTAINSAUTOCONVERT"),fieldType:"BOOLEAN"},name__c:{label:n("job.DCJOB_JOBPAGE_JOBNAME"),fieldType:"TEXT"},status__c:{label:n("job.DCJOB_JOBPAGE_STATUS"),fieldType:"COMBOBOX",operators:["EQUAL","NOT_EQUAL"]},type__c:{label:n("DCJOB_FILTER_JOBTYPE"),fieldType:"COMBOBOX",operators:["EQUAL","NOT_EQUAL"]}}),ne=i(null),de=i(null),le=ct("dc-job-overview-filter",{filterLines:[],filterLogic:""},{mergeDefaults:!0}),A=i({filterLines:[],filterLogic:""}),f=i({filterLines:[],filterLogic:""}),g=i(!1),be=i(!1),Te=()=>{f.value=JSON.parse(JSON.stringify(A.value)),le.value=f.value,g.value=!1,Oe("success",n("filter.DCJOB_JOBPAGE_FILTERSAVED")),ie(!0)},q=i(new Set),me=i(0),ge=H(()=>Object.keys(E.value).length===0),se=i(1),Je={search:n("DCJOB_FILTER_DUPCHECKJOB"),"search-ext":n("DCJOB_FILTER_DUPCHECKLOCAL"),delta:n("DCJOB_FILTER_UNIQUEBULKAPIINSERT"),web2lead:n("DCJOB_FILTER_WEBTOLEAD"),setformerge:n("DCJOB_FILTER_SETFORMERGE"),deltasingle:n("DCJOB_FILTER_SINGLEAPIINSERT"),flow:n("DCJOB_FILTER_FLOW")},D={Aborted:n("DCJOB_FILTER_ABORTED"),Failed:n("DCJOB_FILTER_FAILED"),Holding:n("DCJOB_FILTER_HOLDING"),Processing:n("DCJOB_FILTER_PROCESSING"),Completed:n("DCJOB_FILTER_COMPLETED")},v={ASC:n("job.sortOptions.DCJOB_JOBPAGE_ASCENDING"),DESC:n("job.sortOptions.DCJOB_JOBPAGE_DESCENDING")},E=i({}),ae=i(0),_e=H(()=>Ke<ae.value?Math.ceil(ae.value/Ke):1),ue=i({});async function ie(L=!1){me.value+=1,L&&(se.value=1);const S={orderBy:w.sortBy,sorting:w.sortOrder,pageNumber:se.value-1,pageSize:Ke,filter:{filters:p(f.value.filterLines),filterLogic:f.value.filterLogic},filterOnObject:ne.value,objectFilterOperator:de.value};try{K.setJobFilters(S);const F=await K.getJobs(S);ae.value=F.totalJobs,E.value=F.jobList,ue.value=await B.getJobMeta()}catch(F){console.error(F)}finally{Object.keys(E.value).length===0&&(se.value=se.value-1===0?1:se.value--),s.updateMetadata(),me.value-=1}}const Me=async()=>{Q.value=h.value,w=Q.value,f.value=le.value,A.value=JSON.parse(JSON.stringify(f.value))};We(async()=>{const L=new Date().getTime();m.value=await y.getLicense();const S=await B.getConfiguredObjectPicklistValues();Me(),X.value.sourceObject__c.options=()=>S,X.value.type__c.options=()=>Je,X.value.status__c.options=()=>D,w=Q.value,await ie(),o.recordEvent("DC Job - Loaded",{load_time:new Date().getTime()-L,component_title:"Job Overview",number_of_jobs:K.totalJobs,dc_job_beta:!0}),o.persist(),setInterval(async()=>{await ie()},5e3)});const Ue=()=>{M.value=!M.value,o.recordEvent("DC Job - Sort Jobs Button clicked",{}),o.persist()},ke=()=>{W.value=!0,o.recordEvent("DC Job - Delete Jobs Button clicked",{}),o.persist()},Pe=()=>{g.value=!g.value,o.recordEvent("DC Job - Filter Button Clicked",{}),o.persist()},Be=()=>{T.value=!0,o.recordEvent("DC Job - New Job Button Clicked",{}),o.persist()},p=L=>{const S=L.find(F=>F.fieldApiName==="sourceObject__c");return S?(ne.value=S.values[0],de.value=S.operator,L=L.filter(F=>F.fieldApiName!=="sourceObject__c")):(ne.value=null,de.value=null),L},d=()=>{Object.keys(E.value).forEach(L=>{q.value.add(L)})},_=()=>{q.value.clear(),u.value=!1};async function he(){}const Ee=L=>{L.delete?q.value.add(L.jobId):q.value.delete(L.jobId)},Ge=H(()=>{const L=ue.value;return L?L.totalJobs:0}),et=H(()=>{const L=ue.value;return[{label:n("metaData.DCJOB_JOBPAGE_TOTALJOBS"),value:`${L?.totalJobs}`},{label:n("metaData.DCJOB_JOBPAGE_AVERAGESCORE"),value:L?.averageScore,format:S=>`${S}%`},{label:n("metaData.DCJOB_JOBPAGE_TOTALGROUPS"),value:`${L?.totalGroups}`},{label:n("metaData.DCJOB_JOBPAGE_TOTALPAIRS"),value:`${L?.totalPairs}`},{label:n("metaData.DCJOB_JOBPAGE_TOTALRECORDS"),value:`${L?.totalRecords}`},{label:n("metaData.DCJOB_JOBPAGE_STORAGESPACETAKEN"),value:L?.storageSpace,format:S=>{if(S<1e3)return`${S} KB`;const F=S/1e3;return`${S%1e3===0?F:F.toFixed(1)} MB`}}]});return Ce(f,async L=>{L?.filterLines.length&&await ie(!0)}),Ce(se,async()=>{se.value<=0&&(se.value=1),_(),await ie()}),Ce(ae,async()=>{se.value>_e.value&&(se.value=_e.value)}),(L,S)=>(a(),b("div",{class:"jobOverviewPage",onKeyup:S[7]||(S[7]=Lt(F=>T.value=!1,["esc"])),onScroll:he},[r(Gt,{title:e(n)("titles.DCJOB_JOBPAGE_JOBOVERVIEW"),"sub-title":"Duplicate Check",options:V.value,"dropdown-header":e(n)("titles.DCJOB_JOBPAGE_LISTVIEWS")},gt({buttons:I(()=>[Nt(t("div",nn,[r(e(Xe),{size:"medium",variant:"primary"})],512),[[yt,me.value>0]]),t("div",rn,[r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_SORTJOBS"),icon:"slds-icon-sort","icon-color":"#747474",onClick:Ue},null,8,["label"]),M.value?(a(),b("div",un,[t("span",cn,O(e(n)("job.sortOptions.DCJOB_JOBPAGE_SORTBY")),1),t("div",dn,[r(e(pe),{modelValue:Q.value.sortBy,"onUpdate:modelValue":S[0]||(S[0]=F=>Q.value.sortBy=F),options:J},null,8,["modelValue"])]),t("span",On,O(e(n)("job.sortOptions.DCJOB_JOBPAGE_ORDER")),1),t("div",_n,[r(e(pe),{modelValue:Q.value.sortOrder,"onUpdate:modelValue":S[1]||(S[1]=F=>Q.value.sortOrder=F),options:v},null,8,["modelValue"])]),t("div",bn,[t("div",vn,[r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_CANCEL"),onClick:S[2]||(S[2]=F=>M.value=!M.value)},null,8,["label"])]),t("div",pn,[r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_SAVE"),type:"primary",onClick:Y},null,8,["label"])])])])):c("",!0)]),t("div",En,[t("span",fn,[r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_DELETEJOBS"),icon:"slds-icon-delete","icon-color":"#747474",onClick:ke},null,8,["label"])]),t("span",Cn,[r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_FILTER"),type:f.value.filterLines.length>0||g.value?"primary":"regular",icon:"slds-icon-filterList","icon-color":f.value.filterLines.length>0||g.value?"#fff":"#747474",onClick:Pe},null,8,["label","type","icon-color"])]),t("span",Dn,[r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_NEWJOB"),icon:"slds-icon-new","icon-color":"#747474",onClick:Be},null,8,["label"])])])]),_:2},[ue.value?{name:"metaContent",fn:I(()=>[(a(!0),b(Z,null,Re(et.value,(F,Fe)=>(a(),b("div",{key:Fe,class:"summaryContainer"},[ue.value&&Object.keys(ue.value).length?(a(),U(e(qe),{key:0,label:F.label,value:F.value,format:F.format},null,8,["label","value","format"])):c("",!0),ue.value&&!Object.keys(ue.value).length?(a(),b("div",mn,Tn)):c("",!0)]))),128))]),key:"0"}:void 0]),1032,["title","options","dropdown-header"]),q.value.size>0?(a(),b("div",Jn,[r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_DELETESELECTEDJOBS"),icon:"slds-icon-delete","icon-color":"#747474",onClick:S[3]||(S[3]=F=>u.value=!0)},null,8,["label"]),q.value.size!==Object.keys(E.value).length?(a(),U(e(x),{key:0,label:e(n)("buttons.DCJOB_JOBPAGE_SELECTALL"),onClick:d},{icon:I(()=>[r(e(De),null,{default:I(F=>[r(e(Ot),{class:"left"})]),_:1})]),_:1},8,["label"])):c("",!0),q.value.size===Object.keys(E.value).length?(a(),U(e(x),{key:1,label:e(n)("buttons.DCJOB_JOBPAGE_DESELECTALL"),icon:"slds-icon-multi_select_checkbox",onClick:_},{icon:I(()=>[r(e(De),null,{default:I(F=>[r(e(Ot),{class:"left"})]),_:1})]),_:1},8,["label"])):c("",!0),r(e($e),{label:e(n)("badges.DCJOB_JOBCARD_DELETESELECTED",q.value.size,{count:q.value.size})},null,8,["label"])])):c("",!0),t("div",Rn,[t("div",Bn,[ge.value?(a(),b("div",jn,[r(Vt),t("div",gn,[t("span",Ln,O(e(n)("job.DCJOB_JOBPAGE_NOJOBS")),1),Sn])])):c("",!0),(a(!0),b(Z,null,Re(E.value,(F,Fe)=>(a(),b("div",{key:Fe,class:"job"},[r(ma,{license:m.value,job:F,"marked-for-deletion":q.value.has(Fe),onRefresh:ie,onDelete:ce,onMarkForDeletion:Ee},null,8,["license","job","marked-for-deletion"])]))),128)),1<_e.value?(a(),U(wt,{key:1,modelValue:se.value,"onUpdate:modelValue":S[4]||(S[4]=F=>se.value=F),"jobs-per-page":Ke,"job-number":ae.value},null,8,["modelValue","job-number"])):c("",!0)]),g.value?(a(),b("div",Nn,[t("div",yn,[t("span",Mn,O(e(n)("filter.DCJOB_JOBPAGE_FILTERJOBS")),1),f.value.filterLines.length===0?(a(),b("span",Un,O(e(n)("filter.DCJOB_JOBPAGE_NOFILTERAPPLIED")),1)):c("",!0),t("div",Fn,[r(e(Mt),{modelValue:A.value,"onUpdate:modelValue":S[5]||(S[5]=F=>A.value=F),"hide-filter-logic":!0,fields:X.value,direction:"west","add-filter-label":e(n)("filter.addFilterlineLabel"),"new-filter-placeholder":e(n)("filter.newFilterlinePlaceholder"),"field-label":e(n)("filter.fieldLabel"),"field-placeholder":e(n)("filter.fieldPlaceholder"),"field-placeholder-search":e(n)("filter.fieldPlaceholderSearch"),"operator-label":e(n)("filter.operatorLabel"),"empty-value-label":e(n)("filter.emptyValueLabel"),"add-filter-logic-label":e(n)("filter.addFilterLogicLabel"),"remove-filter-logic-label":e(n)("filter.removeFilterLogicLabel"),"done-label":e(n)("filter.doneButton")},{filterLogicValidationError:I(({error:F})=>[Le(O(e(kt)(e(n),F)),1)]),_:1},8,["modelValue","fields","add-filter-label","new-filter-placeholder","field-label","field-placeholder","field-placeholder-search","operator-label","empty-value-label","add-filter-logic-label","remove-filter-logic-label","done-label"])]),A.value.filterLines.length>0||f.value.filterLines.length>0?(a(),b("div",$n,[r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_CANCEL"),onClick:S[6]||(S[6]=F=>g.value=!1)},null,8,["label"]),r(e(x),{label:e(n)("buttons.DCJOB_JOBPAGE_SAVE"),type:"primary",onClick:Te},null,8,["label"])])):c("",!0)])])):c("",!0)]),T.value?(a(),U(Pt,{key:1,"close-function":()=>T.value=!1,onRefresh:ie},null,8,["close-function"])):c("",!0),W.value?(a(),U(tn,{key:2,"close-function":()=>W.value=!1,"total-jobs":Ge.value,"storage-space":ue.value?.storageSpace??0,onToast:Oe,onRefresh:ie},null,8,["close-function","total-jobs","storage-space"])):c("",!0),u.value?(a(),U(lt,{key:3,"confirm-callback":oe,"confirm-button-label":e(n)("buttons.DCJOB_JOBCARD_DELETE"),"cancel-button-label":e(n)("buttons.DCJOB_JOBCARD_CANCEL"),"close-function":()=>u.value=!1,title:`${e(n)("job.deleteAll.DCJOB_DELETESELECTED_TITLE")}`,message:`${e(n)("job.deleteAll.DCJOB_DELETESELECTED_MESSAGE",{count:q.value.size})}`},null,8,["confirm-button-label","cancel-button-label","close-function","title","message"])):c("",!0),G.value?(a(),U(lt,{key:4,"confirm-callback":ee,"confirm-button-label":e(n)("buttons.DCJOB_JOBCARD_DELETE"),"cancel-button-label":e(n)("buttons.DCJOB_JOBCARD_CANCEL"),"close-function":re,title:`${e(n)("buttons.DCJOB_JOBCARD_DELETE")} ${j.value.jobName}`,message:`${e(n)("job.delete.DCJOB_JOBCARD_DELETEMESSAGE",[j.value.jobName])} ${e(n)("job.delete.DCJOB_JOBCARD_DELETEUNDONE",[e(n)("job.DCJOB_JOBCARD_JOBS")])}`},null,8,["confirm-button-label","cancel-button-label","title","message"])):c("",!0),be.value?(a(),U(e(vt),{key:5,"close-function":()=>be.value=!1,"toast-type":z.value.type,label:z.value.label,"auto-close-timer":z.value.type==="error"?5e3:1500},null,8,["close-function","toast-type","label","auto-close-timer"])):c("",!0)],32))}});const xn=ye(In,[["__scopeId","data-v-c7104a78"]]);export{xn as default};
