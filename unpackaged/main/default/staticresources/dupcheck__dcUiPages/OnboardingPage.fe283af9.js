import{h as B,c as X,m as l,q as t,F as T,y as U,A as a,C as D,z as m,v as p,u as r,B as w,x as R,_ as $,r as v,o as z,V as Y,N as Q,aq as _,j as Z,D as ee,k as oe,ae as P,ar as L,w as V,ag as te,as as ae,S as se,a2 as J,I as ne}from"./index.js";import{d as S}from"./dcJobService.b3701bc0.js";const le={class:"progressContainer"},ce={class:"progressList"},ie=["onClick"],re={class:"progressItem"},ue=["title"],de={key:1,class:"completed"},_e=B({__name:"VerticalProgressIndicator",props:{steps:{}},emits:["update:steps"],setup(s,{emit:n}){const N=n,O=s,u=async o=>{o.completed=!0,await o.clickFunction()},d=X({get(){return O.steps},set(o){N("update:steps",o)}});return(o,b)=>(a(),l("div",le,[t("ol",ce,[(a(!0),l(T,null,U(d.value,(c,y)=>(a(),l("li",{key:y,onClick:g=>u(c)},[t("div",re,[!c.completed||c.completed&&c.active?(a(),l("button",{key:0,class:D(["progressMarker",{active:c.active}]),title:c.label},null,10,ue)):m("",!0),c.completed&&!c.active?(a(),l("div",de,[p(r(w),{name:"slds-icon-success",color:"#2e844a",size:16,title:c.label},null,8,["title"])])):m("",!0)]),t("div",{class:D(["label",{active:c.active}])},R(c.label),3)],8,ie))),128))])]))}});const ve=$(_e,[["__scopeId","data-v-54afa82e"]]),pe={class:"icon"},be={class:"textContainer"},me={class:"title"},Ne={class:"subTitle"},ge={class:"close"},fe=B({__name:"NotificationPopup",props:{title:{},subTitle:{},iconName:{},closeFunction:{},onClickFunction:{},autoCloseTimer:{default:3e3},sticky:{type:Boolean,default:!1}},setup(s){const n=s,N=v(!1);z(()=>{!n.autoCloseTimer||n.sticky||setTimeout(()=>{N.value||O()},n.autoCloseTimer)});const O=()=>{N.value=!0,setTimeout(()=>n.closeFunction(),200)};return(u,d)=>(a(),l("div",{class:D(["notificationContainer show",{hide:N.value}]),onClick:d[0]||(d[0]=(...o)=>u.onClickFunction&&u.onClickFunction(...o))},[t("div",pe,[p(Y,{"icon-name":u.iconName,"icon-size":20},null,8,["icon-name"])]),t("div",be,[t("span",me,R(u.title),1),t("span",Ne,R(u.subTitle),1)]),t("div",ge,[p(r(w),{name:"slds-icon-close",size:20,onClick:Q(u.closeFunction,["stop"])},null,8,["onClick"])])],2))}});const Oe=$(fe,[["__scopeId","data-v-32b4c62b"]]),he=s=>Object.freeze([{label:`1. ${s("ONBOARDING_THANK_YOU_FOR_INSTALLING")}`,value:_.intro},{label:`2. ${s("ONBOARDING_RUNNING_A_DC_JOB")}`,value:_.runningJob},{label:`3. ${s("ONBOARDING_SETUP_DUPLICATE_PREVENTION")}`,value:_.setupPrevention},{label:`4. ${s("ONBOARDING_LEARN_ABOUT_DCLIVE")}`,value:_.dcLive},{label:`5. ${s("ONBOARDING_HOW_TO_CONFIGURE_DC")}`,value:_.configureDc},{label:`6. ${s("ONBOARDING_OPTIONS_FOR_AUTOMATION")}`,value:_.automation},{label:`7. ${s("ONBOARDING_INTEGRATION")}`,value:_.integration},{label:`8. ${s("ONBOARDING_CUSTOMISATION")}`,value:_.customisation},{label:`9. ${s("ONBOARDING_GET_STARTED")}`,value:_.getStarted}]),Ie={class:"basePage"},Ce={class:"dialog"},Ae={key:0,class:"close"},ke={class:"bodyContainer"},Te={key:0,class:"spinnerContainer"},Re={class:"sidebar"},ye={class:"header"},Se={class:"progress"},De={class:"content"},Be={key:1,class:"footer"},we={key:0,class:"back"},$e={class:"notifications"},Ge=4e3,Ee=B({__name:"OnboardingPage",setup(s){const{t:n}=Z(),N=te(),O=new ee,u=oe(),d=v({lead:{objectApiName:"",objectLabel:"",show:!1},contact:{objectApiName:"",objectLabel:"",show:!1},account:{objectApiName:"",objectLabel:"",show:!1}}),o=v(0),b=v([0]),c=P("dc-onboarding-progress",o,{mergeDefaults:!0}),y=P("dc-onboarding-completion",b,{mergeDefaults:!0}),g=he(n),I=v(null),G=v(),E=v(!1),C=v([]),f=v(!0);z(async()=>{b.value=y.value,o.value=c.value,C.value=g.map((e,i)=>({label:e.label,value:e.value,active:i===o.value,completed:b.value&&b.value.includes(i),clickFunction:()=>{o.value=i,F(i)}})),f.value=!0;try{await S.startInitialOnboardingJob()}catch(e){console.error(e)}await L.setAsRead(),I.value=await S.getInitialOnboardingJob(),E.value=!0,f.value=!1,A(),G.value=setInterval(async()=>{I.value=await S.getInitialOnboardingJob()},Ge),u.recordEvent("DC Onboarding - Loaded",{invoked_from:""}),u.persist()});const M=e=>{d.value[e.objectApiName]=e},H=e=>{d.value[e].show=!1},q=e=>{O.navigate("lightning/n/dupcheck__dcBatch"),d.value[e].show=!1},j=async()=>{await L.setAsRead();const e="/lightning/n/dupcheck__dc3Setup",i=window.location.href;window.history.go(-1),setTimeout(function(){window.location.href==i&&(window.location.href=e)},500)},F=e=>{b.value&&!b.value.includes(e)&&b.value.push(e)};V(o,e=>{C.value=C.value.map((i,k)=>(i.active=k===o.value,i.completed=i.completed?i.completed:k===o.value,{...i})),F(o.value),A(),0>e||g.length-1});const A=()=>{const e=g[o.value].value;N.push({name:e})},K=()=>{o.value!==0&&(o.value--,A())},W=()=>{if(o.value===g.length-1){j();return}o.value++,A()};return V(I,e=>{e?.jobData?.status==="Completed"&&clearInterval(G.value)},{deep:!0}),(e,i)=>{const k=ae("router-view");return a(),l(T,null,[t("div",Ie,[t("div",Ce,[f.value?m("",!0):(a(),l("div",Ae,[p(r(w),{name:"slds-icon-close",size:24,color:"#fff",onClick:j})])),t("div",ke,[f.value?(a(),l("div",Te,[p(r(se),{size:"large",variant:"primary"})])):m("",!0),f.value?m("",!0):(a(),l(T,{key:1},[t("div",Re,[t("div",ye,[t("span",null,R(r(n)("ONBOARDING_GETTING_STARTED")),1)]),t("div",Se,[p(ve,{steps:C.value},null,8,["steps"])])]),t("div",De,[p(k,{"on-boarding-job":I.value,"onboarding-job-fetched":E.value,onShowNotification:M},null,8,["on-boarding-job","onboarding-job-fetched"])])],64))]),f.value?m("",!0):(a(),l("div",Be,[o.value!==0?(a(),l("div",we,[p(r(J),{label:r(n)("ONBOARDING_BACK"),type:"regular",onClick:K},null,8,["label"])])):m("",!0),p(r(J),{label:o.value===r(g).length-1?r(n)("ONBOARDING_FINISH"):r(n)("ONBOARDING_NEXT"),type:"primary",onClick:W},null,8,["label"])]))])]),t("div",$e,[(a(!0),l(T,null,U(d.value,(h,x)=>(a(),l("div",{key:x,class:"notificationContainer"},[h.show?(a(),ne(Oe,{key:0,sticky:!0,title:r(n)("ONBOARDING_NOTIFICATION_JOB_STARTED",[h.objectLabel]),"sub-title":r(n)("ONBOARDING_NOTIFICATION_VIEW_PROGRESS"),"close-function":()=>H(h.objectApiName),"on-click-function":()=>q(h.objectApiName),"icon-name":`slds-icon-${h.objectApiName}`},null,8,["title","sub-title","close-function","on-click-function","icon-name"])):m("",!0)]))),128))])],64)}}});const Pe=$(Ee,[["__scopeId","data-v-0607e603"]]);export{Pe as default};
