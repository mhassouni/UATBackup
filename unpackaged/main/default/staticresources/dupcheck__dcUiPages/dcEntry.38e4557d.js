var Nn=Object.defineProperty;var Sn=(e,t,a)=>t in e?Nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Le=(e,t,a)=>(Sn(e,typeof t!="symbol"?t+"":t,a),a);import{r as R,a as ht,c as I,u as s,n as Ae,o as we,i as ze,w as U,t as M,b as Ze,d as Tn,s as On,p as ya,e as Rn,f as Xe,g as $t,h as J,j as fe,k as gt,l as Ba,m as N,q as A,v as j,x as K,F as re,y as Oe,z as H,A as _,B as $e,C as Q,D as at,E as Ya,G as oa,H as sa,I as ne,J as xt,Q as Et,K as Ha,L as Cn,M as Je,N as Ge,_ as lt,O as It,T as Wa,P as An,R as Vn,S as wn,U as Ka,V as Na,W as ia,X as kn,Y as xn,Z as Pt,$ as Se,a0 as Dn,a1 as jn,a2 as Xt,a3 as Fn}from"./index.js";import{c as Ln,a as $n,b as Pn,d as Un}from"./dcHelper.d839f820.js";import"./dcJobService.b3701bc0.js";/**
  * vee-validate v4.13.2
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Ie(e){return typeof e=="function"}function za(e){return e==null}const nt=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function ha(e){return Number(e)>=0}function Mn(e){const t=parseFloat(e);return isNaN(t)?e:t}function Bn(e){return typeof e=="object"&&e!==null}function Yn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function Sa(e){if(!Bn(e)||Yn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function bt(e,t){return Object.keys(t).forEach(a=>{if(Sa(t[a])&&Sa(e[a])){e[a]||(e[a]={}),bt(e[a],t[a]);return}e[a]=t[a]}),e}function pt(e){const t=e.split(".");if(!t.length)return"";let a=String(t[0]);for(let n=1;n<t.length;n++){if(ha(t[n])){a+=`[${t[n]}]`;continue}a+=`.${t[n]}`}return a}const Hn={};function Wn(e){return Hn[e]}function Ta(e,t,a){typeof a.value=="object"&&(a.value=X(a.value)),!a.enumerable||a.get||a.set||!a.configurable||!a.writable||t==="__proto__"?Object.defineProperty(e,t,a):e[t]=a.value}function X(e){if(typeof e!="object")return e;var t=0,a,n,l,r=Object.prototype.toString.call(e);if(r==="[object Object]"?l=Object.create(e.__proto__||null):r==="[object Array]"?l=Array(e.length):r==="[object Set]"?(l=new Set,e.forEach(function(c){l.add(X(c))})):r==="[object Map]"?(l=new Map,e.forEach(function(c,o){l.set(X(o),X(c))})):r==="[object Date]"?l=new Date(+e):r==="[object RegExp]"?l=new RegExp(e.source,e.flags):r==="[object DataView]"?l=new e.constructor(X(e.buffer)):r==="[object ArrayBuffer]"?l=e.slice(0):r.slice(-6)==="Array]"&&(l=new e.constructor(e)),l){for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)Ta(l,n[t],Object.getOwnPropertyDescriptor(e,n[t]));for(t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++)Object.hasOwnProperty.call(l,a=n[t])&&l[a]===e[a]||Ta(l,a,Object.getOwnPropertyDescriptor(e,a))}return l||e}const rt=Symbol("vee-validate-form"),Kn=Symbol("vee-validate-field-instance"),Oa=Symbol("Default empty value"),zn=typeof window<"u";function ua(e){return Ie(e)&&!!e.__locatorRef}function xe(e){return!!e&&Ie(e.parse)&&e.__type==="VVTypedSchema"}function Dt(e){return!!e&&Ie(e.validate)}function Ga(e){return e==="checkbox"||e==="radio"}function Gn(e){return nt(e)||Array.isArray(e)}function qn(e){return Array.isArray(e)?e.length===0:nt(e)&&Object.keys(e).length===0}function Ut(e){return/^\[.+\]$/i.test(e)}function Jn(e){return qa(e)&&e.multiple}function qa(e){return e.tagName==="SELECT"}function Xn(e){return Ja(e)&&e.target&&"submit"in e.target}function Ja(e){return e?!!(typeof Event<"u"&&Ie(Event)&&e instanceof Event||e&&e.srcElement):!1}function ye(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var a,n,l;if(Array.isArray(e)){if(a=e.length,a!=t.length)return!1;for(n=a;n--!==0;)if(!ye(e[n],t[n]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(n of e.entries())if(!t.has(n[0]))return!1;for(n of e.entries())if(!ye(n[1],t.get(n[0])))return!1;return!0}if(Ra(e)&&Ra(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(n of e.entries())if(!t.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(a=e.length,a!=t.length)return!1;for(n=a;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(l=Object.keys(e),a=l.length,n=a;n--!==0;){var r=l[n];if(!ye(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function Ra(e){return zn?e instanceof File:!1}function ba(e){return Ut(e)?e.replace(/\[|\]/gi,""):e}function Ne(e,t,a){return e?Ut(t)?e[ba(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((l,r)=>Gn(l)&&r in l?l[r]:a,e):a}function We(e,t,a){if(Ut(t)){e[ba(t)]=a;return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let r=0;r<n.length;r++){if(r===n.length-1){l[n[r]]=a;return}(!(n[r]in l)||za(l[n[r]]))&&(l[n[r]]=ha(n[r+1])?[]:{}),l=l[n[r]]}}function Qt(e,t){if(Array.isArray(e)&&ha(t)){e.splice(Number(t),1);return}nt(e)&&delete e[t]}function Ca(e,t){if(Ut(t)){delete e[ba(t)];return}const a=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let r=0;r<a.length;r++){if(r===a.length-1){Qt(n,a[r]);break}if(!(a[r]in n)||za(n[a[r]]))break;n=n[a[r]]}const l=a.map((r,c)=>Ne(e,a.slice(0,c).join(".")));for(let r=l.length-1;r>=0;r--)if(!!qn(l[r])){if(r===0){Qt(e,a[0]);continue}Qt(l[r-1],a[r-1])}}function Te(e){return Object.keys(e)}function _a(e,t=void 0){const a=$t();return a?.provides[e]||Xe(e,t)}function Aa(e,t,a){if(Array.isArray(e)){const n=[...e],l=n.findIndex(r=>ye(r,t));return l>=0?n.splice(l,1):n.push(t),n}return ye(e,t)?a:t}function Va(e,t=0){let a=null,n=[];return function(...l){return a&&clearTimeout(a),a=setTimeout(()=>{const r=e(...l);n.forEach(c=>c(r)),n=[]},t),new Promise(r=>n.push(r))}}function Qn(e,t){return nt(t)&&t.number?Mn(e):e}function ca(e,t){let a;return async function(...l){const r=e(...l);a=r;const c=await r;return r!==a?c:(a=void 0,t(c,l))}}function da(e){return Array.isArray(e)?e:e?[e]:[]}function Rt(e,t){const a={};for(const n in e)t.includes(n)||(a[n]=e[n]);return a}function Zn(e){let t=null,a=[];return function(...n){const l=Ae(()=>{if(t!==l)return;const r=e(...n);a.forEach(c=>c(r)),a=[],t=null});return t=l,new Promise(r=>a.push(r))}}function Zt(e){if(Xa(e))return e._value}function Xa(e){return"_value"in e}function el(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function jt(e){if(!Ja(e))return e;const t=e.target;if(Ga(t.type)&&Xa(t))return Zt(t);if(t.type==="file"&&t.files){const a=Array.from(t.files);return t.multiple?a:a[0]}if(Jn(t))return Array.from(t.options).filter(a=>a.selected&&!a.disabled).map(Zt);if(qa(t)){const a=Array.from(t.options).find(n=>n.selected);return a?Zt(a):t.value}return el(t)}function Qa(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?nt(e)&&e._$$isNormalized?e:nt(e)?Object.keys(e).reduce((a,n)=>{const l=tl(e[n]);return e[n]!==!1&&(a[n]=wa(l)),a},t):typeof e!="string"?t:e.split("|").reduce((a,n)=>{const l=al(n);return l.name&&(a[l.name]=wa(l.params)),a},t):t}function tl(e){return e===!0?[]:Array.isArray(e)||nt(e)?e:[e]}function wa(e){const t=a=>typeof a=="string"&&a[0]==="@"?nl(a.slice(1)):a;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((a,n)=>(a[n]=t(e[n]),a),{})}const al=e=>{let t=[];const a=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:a,params:t}};function nl(e){const t=a=>Ne(a,e)||a[e];return t.__locatorRef=e,t}function ll(e){return Array.isArray(e)?e.filter(ua):Te(e).filter(t=>ua(e[t])).map(t=>e[t])}const rl={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let ol=Object.assign({},rl);const mt=()=>ol;async function Za(e,t,a={}){const n=a?.bails,l={name:a?.name||"{field}",rules:t,label:a?.label,bails:n??!0,formData:a?.values||{}},r=await sl(l,e);return Object.assign(Object.assign({},r),{valid:!r.errors.length})}async function sl(e,t){const a=e.rules;if(xe(a)||Dt(a))return ul(t,Object.assign(Object.assign({},e),{rules:a}));if(Ie(a)||Array.isArray(a)){const o={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},i=Array.isArray(a)?a:[a],u=i.length,p=[];for(let d=0;d<u;d++){const b=i[d],m=await b(t,o);if(!(typeof m!="string"&&!Array.isArray(m)&&m)){if(Array.isArray(m))p.push(...m);else{const h=typeof m=="string"?m:tn(o);p.push(h)}if(e.bails)return{errors:p}}}return{errors:p}}const n=Object.assign(Object.assign({},e),{rules:Qa(a)}),l=[],r=Object.keys(n.rules),c=r.length;for(let o=0;o<c;o++){const i=r[o],u=await cl(n,t,{name:i,params:n.rules[i]});if(u.error&&(l.push(u.error),e.bails))return{errors:l}}return{errors:l}}function il(e){return!!e&&e.name==="ValidationError"}function en(e){return{__type:"VVTypedSchema",async parse(a,n){var l;try{return{output:await e.validate(a,{abortEarly:!1,context:n?.formData||{}}),errors:[]}}catch(r){if(!il(r))throw r;if(!(!((l=r.inner)===null||l===void 0)&&l.length)&&r.errors.length)return{errors:[{path:r.path,errors:r.errors}]};const c=r.inner.reduce((o,i)=>{const u=i.path||"";return o[u]||(o[u]={errors:[],path:u}),o[u].errors.push(...i.errors),o},{});return{errors:Object.values(c)}}}}}async function ul(e,t){const n=await(xe(t.rules)?t.rules:en(t.rules)).parse(e,{formData:t.formData}),l=[];for(const r of n.errors)r.errors.length&&l.push(...r.errors);return{value:n.value,errors:l}}async function cl(e,t,a){const n=Wn(a.name);if(!n)throw new Error(`No such validator '${a.name}' exists.`);const l=dl(a.params,e.formData),r={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},a),{params:l})},c=await n(t,l,r);return typeof c=="string"?{error:c}:{error:c?void 0:tn(r)}}function tn(e){const t=mt().generateMessage;return t?t(e):"Field is invalid"}function dl(e,t){const a=n=>ua(n)?n(t):n;return Array.isArray(e)?e.map(a):Object.keys(e).reduce((n,l)=>(n[l]=a(e[l]),n),{})}async function fl(e,t){const n=await(xe(e)?e:en(e)).parse(X(t)),l={},r={};for(const c of n.errors){const o=c.errors,i=(c.path||"").replace(/\["(\d+)"\]/g,(u,p)=>`[${p}]`);l[i]={valid:!o.length,errors:o},o.length&&(r[i]=o[0])}return{valid:!n.errors.length,results:l,errors:r,values:n.value,source:"schema"}}async function vl(e,t,a){const l=Te(e).map(async u=>{var p,d,b;const m=(p=a?.names)===null||p===void 0?void 0:p[u],y=await Za(Ne(t,u),e[u],{name:m?.name||u,label:m?.label,values:t,bails:(b=(d=a?.bailsMap)===null||d===void 0?void 0:d[u])!==null&&b!==void 0?b:!0});return Object.assign(Object.assign({},y),{path:u})});let r=!0;const c=await Promise.all(l),o={},i={};for(const u of c)o[u.path]={valid:u.valid,errors:u.errors},u.valid||(r=!1,i[u.path]=u.errors[0]);return{valid:r,results:o,errors:i,source:"schema"}}let ka=0;function pl(e,t){const{value:a,initialValue:n,setInitialValue:l}=ml(e,t.modelValue,t.form);if(!t.form){let b=function(m){var y;"value"in m&&(a.value=m.value),"errors"in m&&u(m.errors),"touched"in m&&(d.touched=(y=m.touched)!==null&&y!==void 0?y:d.touched),"initialValue"in m&&l(m.initialValue)};const{errors:i,setErrors:u}=bl(),p=ka>=Number.MAX_SAFE_INTEGER?0:++ka,d=hl(a,n,i,t.schema);return{id:p,path:e,value:a,initialValue:n,meta:d,flags:{pendingUnmount:{[p]:!1},pendingReset:!1},errors:i,setState:b}}const r=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),c=I(()=>r.errors);function o(i){var u,p,d;"value"in i&&(a.value=i.value),"errors"in i&&((u=t.form)===null||u===void 0||u.setFieldError(s(e),i.errors)),"touched"in i&&((p=t.form)===null||p===void 0||p.setFieldTouched(s(e),(d=i.touched)!==null&&d!==void 0?d:!1)),"initialValue"in i&&l(i.initialValue)}return{id:Array.isArray(r.id)?r.id[r.id.length-1]:r.id,path:e,value:a,errors:c,meta:r,initialValue:n,flags:r.__flags,setState:o}}function ml(e,t,a){const n=R(s(t));function l(){return a?Ne(a.initialValues.value,s(e),s(n)):s(n)}function r(u){if(!a){n.value=u;return}a.setFieldInitialValue(s(e),u,!0)}const c=I(l);if(!a)return{value:R(l()),initialValue:c,setInitialValue:r};const o=yl(t,a,c,e);return a.stageInitialValue(s(e),o,!0),{value:I({get(){return Ne(a.values,s(e))},set(u){a.setFieldValue(s(e),u,!1)}}),initialValue:c,setInitialValue:r}}function yl(e,t,a,n){return ze(e)?s(e):e!==void 0?e:Ne(t.values,s(n),s(a))}function hl(e,t,a,n){const l=I(()=>{var c,o,i;return(i=(o=(c=M(n))===null||c===void 0?void 0:c.describe)===null||o===void 0?void 0:o.call(c).required)!==null&&i!==void 0?i:!1}),r=ht({touched:!1,pending:!1,valid:!0,required:l,validated:!!s(a).length,initialValue:I(()=>s(t)),dirty:I(()=>!ye(s(e),s(t)))});return U(a,c=>{r.valid=!c.length},{immediate:!0,flush:"sync"}),r}function bl(){const e=R([]);return{errors:e,setErrors:t=>{e.value=da(t)}}}function Pe(e,t,a){return Ga(a?.type)?gl(e,t,a):an(e,t,a)}function an(e,t,a){const{initialValue:n,validateOnMount:l,bails:r,type:c,checkedValue:o,label:i,validateOnValueUpdate:u,uncheckedValue:p,controlled:d,keepValueOnUnmount:b,syncVModel:m,form:y}=_l(a),h=d?_a(rt):void 0,g=y||h,S=I(()=>pt(M(e))),T=I(()=>{if(M(g?.schema))return;const x=s(t);return Dt(x)||xe(x)||Ie(x)||Array.isArray(x)?x:Qa(x)}),D=!Ie(T.value)&&xe(M(t)),{id:W,value:te,initialValue:z,meta:Y,setState:Z,errors:le,flags:L}=pl(S,{modelValue:n,form:g,bails:r,label:i,type:c,validate:T.value?ce:void 0,schema:D?t:void 0}),G=I(()=>le.value[0]);m&&El({value:te,prop:m,handleChange:ot,shouldValidate:()=>u&&!L.pendingReset});const ue=(O,x=!1)=>{Y.touched=!0,x&&he()};async function Re(O){var x,de;if(g?.validateSchema){const{results:q}=await g.validateSchema(O);return(x=q[M(S)])!==null&&x!==void 0?x:{valid:!0,errors:[]}}return T.value?Za(te.value,T.value,{name:M(S),label:M(i),values:(de=g?.values)!==null&&de!==void 0?de:{},bails:r}):{valid:!0,errors:[]}}const he=ca(async()=>(Y.pending=!0,Y.validated=!0,Re("validated-only")),O=>(L.pendingUnmount[k.id]||(Z({errors:O.errors}),Y.pending=!1,Y.valid=O.valid),O)),be=ca(async()=>Re("silent"),O=>(Y.valid=O.valid,O));function ce(O){return O?.mode==="silent"?be():he()}function ot(O,x=!0){const de=jt(O);Fe(de,x)}we(()=>{if(l)return he();(!g||!g.validateSchema)&&be()});function De(O){Y.touched=O}function je(O){var x;const de=O&&"value"in O?O.value:z.value;Z({value:X(de),initialValue:X(de),touched:(x=O?.touched)!==null&&x!==void 0?x:!1,errors:O?.errors||[]}),Y.pending=!1,Y.validated=!1,be()}const _e=$t();function Fe(O,x=!0){te.value=_e&&m?Qn(O,_e.props.modelModifiers):O,(x?he:be)()}function st(O){Z({errors:Array.isArray(O)?O:[O]})}const $=I({get(){return te.value},set(O){Fe(O,u)}}),k={id:W,name:S,label:i,value:$,meta:Y,errors:le,errorMessage:G,type:c,checkedValue:o,uncheckedValue:p,bails:r,keepValueOnUnmount:b,resetField:je,handleReset:()=>je(),validate:ce,handleChange:ot,handleBlur:ue,setState:Z,setTouched:De,setErrors:st,setValue:Fe};if(ya(Kn,k),ze(t)&&typeof s(t)!="function"&&U(t,(O,x)=>{ye(O,x)||(Y.validated?he():be())},{deep:!0}),!g)return k;const B=I(()=>{const O=T.value;return!O||Ie(O)||Dt(O)||xe(O)||Array.isArray(O)?{}:Object.keys(O).reduce((x,de)=>{const q=ll(O[de]).map(Me=>Me.__locatorRef).reduce((Me,ke)=>{const Be=Ne(g.values,ke)||g.values[ke];return Be!==void 0&&(Me[ke]=Be),Me},{});return Object.assign(x,q),x},{})});return U(B,(O,x)=>{if(!Object.keys(O).length)return;!ye(O,x)&&(Y.validated?he():be())}),Rn(()=>{var O;const x=(O=M(k.keepValueOnUnmount))!==null&&O!==void 0?O:M(g.keepValuesOnUnmount),de=M(S);if(x||!g||L.pendingUnmount[k.id]){g?.removePathState(de,W);return}L.pendingUnmount[k.id]=!0;const q=g.getPathState(de);if(!!(Array.isArray(q?.id)&&q?.multiple?q?.id.includes(k.id):q?.id===k.id)){if(q?.multiple&&Array.isArray(q.value)){const ke=q.value.findIndex(Be=>ye(Be,M(k.checkedValue)));if(ke>-1){const Be=[...q.value];Be.splice(ke,1),g.setFieldValue(de,Be)}Array.isArray(q.id)&&q.id.splice(q.id.indexOf(k.id),1)}else g.unsetPathValue(M(S));g.removePathState(de,W)}}),k}function _l(e){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),a=!!e?.syncVModel,n=typeof e?.syncVModel=="string"?e.syncVModel:e?.modelPropName||"modelValue",l=a&&!("initialValue"in(e||{}))?fa($t(),n):e?.initialValue;if(!e)return Object.assign(Object.assign({},t()),{initialValue:l});const r="valueProp"in e?e.valueProp:e.checkedValue,c="standalone"in e?!e.standalone:e.controlled,o=e?.modelPropName||e?.syncVModel||!1;return Object.assign(Object.assign(Object.assign({},t()),e||{}),{initialValue:l,controlled:c??!0,checkedValue:r,syncVModel:o})}function gl(e,t,a){const n=a?.standalone?void 0:_a(rt),l=a?.checkedValue,r=a?.uncheckedValue;function c(o){const i=o.handleChange,u=I(()=>{const d=M(o.value),b=M(l);return Array.isArray(d)?d.findIndex(m=>ye(m,b))>=0:ye(b,d)});function p(d,b=!0){var m,y;if(u.value===((m=d?.target)===null||m===void 0?void 0:m.checked)){b&&o.validate();return}const h=M(e),g=n?.getPathState(h),S=jt(d);let T=(y=M(l))!==null&&y!==void 0?y:S;n&&g?.multiple&&g.type==="checkbox"?T=Aa(Ne(n.values,h)||[],T,void 0):a?.type==="checkbox"&&(T=Aa(M(o.value),T,M(r))),i(T,b)}return Object.assign(Object.assign({},o),{checked:u,checkedValue:l,uncheckedValue:r,handleChange:p})}return c(an(e,t,a))}function El({prop:e,value:t,handleChange:a,shouldValidate:n}){const l=$t();if(!l||!e)return;const r=typeof e=="string"?e:"modelValue",c=`update:${r}`;r in l.props&&(U(t,o=>{ye(o,fa(l,r))||l.emit(c,o)}),U(()=>fa(l,r),o=>{if(o===Oa&&t.value===void 0)return;const i=o===Oa?void 0:o;ye(i,t.value)||a(i,n())}))}function fa(e,t){if(!!e)return e.props[t]}let Il=0;const Ct=["bails","fieldsCount","id","multiple","type","validate"];function nn(e){const t=e?.initialValues||{},a=Object.assign({},M(t)),n=s(e?.validationSchema);return n&&xe(n)&&Ie(n.cast)?X(n.cast(a)||{}):X(a)}function Nl(e){var t;const a=Il++;let n=0;const l=R(!1),r=R(!1),c=R(0),o=[],i=ht(nn(e)),u=R([]),p=R({}),d=R({}),b=Zn(()=>{d.value=u.value.reduce((v,f)=>(v[pt(M(f.path))]=f,v),{})});function m(v,f){const E=ce(v);if(!E){typeof v=="string"&&(p.value[pt(v)]=da(f));return}if(typeof v=="string"){const C=pt(v);p.value[C]&&delete p.value[C]}E.errors=da(f),E.valid=!E.errors.length}function y(v){Te(v).forEach(f=>{m(f,v[f])})}e?.initialErrors&&y(e.initialErrors);const h=I(()=>{const v=u.value.reduce((f,E)=>(E.errors.length&&(f[E.path]=E.errors),f),{});return Object.assign(Object.assign({},p.value),v)}),g=I(()=>Te(h.value).reduce((v,f)=>{const E=h.value[f];return E?.length&&(v[f]=E[0]),v},{})),S=I(()=>u.value.reduce((v,f)=>(v[f.path]={name:f.path||"",label:f.label||""},v),{})),T=I(()=>u.value.reduce((v,f)=>{var E;return v[f.path]=(E=f.bails)!==null&&E!==void 0?E:!0,v},{})),D=Object.assign({},e?.initialErrors||{}),W=(t=e?.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:te,originalInitialValues:z,setInitialValues:Y}=Tl(u,i,e),Z=Sl(u,i,z,g),le=I(()=>u.value.reduce((v,f)=>{const E=Ne(i,f.path);return We(v,f.path,E),v},{})),L=e?.validationSchema;function G(v,f){var E,C;const w=I(()=>Ne(te.value,M(v))),F=d.value[M(v)],V=f?.type==="checkbox"||f?.type==="radio";if(F&&V){F.multiple=!0;const Ce=n++;return Array.isArray(F.id)?F.id.push(Ce):F.id=[F.id,Ce],F.fieldsCount++,F.__flags.pendingUnmount[Ce]=!1,F}const ae=I(()=>Ne(i,M(v))),se=M(v),pe=De.findIndex(Ce=>Ce===se);pe!==-1&&De.splice(pe,1);const ee=I(()=>{var Ce,dt,zt,Gt;const qt=M(L);if(xe(qt))return(dt=(Ce=qt.describe)===null||Ce===void 0?void 0:Ce.call(qt,M(v)).required)!==null&&dt!==void 0?dt:!1;const Jt=M(f?.schema);return xe(Jt)&&(Gt=(zt=Jt.describe)===null||zt===void 0?void 0:zt.call(Jt).required)!==null&&Gt!==void 0?Gt:!1}),me=n++,ge=ht({id:me,path:v,touched:!1,pending:!1,valid:!0,validated:!!(!((E=D[se])===null||E===void 0)&&E.length),required:ee,initialValue:w,errors:On([]),bails:(C=f?.bails)!==null&&C!==void 0?C:!1,label:f?.label,type:f?.type||"default",value:ae,multiple:!1,__flags:{pendingUnmount:{[me]:!1},pendingReset:!1},fieldsCount:1,validate:f?.validate,dirty:I(()=>!ye(s(ae),s(w)))});return u.value.push(ge),d.value[se]=ge,b(),g.value[se]&&!D[se]&&Ae(()=>{Qe(se,{mode:"silent"})}),ze(v)&&U(v,Ce=>{b();const dt=X(ae.value);d.value[Ce]=ge,Ae(()=>{We(i,Ce,dt)})}),ge}const ue=Va(Ia,5),Re=Va(Ia,5),he=ca(async v=>await(v==="silent"?ue():Re()),(v,[f])=>{const E=Te(O.errorBag.value),w=[...new Set([...Te(v.results),...u.value.map(F=>F.path),...E])].sort().reduce((F,V)=>{var ae;const se=V,pe=ce(se)||ot(se),ee=((ae=v.results[se])===null||ae===void 0?void 0:ae.errors)||[],me=M(pe?.path)||se,ge=Ol({errors:ee,valid:!ee.length},F.results[me]);return F.results[me]=ge,ge.valid||(F.errors[me]=ge.errors[0]),pe&&p.value[me]&&delete p.value[me],pe?(pe.valid=ge.valid,f==="silent"||f==="validated-only"&&!pe.validated||m(pe,ge.errors),F):(m(me,ee),F)},{valid:v.valid,results:{},errors:{},source:v.source});return v.values&&(w.values=v.values,w.source=v.source),Te(w.results).forEach(F=>{var V;const ae=ce(F);!ae||f!=="silent"&&(f==="validated-only"&&!ae.validated||m(ae,(V=w.results[F])===null||V===void 0?void 0:V.errors))}),w});function be(v){u.value.forEach(v)}function ce(v){const f=typeof v=="string"?pt(v):v;return typeof f=="string"?d.value[f]:f}function ot(v){return u.value.filter(E=>v.startsWith(E.path)).reduce((E,C)=>E?C.path.length>E.path.length?C:E:C,void 0)}let De=[],je;function _e(v){return De.push(v),je||(je=Ae(()=>{[...De].sort().reverse().forEach(E=>{Ca(i,E)}),De=[],je=null})),je}function Fe(v){return function(E,C){return function(F){return F instanceof Event&&(F.preventDefault(),F.stopPropagation()),be(V=>V.touched=!0),l.value=!0,c.value++,it().then(V=>{const ae=X(i);if(V.valid&&typeof E=="function"){const se=X(le.value);let pe=v?se:ae;return V.values&&(pe=V.source==="schema"?V.values:Object.assign({},pe,V.values)),E(pe,{evt:F,controlledValues:se,setErrors:y,setFieldError:m,setTouched:Yt,setFieldTouched:ke,setValues:q,setFieldValue:x,resetForm:Ht,resetField:ga})}!V.valid&&typeof C=="function"&&C({values:ae,evt:F,errors:V.errors,results:V.results})}).then(V=>(l.value=!1,V),V=>{throw l.value=!1,V})}}}const $=Fe(!1);$.withControlled=Fe(!0);function k(v,f){const E=u.value.findIndex(w=>w.path===v&&(Array.isArray(w.id)?w.id.includes(f):w.id===f)),C=u.value[E];if(!(E===-1||!C)){if(Ae(()=>{Qe(v,{mode:"silent",warn:!1})}),C.multiple&&C.fieldsCount&&C.fieldsCount--,Array.isArray(C.id)){const w=C.id.indexOf(f);w>=0&&C.id.splice(w,1),delete C.__flags.pendingUnmount[f]}(!C.multiple||C.fieldsCount<=0)&&(u.value.splice(E,1),Ea(v),b(),delete d.value[v])}}function B(v){Te(d.value).forEach(f=>{f.startsWith(v)&&delete d.value[f]}),u.value=u.value.filter(f=>!f.path.startsWith(v)),Ae(()=>{b()})}const O={formId:a,values:i,controlledValues:le,errorBag:h,errors:g,schema:L,submitCount:c,meta:Z,isSubmitting:l,isValidating:r,fieldArrays:o,keepValuesOnUnmount:W,validateSchema:s(L)?he:void 0,validate:it,setFieldError:m,validateField:Qe,setFieldValue:x,setValues:q,setErrors:y,setFieldTouched:ke,setTouched:Yt,resetForm:Ht,resetField:ga,handleSubmit:$,useFieldModel:gn,defineInputBinds:En,defineComponentBinds:In,defineField:Kt,stageInitialValue:bn,unsetInitialValue:Ea,setFieldInitialValue:Wt,createPathState:G,getPathState:ce,unsetPathValue:_e,removePathState:k,initialValues:te,getAllPathStates:()=>u.value,destroyPath:B,isFieldTouched:Be,isFieldDirty:yn,isFieldValid:hn};function x(v,f,E=!0){const C=X(f),w=typeof v=="string"?v:v.path;ce(w)||G(w),We(i,w,C),E&&Qe(w)}function de(v,f=!0){Te(i).forEach(E=>{delete i[E]}),Te(v).forEach(E=>{x(E,v[E],!1)}),f&&it()}function q(v,f=!0){bt(i,v),o.forEach(E=>E&&E.reset()),f&&it()}function Me(v,f){const E=ce(M(v))||G(v);return I({get(){return E.value},set(C){var w;const F=M(v);x(F,C,(w=M(f))!==null&&w!==void 0?w:!1)}})}function ke(v,f){const E=ce(v);E&&(E.touched=f)}function Be(v){const f=ce(v);return f?f.touched:u.value.filter(E=>E.path.startsWith(v)).some(E=>E.touched)}function yn(v){const f=ce(v);return f?f.dirty:u.value.filter(E=>E.path.startsWith(v)).some(E=>E.dirty)}function hn(v){const f=ce(v);return f?f.valid:u.value.filter(E=>E.path.startsWith(v)).every(E=>E.valid)}function Yt(v){if(typeof v=="boolean"){be(f=>{f.touched=v});return}Te(v).forEach(f=>{ke(f,!!v[f])})}function ga(v,f){var E;const C=f&&"value"in f?f.value:Ne(te.value,v),w=ce(v);w&&(w.__flags.pendingReset=!0),Wt(v,X(C),!0),x(v,C,!1),ke(v,(E=f?.touched)!==null&&E!==void 0?E:!1),m(v,f?.errors||[]),Ae(()=>{w&&(w.__flags.pendingReset=!1)})}function Ht(v,f){let E=X(v?.values?v.values:z.value);E=f?.force?E:bt(z.value,E),E=xe(L)&&Ie(L.cast)?L.cast(E):E,Y(E,{force:f?.force}),be(C=>{var w;C.__flags.pendingReset=!0,C.validated=!1,C.touched=((w=v?.touched)===null||w===void 0?void 0:w[C.path])||!1,x(C.path,Ne(E,C.path),!1),m(C.path,void 0)}),f?.force?de(E,!1):q(E,!1),y(v?.errors||{}),c.value=v?.submitCount||0,Ae(()=>{it({mode:"silent"}),be(C=>{C.__flags.pendingReset=!1})})}async function it(v){const f=v?.mode||"force";if(f==="force"&&be(V=>V.validated=!0),O.validateSchema)return O.validateSchema(f);r.value=!0;const E=await Promise.all(u.value.map(V=>V.validate?V.validate(v).then(ae=>({key:V.path,valid:ae.valid,errors:ae.errors,value:ae.value})):Promise.resolve({key:V.path,valid:!0,errors:[],value:void 0})));r.value=!1;const C={},w={},F={};for(const V of E)C[V.key]={valid:V.valid,errors:V.errors},V.value&&We(F,V.key,V.value),V.errors.length&&(w[V.key]=V.errors[0]);return{valid:E.every(V=>V.valid),results:C,errors:w,values:F,source:"fields"}}async function Qe(v,f){var E;const C=ce(v);if(C&&f?.mode!=="silent"&&(C.validated=!0),L){const{results:w}=await he(f?.mode||"validated-only");return w[v]||{errors:[],valid:!0}}return C?.validate?C.validate(f):(!C&&(E=f?.warn),Promise.resolve({errors:[],valid:!0}))}function Ea(v){Ca(te.value,v)}function bn(v,f,E=!1){Wt(v,f),We(i,v,f),E&&!e?.initialValues&&We(z.value,v,X(f))}function Wt(v,f,E=!1){We(te.value,v,X(f)),E&&We(z.value,v,X(f))}async function Ia(){const v=s(L);if(!v)return{valid:!0,results:{},errors:{},source:"none"};r.value=!0;const f=Dt(v)||xe(v)?await fl(v,i):await vl(v,i,{names:S.value,bailsMap:T.value});return r.value=!1,f}const _n=$((v,{evt:f})=>{Xn(f)&&f.target.submit()});we(()=>{if(e?.initialErrors&&y(e.initialErrors),e?.initialTouched&&Yt(e.initialTouched),e?.validateOnMount){it();return}O.validateSchema&&O.validateSchema("silent")}),ze(L)&&U(L,()=>{var v;(v=O.validateSchema)===null||v===void 0||v.call(O,"validated-only")}),ya(rt,O);function Kt(v,f){const E=Ie(f)?void 0:f?.label,C=ce(M(v))||G(v,{label:E}),w=()=>Ie(f)?f(Rt(C,Ct)):f||{};function F(){var ee;C.touched=!0,((ee=w().validateOnBlur)!==null&&ee!==void 0?ee:mt().validateOnBlur)&&Qe(C.path)}function V(){var ee;((ee=w().validateOnInput)!==null&&ee!==void 0?ee:mt().validateOnInput)&&Ae(()=>{Qe(C.path)})}function ae(){var ee;((ee=w().validateOnChange)!==null&&ee!==void 0?ee:mt().validateOnChange)&&Ae(()=>{Qe(C.path)})}const se=I(()=>{const ee={onChange:ae,onInput:V,onBlur:F};return Ie(f)?Object.assign(Object.assign({},ee),f(Rt(C,Ct)).props||{}):f?.props?Object.assign(Object.assign({},ee),f.props(Rt(C,Ct))):ee});return[Me(v,()=>{var ee,me,ge;return(ge=(ee=w().validateOnModelUpdate)!==null&&ee!==void 0?ee:(me=mt())===null||me===void 0?void 0:me.validateOnModelUpdate)!==null&&ge!==void 0?ge:!0}),se]}function gn(v){return Array.isArray(v)?v.map(f=>Me(f,!0)):Me(v)}function En(v,f){const[E,C]=Kt(v,f);function w(){C.value.onBlur()}function F(ae){const se=jt(ae);x(M(v),se,!1),C.value.onInput()}function V(ae){const se=jt(ae);x(M(v),se,!1),C.value.onChange()}return I(()=>Object.assign(Object.assign({},C.value),{onBlur:w,onInput:F,onChange:V,value:E.value}))}function In(v,f){const[E,C]=Kt(v,f),w=ce(M(v));function F(V){E.value=V}return I(()=>{const V=Ie(f)?f(Rt(w,Ct)):f||{};return Object.assign({[V.model||"modelValue"]:E.value,[`onUpdate:${V.model||"modelValue"}`]:F},C.value)})}return Object.assign(Object.assign({},O),{values:Ze(i),handleReset:()=>Ht(),submitForm:_n})}function Sl(e,t,a,n){const l={touched:"some",pending:"some",valid:"every"},r=I(()=>!ye(t,s(a)));function c(){const i=e.value;return Te(l).reduce((u,p)=>{const d=l[p];return u[p]=i[d](b=>b[p]),u},{})}const o=ht(c());return Tn(()=>{const i=c();o.touched=i.touched,o.valid=i.valid,o.pending=i.pending}),I(()=>Object.assign(Object.assign({initialValues:s(a)},o),{valid:o.valid&&!Te(n.value).length,dirty:r.value}))}function Tl(e,t,a){const n=nn(a),l=R(n),r=R(X(n));function c(o,i){i?.force?(l.value=X(o),r.value=X(o)):(l.value=bt(X(l.value)||{},X(o)),r.value=bt(X(r.value)||{},X(o))),i?.updateFields&&e.value.forEach(u=>{if(u.touched)return;const d=Ne(l.value,u.path);We(t,u.path,X(d))})}return{initialValues:l,originalInitialValues:r,setInitialValues:c}}function Ol(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}function Nt(){const e=_a(rt);return I(()=>e?.values||{})}const Rl=""+new URL("dc-logo.svg",import.meta.url).href,Cl={class:"mx-8px my-6 text-base"},Al={class:"flex items-center justify-between mb-2"},Vl={class:"flex gap-2"},wl={class:"text-xl"},kl=A("img",{class:"w-44",src:Rl},null,-1),xl={class:"rounded border border-sf-border"},Dl=["aria-label"],jl=["aria-selected","onClick"],Fl={class:"table-fixed w-full"},Ll={class:"h-[50px] bg-sf-gray-neutral"},$l={class:"h-[50px] border-t border-sf-border"},Pl=["title","onClick"],Ul=["title"],Ml={key:0,class:"p-4 border-t border-sf-border"},ea="score",ta="openRecord",Bl=J({__name:"DuplicatesFoundTable",props:{searchResult:{},objectApiName:{},objectPrefix:{},openRecordInNewTab:{type:Boolean},maxRows:{default:5},duplicateMessage:{}},setup(e){const{t}=fe(),a=gt(),n=e;we(()=>{l()}),Ba(()=>{l()});const l=()=>{let b=0,m=0;Object.values(n.searchResult.searchResult).forEach(y=>{if(!y||y.length===0)return;m++;const g=y.reduce((S,T)=>S+T.score,0)/y.length;b+=g}),m===0&&(m=1),a.recordEvent("DC Entry - Duplicates Found Component - Loaded",{object_name:n.objectApiName,averageScore:(b/m).toFixed(2),duplicates_found:n.searchResult.duplicateCount}),a.persist()},r=b=>{const m=`/${b}`;let y="_blank";n.openRecordInNewTab||(y="_self"),window.open(m,y)},c=I(()=>{const b=Object.keys(n.searchResult.searchResult).map(h=>({label:n.searchResult.objectMeta[h].Label,name:h,recordCount:n.searchResult.searchResult[h].length})),m=b.findIndex(h=>n.objectPrefix===h.name);if(m===-1)return b;const[y]=b.splice(m,1);return b.unshift(y),b}),o=I(()=>{const b=[{fieldLabel:"",fieldName:ta,recordTypeId:"",resultFieldId:"",sortOrder:0},{fieldLabel:t("DCENTRY_DUPLICATE_COLUMN_SCORE"),fieldName:ea,recordTypeId:"",resultFieldId:"",sortOrder:0}];return b.push(...n.searchResult.resultFields[p.value]),b}),i=I(()=>n.searchResult.searchResult[p.value].sort((b,m)=>m.score-b.score).slice(0,n.maxRows)),u=I(()=>n?.duplicateMessage??t("DCENTRY_HEADER_WARNING_DUPLICATES_FOUND")),p=R(c.value.length>0?c.value[0].name:""),d=b=>p.value===b;return(b,m)=>(_(),N("div",Cl,[A("div",Al,[A("div",Vl,[j(s($e),{name:"slds-icon-warning",color:"#dd7a01",size:20}),A("h1",wl,K(u.value),1)]),kl]),A("div",xl,[A("div",{role:"tablist","aria-label":s(t)("DCENTRY_HEADER_WARNING_DUPLICATES_FOUND_TABS"),class:"flex border-b border-sf-border h-[50px]"},[(_(!0),N(re,null,Oe(c.value,y=>(_(),N("button",{role:"tab",tabindex:"0",class:Q(["px-4 py-2 hover:border-b border-sf-active cursor-pointer",{["font-bold border-b hover:border-b"]:d(y.name)}]),"aria-selected":d(y.name),onClick:h=>p.value=y.name},K(`${y.label} (${Math.min(y.recordCount,n.maxRows)})`),11,jl))),256))],8,Dl),A("table",Fl,[A("thead",null,[A("tr",Ll,[(_(!0),N(re,null,Oe(o.value,y=>(_(),N("th",{class:Q(["px-1 text-left truncate first:pl-4",{["w-[50px]"]:ta===y.fieldName}])},K(y.fieldLabel),3))),256))])]),A("tbody",null,[(_(!0),N(re,null,Oe(i.value,y=>(_(),N("tr",$l,[(_(!0),N(re,null,Oe(o.value,h=>(_(),N("td",null,[ta===h.fieldName?(_(),N("div",{key:0,role:"button",tabindex:"0",title:`open record ${y.objectData.Id}`,class:"flex items-center justify-center",onClick:g=>r(y.objectData.Id)},[j(s($e),{name:"slds-icon-open",size:16})],8,Pl)):(_(),N("div",{key:1,class:"px-1 truncate",title:y.objectData[h.fieldName]},K(ea===h.fieldName?`${Number(y[ea]).toFixed(0)}%`:y.objectData[h.fieldName]),9,Ul))]))),256))]))),256))])]),i.value.length===0?(_(),N("div",Ml,K(s(t)("DCENTRY_HEADER_WARNING_NO_DUPLICATES_FOUND")),1)):H("",!0)])]))}}),ft=new at,_t={async isPersonAccount(e){return ft.call("dc3WebEntryController.isPersonAccount",{recordTypeId:e})},async getDcEntrySettings(e){return ft.call("dc3WebEntryController.getDcEntrySettings",{objectName:e})},async saveOrUpdateRecord(e){return ft.call("dc3WebEntryController.saveOrUpdateRecord",e)},async doDuplicateSearch(e){return ft.call("dc3WebEntryController.doDuplicateSearch",e)},async getObjectNameByPrefix(e){return ft.call("dc3WebEntryController.getObjectNameByPrefix",{prefix:e})}},P={ADDRESS:"Address",BOOLEAN:"Boolean",COMBOBOX:"Combobox",CURRENCY:"Currency",DATE:"Date",DATETIME:"DateTime",DOUBLE:"Double",EMAIL:"Email",ENCRYPTEDSTRING:"EncryptedString",INT:"Int",MULTIPICKLIST:"MultiPicklist",PERCENT:"Percent",PHONE:"Phone",PICKLIST:"Picklist",REFERENCE:"Reference",STRING:"String",TEXTAREA:"TextArea",TIME:"Time",URL:"Url"},Ve="comfy",Ke="compact";var ve=(e=>(e.ADDRESS="Address",e.CITY="City",e.CODE="Code",e.COUNTRY="Country",e.COUNTRYCODE="CountryCode",e.LATITUDE="Latitude",e.LONGITUDE="Longitude",e.POSTAL_CODE="PostalCode",e.STATE="State",e.STATECODE="StateCode",e.STREET="Street",e))(ve||{});const va={controllerValues:{},defaultValue:{attributes:null,label:"",validFor:[],value:""},url:"",values:[]},oe=e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.value},Yl=e=>`${e}%`,Hl={content:["./index.html","./src/**/*.{vue,js,ts,jsx,tsx}"],corePlugins:{container:!1},theme:{extend:{colors:{"sf-gray":"#747474","sf-gray-neutral":"#f3f3f3","sf-gray-skeleton":"#e9eaec","sf-gray-skeleton-border":"#d9dbdd","sf-gray-border":"#c9c9c9","sf-warning-base-60":"#dd7a01","sf-error-base-40":"#ba0517","sf-error":"#ea001e","sf-error-text":"#ba0517","sf-active":"#4194f9","sf-primary":"#0176d3","sf-text-weak":"#aeaeae","sf-tooltip":"#062d60","sf-yellow":"#fbf3e0"},boxShadow:{sf:"0px 0px 5px 0.5px rgb(0 0 0 / 0.1)","sf-error":"0px 0px 3px 0px #ba0517"}},plugins:[]}},ln=(e,t)=>{const a=R({top:0,bottom:0,left:0,right:0,width:0,height:0,posWidth:0,posHeight:0}),n=()=>{if(!e.value)return;const l=e.value.getBoundingClientRect();if(a.value.width=e.value?.clientWidth??0,a.value.height=e.value?.clientHeight??0,a.value.top=l.top??0,a.value.bottom=l.bottom??0,a.value.left=l.left??0,a.value.right=l.right??0,a.value.top<0&&(a.value.top=0),!t?.value)return;const r=t.value.getBoundingClientRect();a.value.posWidth=r.width??0,a.value.posHeight=r.height??0};return U(e,async()=>{await Ae(),n()}),{calculatePosition:n,positions:a}},Wl=J({__name:"HoverComponent",props:{showContent:{type:Boolean},maxWidth:{default:300},horizontalOffSet:{default:15},pointerSize:{default:15},pointerColor:{default:"#fff"},distanceToAnchor:{default:15}},setup(e){const t=e,a=R(),n=R(),l=R(!1),r=R(-1),{positions:c,calculatePosition:o}=ln(a,n),{pause:i,resume:u}=Ya(()=>{r.value=c.value.posWidth,o()},{fpsLimit:420,immediate:!0});we(()=>{i()}),U(()=>[c.value.posWidth,r.value],([T])=>{l.value=T===r.value});const p=I(()=>{const T=c.value.left,D=c.value.posWidth;return T-D>0}),d=I(()=>{const T=c.value.top,D=c.value.posHeight;return T-D-t.distanceToAnchor>0}),b=I(()=>{const T=c.value.left,D=c.value.width,W=c.value.posWidth;return p.value?T+D-W+t.horizontalOffSet:T-t.horizontalOffSet}),m=I(()=>{const T=c.value.top,D=c.value.height,W=c.value.posHeight;return d.value?T-W-t.distanceToAnchor:T+D+t.distanceToAnchor}),y=I(()=>`left: ${b.value}px; top: ${m.value}px; width; ${t.maxWidth}px; opacity: ${l.value?100:0}`),h=I(()=>{const T=c.value.posWidth,D=c.value.width;return p.value?T-t.pointerSize/Math.sqrt(2)-D/2-t.horizontalOffSet:t.horizontalOffSet+D/2-t.pointerSize/Math.sqrt(2)}),g=I(()=>{const T=c.value.posHeight;return d.value?T-t.pointerSize:0-t.pointerSize}),S=I(()=>`transform-origin: bottom left; left: ${h.value}px; top: ${g.value}px; background: ${t.pointerColor}; width: ${t.pointerSize}px; height: ${t.pointerSize}px`);return U(()=>t.showContent,T=>{T?u():i()}),(T,D)=>(_(),N(re,null,[A("div",{ref_key:"anchor",ref:a,class:"w-fit"},[oa(T.$slots,"anchor")],512),t.showContent?(_(),N("div",{key:0,ref_key:"content",ref:n,class:"fixed z-99999",style:sa(y.value)},[oa(T.$slots,"content"),t.pointerSize>0?(_(),N("div",{key:0,class:"absolute rotate-45",style:sa(S.value)},null,4)):H("",!0)],4)):H("",!0)],64))}}),Kl=["title"],zl=J({__name:"HelptextHover",props:{message:{},iconName:{default:"slds-icon-info"},iconColor:{default:"#747474"},iconSize:{default:14}},setup(e){const{colors:t}=Hl.theme.extend,a=e,n=R(!1),l=I(()=>oe(a.message));return(r,c)=>(_(),ne(Wl,{"show-content":n.value,"pointer-color":s(t)["sf-tooltip"]},{anchor:xt(()=>[A("div",{onMouseenter:c[0]||(c[0]=o=>n.value=!0),onMouseleave:c[1]||(c[1]=o=>n.value=!1),role:"tooltip",class:"w-[14px] flex items-center"},[j(s($e),{name:a.iconName,color:a.iconColor,size:a.iconSize},null,8,["name","color","size"])],32)]),content:xt(()=>[A("div",{class:"p-4 text-white rounded break-words bg-sf-tooltip",title:l.value},K(l.value),9,Kl)]),_:1},8,["show-content","pointer-color"]))}}),rn=e=>Math.max(Math.floor(Math.log10(Math.abs(e))),0)+1,Gl=e=>{const t=String(e).split(".");return t.length<2?0:rn(Number(t[1]))};class Ue{constructor(t,a){Le(this,"t");Le(this,"errorMessageKeys",{OPTION_MUST_BE_SELECTED:"DCENTRY_ERROR_OPTION_MUST_BE_SELECTED",FIELD_IS_REQUIRED:"DCENTRY_ERROR_REQUIRED",INVALID_NUMERIC_RANGE:"DCENTRY_ERROR_INVALID_NUMERIC_RANGE",INVALID_TEXT_RANGE:"DCENTRY_ERROR_INVALID_TEXT_RANGE"});a&&(this.errorMessageKeys=a),this.t=t}buildFieldSchema(t){let a;return t.dataType===P.STRING||t.dataType===P.TEXTAREA||t.dataType===P.ENCRYPTEDSTRING||t.dataType===P.URL||t.dataType===P.EMAIL||t.dataType===P.PHONE||t.dataType===P.PICKLIST||t.dataType===P.MULTIPICKLIST||t.dataType===P.REFERENCE||t.dataType===P.TIME?a=Ln():t.dataType===P.DOUBLE||t.dataType===P.INT||t.dataType===P.PERCENT||t.dataType===P.CURRENCY?a=$n().transform(n=>Number.isNaN(n)?null:n).nullable():a=Pn().nullable(),t.required&&(t.dataType===P.MULTIPICKLIST?a=a.required(this.t(this.errorMessageKeys.OPTION_MUST_BE_SELECTED)):a=a.required(this.t(this.errorMessageKeys.FIELD_IS_REQUIRED))),a._type==="string"&&t.length!==null&&t.length>0&&(a=a.max(t.length,({value:n})=>this.t(this.errorMessageKeys.INVALID_TEXT_RANGE,{field:t.label,value:n}))),a._type==="number"&&t.custom&&t.precision!==null&&t.scale!==null&&t.precision>=0&&t.scale>=0&&(a=a.test("int",({value:n})=>this.t(this.errorMessageKeys.INVALID_NUMERIC_RANGE,{field:t.label,value:n}),n=>n?rn(n)<=t.precision-t.scale:!0),a=a.test("decimal",({value:n})=>this.t(this.errorMessageKeys.INVALID_NUMERIC_RANGE,{field:t.label,value:n}),n=>n?Gl(n)<=t.scale:!0)),a}}const ql=["0","1","2","3","4","5","6","7","8","9","e","k","m","b","t",".",",","+","-"],aa={k:3,m:6,b:9,t:12},na=20,Jl=6,xa="Infinity",At={INVALID:"Invalid"};class Xl{constructor(t){Le(this,"locale","en-US");Le(this,"transformNumberInput",(t,a)=>{if(t===null)return a;let n=a.slice(0,-1);if(!ql.includes(`${t}`))return n;if(!n||isNaN(parseInt(n.slice(-1))))return a;let l={isScientific:!1,isInvalid:!1,base:0,exponent:0};if(isNaN(parseInt(t))&&!["e",".",",","-","+"].includes(t))try{l=this.getScientificNotation(n)}catch{throw new Error(At.INVALID)}let{isScientific:r,base:c,exponent:o}=l;if(t=t.toLowerCase(),t in aa){if(t!==a.slice(-1))return a;const i=aa[t];r?(o+=i,n=this.transformExponent(c,o,na,!0)):n=`${parseFloat(n)*Math.pow(10,i)}`}else n=a;try{({isScientific:r}=this.getScientificNotation(n)),r||(n=this.numberToScientific(n,na,Jl))}catch(i){console.error(`Could not format number to scientific notation: ${i}`)}return n});Le(this,"transformBlur",t=>{let a=t,n;if(!t)return"";if(xa===t||`-${xa}`===t)return parseFloat(a).toLocaleString(this.locale);try{n=this.getScientificNotation(a)}catch{throw new Error(At.INVALID)}if(n?.isInvalid)throw new Error(At.INVALID);let l=!0;for(const r in aa)a.split(r).length>1&&(l=!1);if(!l)throw new Error(At.INVALID);return a=parseFloat(a).toLocaleString(this.locale),a});Le(this,"transformScientificSF",t=>{if(t==="")return null;if(!t)return t;const{isScientific:a,base:n,exponent:l}=this.getScientificNotation(t);return a?this.transformExponent(n,l,na,!0):t});Le(this,"getScientificNotation",t=>{const a=t.trim().toLowerCase(),n={isScientific:!1,isInvalid:!1,base:0,exponent:0};if(a==null)throw new Error("Input is null or undefined");const l=a.split("e"),r=l.length===2,c=l.length===1;if(2<l.length)return n.isInvalid=!0,n;if(c)return n;if(r){const i=parseFloat(l[0]),u=parseFloat(l[1]);if(isNaN(i))throw new Error("Base is not a number");if(isNaN(u))throw new Error("Exponent is not a number");n.base=i,n.exponent=u,n.isScientific=!0}return n});Le(this,"transformExponent",(t,a,n,l)=>{let r="";return l&&(r=a<0?"-":"+"),n&&a>n?`${t}e${r}${a}`:`${t*Math.pow(10,a)}`});Le(this,"numberToScientific",(t,a,n)=>{let l=t.length-1,r=!1;t.includes(".")&&(l=t.split(".")[1].length,r=!0);const c=parseFloat(t),o=c/Math.pow(10,l);return!r&&t.length>a?`${o}e+${l}`:r&&l>n?`${c}`:t});t&&(this.locale=t)}}const Da=J({__name:"NumberField",props:{fieldInfo:{},formatter:{type:Function},defaultValue:{}},setup(e){const{t}=fe(),a=e,n=new Ue(t),l=I(()=>n.buildFieldSchema(a.fieldInfo)),r=new Xl,{errorMessage:c,value:o,handleBlur:i,setErrors:u,resetField:p}=Pe(()=>a.fieldInfo.apiName,l,{validateOnValueUpdate:!1,initialValue:a.defaultValue}),d=R("");we(()=>{a.defaultValue&&a.defaultValue!==null&&h()});const b=S=>{const T=S.data;d.value=r.transformNumberInput(T,d.value)},m=S=>{u([]);const T=r.transformScientificSF(d.value);if(T===null){o.value=null,i(S,!1);return}else o.value=T;parseFloat(o.value)===1/0&&(o.value=`${1/0}`);try{h()}catch{d.value=o.value,u([t("DCENTRY_ENTER_VALID_VALUE")])}i(S,!1)},y=()=>{d.value=o.value},h=()=>{d.value=r.transformBlur(o.value),a.formatter&&(d.value=a.formatter(d.value))},g=I(()=>{const S=a.fieldInfo.scale??0;return Math.pow(10,S*-1)});return U(()=>a.defaultValue,S=>{S&&S!==null&&p({value:S})}),U(o,S=>{S!==null&&(S&&S!==null?h():d.value="")}),(S,T)=>(_(),N(re,null,[j(s(Et),{class:"koala-input",onInput:b,onBlur:T[0]||(T[0]=D=>{m(D)}),onFocus:y,modelValue:d.value,"onUpdate:modelValue":T[1]||(T[1]=D=>d.value=D),customErrorMessage:s(c),step:g.value,autocomplete:"off",id:a.fieldInfo.apiName},null,8,["modelValue","customErrorMessage","step","id"]),Ha(A("input",{class:"hidden-input",type:"hidden","onUpdate:modelValue":T[2]||(T[2]=D=>ze(o)?o.value=D:null)},null,512),[[Cn,s(o)]])],64))}}),Ql=["onKeyup","aria-checked","disabled"],Zl=J({__name:"CheckboxField",props:{fieldInfo:{},defaultValue:{type:Boolean,default:!1}},setup(e){const{t}=fe(),a=e,n=new Ue(t),l=I(()=>n.buildFieldSchema(a.fieldInfo)),{value:r}=Pe(()=>a.fieldInfo.apiName,l,{validateOnValueUpdate:!1,initialValue:a.defaultValue}),c=()=>{r.value=!r.value};return(o,i)=>(_(),N("button",{onClick:c,onKeyup:Je(Ge(c,["stop","prevent"]),["space"]),tabindex:"0",class:Q(["default-checkbox",{["checkbox-selected"]:s(r)}]),role:"checkbox","aria-checked":s(r),disabled:!a.fieldInfo.updateable},null,42,Ql))}});const er=lt(Zl,[["__scopeId","data-v-b54b089e"]]),{t:ie}=It.global,on=Object.freeze([ie("DCENTRY_JANUARY"),ie("DCENTRY_FEBRUARY"),ie("DCENTRY_MARCH"),ie("DCENTRY_APRIL"),ie("DCENTRY_MAY"),ie("DCENTRY_JUNE"),ie("DCENTRY_JULY"),ie("DCENTRY_AUGUST"),ie("DCENTRY_SEPTEMBER"),ie("DCENTRY_OCTOBER"),ie("DCENTRY_NOVEMBER"),ie("DCENTRY_DECEMBER")]),sn=Object.freeze([ie("DCENTRY_SUNDAY"),ie("DCENTRY_MONDAY"),ie("DCENTRY_TUESDAY"),ie("DCENTRY_WEDNESDAY"),ie("DCENTRY_THURSDAY"),ie("DCENTRY_FRIDAY"),ie("DCENTRY_SATURDAY")]),un=ie("DCENTRY_TODAY"),tr=J({__name:"DateField",props:{fieldInfo:{},defaultValue:{}},setup(e){const{t,d:a}=fe(),n=e,l=new Ue(t),r=I(()=>l.buildFieldSchema(n.fieldInfo)),{errorMessage:c,value:o}=Pe(()=>n.fieldInfo.apiName,r,{validateOnValueUpdate:!1,initialValue:n.defaultValue}),i=()=>{if(!o.value){const u=new Date;o.value=u.toISOString()}};return U(o,u=>{u===void 0&&!n.fieldInfo.required&&(o.value=n.defaultValue!==void 0?"":void 0)}),(u,p)=>(_(),ne(s(Wa),{modelValue:s(o),"onUpdate:modelValue":p[0]||(p[0]=d=>ze(o)?o.value=d:null),role:"combobox","allow-manual-input":!0,"custom-error-message":s(c),format:d=>s(a)(d,"dateNumericUTC"),"month-names-translation":s(on),"day-names-translation":s(sn),"today-translation":s(un),onClick:i},null,8,["modelValue","custom-error-message","format","month-names-translation","day-names-translation","today-translation"]))}}),{d:ar}=It.global,la=e=>{const t=new Date(e);t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0);const a=ar(t.toISOString(),"timeNumeric"),n=parseInt(a.split(":")[0],10);let l=0;return n>12?l=(24-n)*-1:l=n,l},cn=(e,t)=>{let a=e-t;return a<0?a=24+a:a>24?a=Math.abs(24-a):a===24&&(a=0),a},ja=(e,t)=>{const a=cn(e,t);let n=0;return t<0&&a+t<=0&&(n=1),t>0&&a-t<=0&&(n=-1),n},nr={class:"flex"},lr={class:"flex basis-2/4 pr-1 whitespace-nowrap"},rr={class:"flex basis-2/4"},or=J({__name:"DateTimeField",props:{fieldInfo:{},defaultValue:{}},setup(e){const{t,d:a}=fe(),n=e,l=new Ue(t),r=I(()=>l.buildFieldSchema(n.fieldInfo)),c=R(!1);let o=n.defaultValue;const i=y=>{if(c.value=!0,!y)return y;const h=new Date(y),g=la(y);return h.setUTCHours(h.getUTCHours()+g),o=h.toISOString(),h.toISOString()},{value:u}=Pe(()=>n.fieldInfo.apiName,r,{validateOnValueUpdate:!1,initialValue:i(n.defaultValue)}),p=R(),d=R();An(()=>{n.defaultValue&&(p.value=a(n.defaultValue,"timeNumeric"),d.value=n.defaultValue,m.value=!0)});const b=()=>{if(!u.value||n.defaultValue===void 0){const y=new Date;d.value=y.toISOString()}},m=R(!1);return U(u,(y,h)=>{if(c.value){c.value=!1;return}if(h===void 0&&y||y&&o===y){d.value=n.defaultValue,p.value=y.split("T")[1].substring(0,5),m.value=!0;return}if(y===void 0){d.value=n.defaultValue!==void 0?"":void 0,p.value="",m.value=!0;return}},{immediate:!0}),U([d,p],([y,h],[g,S])=>{if(m.value){m.value=!1;return}let T;if(y!==void 0&&y!==g){if(T=new Date(y),!p.value)g===void 0&&(p.value="12:00");else if(S!==void 0&&S===h&&g!==void 0){const D=Number.parseInt(S.split(":")[0],10),W=Number.parseInt(S.split(":")[1],10),te=new Date(y),z=la(y);te.setUTCHours(D-z),te.setUTCMinutes(W),d.value=te.toISOString()}u.value=`${T.toISOString().split("T")[0]}T${p.value}:00.000Z`,m.value=!0}if(h!==S){if(!d.value){p.value="";return}if(y&&h&&S){T=new Date(y);const D=Number.parseInt(S.split(":")[0],10),W=Number.parseInt(h.split(":")[0],10),te=Number.parseInt(h.split(":")[1],10),z=la(y),Y=ja(D,z),Z=ja(W,z),le=Y===Z?0:Y!==0&&Z===0?-1*Y:Z;T.setUTCDate(T.getUTCDate()+le),T.setUTCHours(cn(W,z)),T.setUTCMinutes(te),d.value=T.toISOString(),u.value=`${y.split("T")[0]}T${h}:00.000Z`}m.value=!0}}),(y,h)=>(_(),N("div",nr,[A("div",lr,[j(s(Wa),{modelValue:d.value,"onUpdate:modelValue":h[0]||(h[0]=g=>d.value=g),role:"combobox",class:"w-full",format:g=>s(a)(g,"dateNumeric"),"allow-manual-input":!0,"month-names-translation":s(on),"day-names-translation":s(sn),"today-translation":s(un),onClick:b},null,8,["modelValue","format","month-names-translation","day-names-translation","today-translation"])]),A("div",rr,[j(s(Et),{modelValue:p.value,"onUpdate:modelValue":h[1]||(h[1]=g=>p.value=g),role:"input",class:"h-[34px]",type:"time",step:"60"},null,8,["modelValue"])])]))}}),vt=new at,St={async getLookupItemsByName(e,t,a,n){return await vt.call("dc3WebLookupController.getLookupItemsByName",{objectApiName:e,searchValue:t,parentObjectApiName:a,searchLayoutField:n})},async getLookupDisplayValue(e,t){return await vt.call("dc3WebLookupController.getLookupDisplayValue",{objectApiName:e,objectId:t})},async getRecentItems(e,t,a){return await vt.call("dc3WebLookupController.getRecentItems",{objectApiName:e,parentObjectApiName:t,searchLayoutField:a})},async getObjectLabels(e){return await vt.call("dc3WebLookupController.getObjectLabels",{objectApiName:e})},async getLookupComboboxOptions(e){return await vt.call("dc3WebLookupController.getLookupComboboxOptions",{objectApiNames:e})}},sr=async(e,t,a)=>await St.getRecentItems(e,t,a),ir=async(e,t,a,n)=>t?await St.getLookupItemsByName(e,t,a,n):[],ur=async(e,t)=>await St.getLookupDisplayValue(e,t),cr=async e=>await St.getLookupComboboxOptions(e),Fa=async e=>await St.getObjectLabels(e),dr=(e,t)=>{const a=e.toLowerCase().trim();return t.map(n=>{const l=n.label.toLowerCase().trim();if(!l.includes(a))return{...n};const r=l.indexOf(a),c=a.length,o=n.label.substring(0,r),i=n.label.substring(r+c),u=n.label.substring(r,r+c);return{...n,partBefore:o,partAfter:i,queryPart:u}})},La=e=>{const t=e.findIndex(a=>!a.isHeader&&!a.isDisabled);return t===-1?0:t},{t:fr}=It.global;function vr({props:e}){const t=R({label:"",pluralLabel:""}),a=R(0),n=R(e.fieldInfo.referenceToInfos[0].apiName);we(async()=>{t.value=await Fa(n.value)});const l=I(()=>t.value.label),r=I(()=>t.value.pluralLabel),c=I(()=>e.fieldInfo.referenceToInfos.length>1),o=I(()=>({label:fr("DCENTRY_LOOKUP_RECENT_OBJECTS",[r.value]),isDisabled:!0,isHeader:!0}));return U(n,async i=>{t.value=await Fa(n.value),a.value=e.fieldInfo.referenceToInfos.findIndex(u=>i===u.apiName)}),{getRelationshipLabel:l,getRelationshipLabelPlural:r,recentItemsHeader:o,isMultiObject:c,currentObject:n,currentObjectIndex:a}}const Ye=new at,He={activeTheme:()=>"themes/active",objectInfo:e=>`object-info/${e}`,createRecord:(e,t)=>`record-defaults/create/${e}${t?`?${t}`:""}`,editRecord:(e,t)=>`record-ui/${e}${t?`?${t}`:""}`,getRecord:(e,t)=>`records/${e}${t?`?${t}`:""}`,getLayout:(e,t)=>`layout/${e}${t?`?${t}`:""}`,picklistValues:(e,t)=>`object-info/${e}/picklist-values/${t}`,profilePhoto:e=>`user-profiles/${e}/photo`,searchLayout:e=>`list-info/${e}/__SearchResult`},tt={async getActiveTheme(e){return await Ye.callRestApiService(He.activeTheme(),e,"ui-api")},async getObjectInfo(e,t){return await Ye.callRestApiService(He.objectInfo(e),t,"ui-api")},async getSearchLayout(e,t){return await Ye.callRestApiService(He.searchLayout(e),t,"ui-api")},async getCreateRecordLayout(e,t,a){const n=new URLSearchParams;return t&&n.append("recordTypeId",t),await Ye.callRestApiService(He.createRecord(e,n.toString()),a,"ui-api")},async getEditRecordLayout(e,t,a,n){const l=await this.getObjectInfo(e,n),r=Object.values(l.fields).filter(i=>i.compoundComponentName===ve.LATITUDE||i.compoundComponentName===ve.LONGITUDE||i.compoundComponentName===ve.COUNTRYCODE||i.compoundComponentName===ve.STATECODE).map(i=>`${e}.${i.apiName}`);r.push(`${e}.Name`);const c=new URLSearchParams;r&&r.length>0&&c.append("optionalFields",r.join(","));const o=await Ye.callRestApiService(He.editRecord(t,`${c.toString()}`),n,"ui-api");return await this._transformEditRecordLayout(o,e,t,a,n,l)},async getRecord(e,t,a){return await Ye.callRestApiService(He.getRecord(e,t),a,"ui-api")},async getRecordTypeLayout(e,t,a){const n=new URLSearchParams;return n.append("recordTypeId",t),await Ye.callRestApiService(He.getLayout(e,n.toString()),a,"ui-api")},async getAllPicklistValues(e,t,a){return await Ye.callRestApiService(He.picklistValues(e,t),a,"ui-api")},async getUserProfilePhoto(e,t){return await Ye.callRestApiService(He.profilePhoto(e),t,"connect")},async _transformEditRecordLayout(e,t,a,n,l,r){const c=Object.keys(e.layouts[t])[0];let o=null,i=null;if(n&&n!==c){o=await this.getRecordTypeLayout(t,n,l);const u=new URLSearchParams;u.append("recordTypeId",n);const p=Object.keys(r.fields).map(b=>`${t}.${b}`);p.push(`${t}.Owner`),p.push(`${t}.LastModifiedBy`),p.push(`${t}.CreatedBy`),p&&p.length>0&&u.append("optionalFields",p.join(","));const d=await this.getRecord(a,u.toString(),l);d?.fields&&(i=d.fields)}return o!==null?e.layout=o:e.layout=e.layouts[t][c].Full.View,e.record=e.records[a],i!==null&&(e.record.fields={...e.record.fields,...i}),delete e.layouts,delete e.records,e}},Ft="Account",Vt="Contact",pa="PAccount",pr={class:"relative"},mr={tabindex:"-1",class:"spinner"},yr={key:0,class:"flex gap-1 py-2px"},hr={key:1},br={key:0,class:"flex w-[25%]"},_r={key:0,class:"flex items-center pl-[6px]"},gr=["title"],Er=["onKeydown"],Ir=["onMousedown","onMouseover"],Nr={key:0,class:"pr-2 flex items-center"},Sr=["title"],Tr=["title"],Or={key:2},Rr=500,Cr=J({__name:"LookupField",props:{fieldInfo:{},readonly:{type:Boolean,default:!1},objectApiName:{},hasRecentItems:{type:Boolean,default:!1},defaultValue:{}},setup(e){const{t}=fe(),a=e,{currentObject:n,currentObjectIndex:l,getRelationshipLabelPlural:r,recentItemsHeader:c,isMultiObject:o}=vr({props:a}),i=R(),u=R(),p=R(),d=R(!1),b=R(!1),m=R(""),y=R({label:""}),h=R(null),g=R(""),S=R([]),T=R([]),D=R({}),W=new Ue(t),te=I(()=>W.buildFieldSchema(a.fieldInfo)),{errorMessage:z,value:Y,handleBlur:Z,setErrors:le}=Pe(()=>a.fieldInfo.apiName,te,{validateOnValueUpdate:!1,initialValue:a.defaultValue}),{positions:L,calculatePosition:G}=ln(p,i);Ya(()=>{G()},{fpsLimit:60,immediate:!0}),we(async()=>{try{if(Ft!==a.fieldInfo.referenceToInfos[0]?.apiName){const k=(await tt.getSearchLayout(a.fieldInfo.referenceToInfos[0]?.apiName??"",window.__SESSION_ID)).displayColumns;1<=k.length&&(g.value=1<k.length?k[1].fieldApiName:k[0].fieldApiName)}}catch($){console.error($)}if(a.hasRecentItems&&await je(),o.value){const $=a.fieldInfo.referenceToInfos.map(k=>k.apiName);try{D.value=await cr($)}catch(k){console.error(k)}}});const ue=()=>{le([]),d.value=!d.value,h.value===null&&(h.value=La(_e.value))},Re=$=>{const k=$.code;!["ArrowUp","ArrowDown"].includes(k)||(h.value===null&&(h.value=La(_e.value)),k==="ArrowUp"&&h.value--,k==="ArrowDown"&&h.value++)},he=async $=>{$.clickHandler?await $.clickHandler():$.apiName&&(Y.value=$.apiName),d.value=!1},be=($,k)=>{k.isDisabled||k.isHeader||(h.value=$)},ce=async()=>{if(h.value===null||h.value<0)return;const $=_e.value[h.value];await he($)},ot=()=>{d.value=!1,S.value.length===0&&m.value&&le([t("DCENTRY_LOOKUP_INPUT_SELECT_ERROR")]),Z()},De=()=>{Y.value="",m.value="",h.value=null,y.value={label:""}},je=async()=>{if(a.hasRecentItems)try{T.value=await sr(n.value,a.objectApiName,g.value)}catch($){console.error($)}},_e=I(()=>m.value?dr(m.value,S.value):a.hasRecentItems&&T.value.length>0?[c.value,...T.value]:[]),Fe=I(()=>g.value!=="");let st;return U(m,async $=>{if(st&&clearTimeout(st),!$||$&&$.length<3){b.value=!1;return}st=setTimeout(async()=>{try{d.value=!0,b.value=!0,S.value=await ir(n.value,$,a.objectApiName,g.value)}catch(k){d.value=!1,console.error(k)}finally{b.value=!1}},Rr)}),U(Y,async $=>{if(!$)return;const k=T.value.find(O=>Y.value===O.apiName),B=S.value.find(O=>Y.value===O.apiName);if(k!==void 0){y.value=k;return}if(B!==void 0){y.value=B;return}try{y.value=await ur(n.value,$)}catch(O){console.error(O)}},{immediate:!0}),U(h,($,k)=>{if(h.value===null||$===null||($===_e.value.length&&(h.value=0),$<0&&(h.value=_e.value.length-1),(_e.value[h.value]?.isDisabled||_e.value[h.value]?.isHeader)&&(k===null||$>k?h.value++:h.value--),!u.value||!i.value))return;const B=u.value[h.value],O=B.getBoundingClientRect(),x=i.value.getBoundingClientRect();(O.bottom>=x.bottom+O.height||O.top<=x.top-O.height)&&B.scrollIntoView()}),U(l,async()=>{await je()}),($,k)=>(_(),N(re,null,[A("div",pr,[Ha(A("div",mr,[j(s(wn),{variant:"primary"})],512),[[Vn,b.value]])]),A("div",{class:Q({flex:s(o)}),onKeydown:[Re,Je(ce,["enter"])]},[$.fieldInfo.apiName==="RecordTypeId"?(_(),N("div",yr,[A("span",null,K(y.value.label||""),1)])):(_(),N("div",hr,[s(o)&&!y.value.label?(_(),N("div",br,[j(s(Ka),{"no-border-right":!0,modelValue:s(n),"onUpdate:modelValue":k[0]||(k[0]=B=>ze(n)?n.value=B:null),options:D.value,searchBar:"never",role:"combobox"},null,8,["modelValue","options"])])):H("",!0),s(Y)?(_(),N("div",{key:2,class:Q(["selected-item-container",{["bg-white"]:!a.readonly,["bg-sf-gray-neutral text-sf-gray"]:a.readonly}])},[y.value.iconName?(_(),N("div",_r,[j(Na,{iconName:y.value.iconName},null,8,["iconName"])])):H("",!0),A("span",{class:"pl-[12px] grow",title:y.value.label},K(y.value.label),9,gr),a.readonly?H("",!0):(_(),N("div",{key:1,tabindex:"0",role:"button",onClick:Ge(De,["left"]),onKeydown:Je(Ge(De,["stop"]),["enter"]),class:"selected-item"},[j(s($e),{name:"slds-icon-close"})],40,Er))],2)):(_(),N("div",{key:1,class:"flex grow",onClick:ue,ref_key:"inputRef",ref:p},[j(s(Et),{role:"input",icon:"slds-icon-search",iconPos:"right",placeholder:s(t)("DCENTRY_LOOKUP_PLACEHOLDER",[s(r)]),modelValue:m.value,"onUpdate:modelValue":k[1]||(k[1]=B=>m.value=B),onBlur:ot,onKeydown:k[2]||(k[2]=Je(B=>d.value=!1,["escape"])),"no-border-radius-left":s(o),customErrorMessage:s(z),autocomplete:"off"},null,8,["placeholder","modelValue","no-border-radius-left","customErrorMessage"])],512))])),d.value&&_e.value.length>0?(_(),N("div",{key:2,role:"listbox",ref_key:"dropdownRef",ref:i,class:"dropdown",style:sa(`top: ${s(L).top+s(L).height}px; width:${s(L).width}px; left:${s(L).left}px`)},[(_(!0),N(re,null,Oe(_e.value,(B,O)=>(_(),N("div",{key:O,ref_for:!0,ref_key:"optionRefs",ref:u,onMousedown:[Ge(x=>he(B),["left"]),k[3]||(k[3]=Ge(()=>{},["right","prevent","stop"]))],onMouseover:x=>be(O,B),onMouseout:k[4]||(k[4]=x=>h.value=null),class:Q(["flex flex-row px-4 py-2 items-center",{["min-h-[34px] cursor-default"]:B.isHeader,[`min-h-[${Fe.value?40:32}px]`]:!B.isHeader,["cursor-pointer"]:!B.isDisabled,["bg-sf-gray-neutral"]:!B.isDisabled&&h.value===O}])},[B.iconName?(_(),N("div",Nr,[B.isUtilityIcon?H("",!0):(_(),ne(Na,{key:0,iconName:B.iconName,"icon-size":18},null,8,["iconName"])),B.isUtilityIcon?(_(),ne(s($e),{key:1,name:B.iconName},null,8,["name"])):H("",!0)])):H("",!0),A("div",{class:Q(["grid row-span-2 leading-4",{["py-1"]:Fe.value}])},[B.queryPart?(_(),N("span",{key:0,class:"truncate",title:B.label},[ia(K(B.partBefore),1),A("b",null,K(B.queryPart),1),ia(K(B.partAfter),1)],8,Sr)):(_(),N("span",{key:1,class:"truncate",title:B.label},K(B.label),9,Tr)),Fe.value?(_(),N("span",Or,K(B.searchLayoutField),1)):H("",!0)],2)],42,Ir))),128))],4)):H("",!0)],34)],64))}});const Ar=lt(Cr,[["__scopeId","data-v-80a3381f"]]),Vr={class:"flex flex-col"},wr=J({__name:"MultiSelectField",props:{fieldInfo:{},defaultValue:{},picklistValues:{}},setup(e){const{t}=fe(),a=e,n=new Ue(t),l=I(()=>n.buildFieldSchema(a.fieldInfo)),r=Nt(),c=R([]),{value:o,errorMessage:i,handleChange:u,resetField:p}=Pe(()=>a.fieldInfo.apiName,l,{validateOnValueUpdate:!1,initialValue:a.defaultValue??""}),d=R(!1);we(()=>{a.defaultValue&&(b(a.defaultValue),d.value=!0)});const b=g=>{if(!g){c.value=[];return}const S=oe(g);c.value=S.split(";")},m=g=>{o.value=g.join(";"),u(g.join(";"),!0)},y=I(()=>{const g={};if(!a.picklistValues)return g;let S=null;return a.fieldInfo.controllerName&&(S=a.picklistValues.controllerValues[r.value[a.fieldInfo.controllerName]]),a.picklistValues.values.forEach(T=>{S!==null&&!T.validFor.includes(S)||(g[oe(T.value)]={label:oe(T.label)})}),g}),h=I(()=>a.fieldInfo.controllerName??"");return U(()=>r.value[h.value],(g,S)=>{c.value=[],S&&S!==g&&p()}),U(()=>a.defaultValue,g=>{b(g),d.value=!0}),U(o,g=>{g===a.defaultValue&&(d.value=!0),b(g)}),U(c,g=>{if(d.value){d.value=!1;return}m(g)}),(g,S)=>(_(),N("div",Vr,[j(s(kn),{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=T=>c.value=T),options:y.value,"available-label":s(t)("DCENTRY_MULTISELECT_AVAILABLE"),"selected-label":s(t)("DCENTRY_MULTISELECT_CHOSEN"),"has-sort":!1,"custom-error-message":s(i),disabled:!a.fieldInfo.updateable||h.value!==""&&Object.keys(y.value).length===0,"compare-function":()=>0},null,8,["modelValue","options","available-label","selected-label","custom-error-message","disabled"])]))}}),kr={class:"flex flex-col combobox-container"},xr=["title"],Dr=J({__name:"PicklistField",props:{fieldInfo:{},picklistValues:{},defaultValue:{},disabled:{type:Boolean}},emits:["change"],setup(e,{emit:t}){const{t:a}=fe(),n=e,l=t,r=new Ue(a),c=I(()=>r.buildFieldSchema(n.fieldInfo)),{value:o,errorMessage:i,handleChange:u}=Pe(()=>n.fieldInfo.apiName,c,{validateOnValueUpdate:!0,initialValue:n.defaultValue?n.defaultValue:""}),p=Nt(),d=I(()=>{let g=n.picklistValues.values;if(b.value&&ve.STATECODE!==n.fieldInfo.compoundComponentName){const T=p.value[b.value],D=oe(T);g=g.filter(W=>W.validFor.includes(n.picklistValues.controllerValues[T])?!0:W.validFor.includes(n.picklistValues.controllerValues[D]))}const S={};return S[""]=`--${a("DCENTRY_PICKLIST_NONE")}--`,g.forEach(T=>{S[T.value]=oe(T.label)}),S}),b=I(()=>n.fieldInfo.controllerName??""),m=I(()=>Object.keys(d.value).length==1),y=I(()=>n.disabled?!0:!!(n.fieldInfo.controllerName&&(!p.value[n.fieldInfo.controllerName]||m.value)));U(()=>p.value[b.value],()=>{ve.STATECODE!==n.fieldInfo.compoundComponentName&&(o.value="")}),U(()=>n.picklistValues.values,()=>{h.value&&(o.value=h.value),Object.keys(d.value).includes(o.value)||(o.value="")});const h=R("");return U(o,(g,S)=>{g!==""&&(h.value=g),!Object.keys(d.value).includes(g)&&S===""&&(o.value=""),l("change",g),u(g,!0)}),(g,S)=>(_(),N("div",kr,[j(s(Ka),{class:Q(["rounded-md",{["border-sf-error-text shadow-sf-error"]:![null,void 0,""].includes(s(i)),["border-sf-gray"]:!s(i)}]),modelValue:s(o),"onUpdate:modelValue":S[0]||(S[0]=T=>ze(o)?o.value=T:null),options:d.value,disabled:y.value,"compare-function":()=>0},null,8,["class","modelValue","options","disabled"]),A("span",{class:"text-sf-error-text",title:s(i)},K(s(i)),9,xr)]))}});const jr=lt(Dr,[["__scopeId","data-v-10226912"]]),Fr=J({__name:"TextField",props:{fieldInfo:{},defaultValue:{},noBorderRadiusLeft:{type:Boolean}},emits:["blur"],setup(e,{emit:t}){const{t:a}=fe(),n=e,l=t,r=new Ue(a),c=I(()=>r.buildFieldSchema(n.fieldInfo)),{errorMessage:o,value:i,handleChange:u,handleBlur:p,meta:d}=Pe(()=>n.fieldInfo.apiName,c,{validateOnValueUpdate:!1,initialValue:oe(n.defaultValue)??""});return U(()=>n.defaultValue,b=>{b&&(i.value=oe(b))}),(b,m)=>(_(),ne(s(Et),{role:"input",onInput:m[0]||(m[0]=y=>s(u)(y,!1)),onBlur:m[1]||(m[1]=y=>{l("blur",y),s(p)(y,!0)}),modelValue:s(i),customErrorMessage:s(o)&&s(d).touched?s(o):void 0,"no-border-radius-left":n.noBorderRadiusLeft??!1,maxlength:n.fieldInfo.length?n.fieldInfo.length:null},null,8,["modelValue","customErrorMessage","no-border-radius-left","maxlength"]))}}),Lr=J({__name:"TextareaField",props:{fieldInfo:{},defaultValue:{}},setup(e){const{t}=fe(),a=e,n=new Ue(t),l=I(()=>n.buildFieldSchema(a.fieldInfo)),{errorMessage:r,value:c}=Pe(()=>a.fieldInfo.apiName,l,{validateOnValueUpdate:!1,initialValue:oe(a.defaultValue)??""});return U(()=>a.defaultValue,o=>{o&&oe(o)}),(o,i)=>(_(),ne(s(xn),{modelValue:s(c),"onUpdate:modelValue":i[0]||(i[0]=u=>ze(c)?c.value=u:null),placeholder:"","custom-error-message":s(r),maxlength:a.fieldInfo.length?a.fieldInfo.length:null,role:"textarea"},null,8,["modelValue","custom-error-message","maxlength"]))}}),$r=J({__name:"TimeField",props:{fieldInfo:{},defaultValue:{}},emits:["blur"],setup(e,{emit:t}){const{t:a}=fe(),n=e,l=t,r=new Ue(a),c=I(()=>r.buildFieldSchema(n.fieldInfo)),o=R(""),i=R(!1),u=R(!1),{errorMessage:p,value:d,meta:b,handleChange:m,handleBlur:y}=Pe(()=>n.fieldInfo.apiName,c,{validateOnValueUpdate:!1,initialValue:n.defaultValue});return U(o,h=>{if(i.value){i.value=!1;return}if(!h){d.value="",u.value=!0;return}d.value=`${h}:00.000Z`,u.value=!0}),U(d,h=>{if(h===void 0&&b.dirty){d.value="";return}if(u.value){u.value=!1;return}o.value=(h??"").substring(0,5),i.value=!0},{immediate:!0}),(h,g)=>(_(),ne(s(Et),{onInput:g[0]||(g[0]=S=>s(m)(S,!1)),onBlur:g[1]||(g[1]=S=>{l("blur",S),s(y)(S,!0)}),role:"input",type:"time",modelValue:o.value,"onUpdate:modelValue":g[2]||(g[2]=S=>o.value=S),"custom-error-message":s(p)},null,8,["modelValue","custom-error-message"]))}}),Pr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAYFBMVEXo6/DX3ee0wdSktM2puM+6xtjP1+Pm6u/K0uDj5+6uu9HFzt7d4up8j6tofJx1iKaYqMHAytpRaItUa46LnLZugqCDlbGSo7ydrcZacJKls8hhd5f6+/z////x8/fs7/ME8NM8AAAEMklEQVR4AWIYrGAUjIJRMAoAtdlnYrMwDAZgsMzeMsMElN7/lF24jEKw/I3nf/1G8kzqCwAZhNF/Gx8WMvaYklhISLPEY4lS+JH6HkMewELwag4BoCirGr401r9JGlhlHkcAUCGiauGLyC39lPClLroeQLJKSGFA3BKkf9dO8/F7hYgFAKulSwGf1ADfwq9G+H4YZ9/iOPTzaOl+asbHL0pDzAsYcTFqM9cSTqTIwlDux0csoOEsItD4owOOQeGihIBVwYCrAeweIxojKyAyAewSClwxK2hxNYLdiCv3FimwGnADDStA42pyClC8rSxB4Y8WbI4fJ/QYBHRo9MBQ4Y8KfF5AvZQwDsDSbfUmzNtgKJUq+wcwFcp0SHp2SQrudDWi6jTI3LNq4G8IVoNeeAxtX3Vd2VV9O2i4Ftsvg2t12+FB2V9nWJoUwxXdTnhharVrkxIJZ3WFL3XnlRw6FjB0eKurYe/+Xo7kef2hVX+aZ34B7YgMFRzIhL2ECuSpNK8E/3yKHU1xkoRpfy6rg72UuYnP7Z9m+jIHp4kvWAsptfanJqOZ8Khl7IX88qIqg2HEVf+kxbPFIw07CWMNTaYrHtEcDxMaYzrT4oELE18+rNMcXDUooIX/qJSJFLRI8duzOzcpsEzB9pgaZ1rNuaj7otBvZOjvPMrw52W6kt4V2Glx0dKdAhELItO/3nKmJrBT4kLQHW9EfKyzMcImtCyiGo2QbqWoIqLk/JDNLPt4QCOhW/NU06futNsaS0CBiKUYEd/o3nO/Ysv7reb/moKcwtEWYOS4uA/IYaMQOyJK+iexmDWhbwOS43NzIAc1YoeI9f1pJA8BD3IQY5uYgJutLA6rVJCDWdB8aFHjXcgOAQE5QlSW087fWrQPmOsiJAa1X6a+5U2hdgE9oopYAb3t6RLsL4N0v8Y1XWimyT8EDPs5vu9Rsa0igZ96OksU4rQPUJp/Kdfbh368Cqh/HYZY2B934a6ElhYNvtgU1fE4n7Fm/GwkwNCqoMU8IirvVUCzHXsV42kXbbPQlmRk45TRhQER1XYYeppRwH4hdWThHw+s+FSA7QvCkyyaQs/bmjpvMts8N+TgKbe/Y3/LjB3GTwHYP22KmwT7+DJ3+SaezcThSeb45wTxJDsfVtL3GKJdgvSt7QnY428SsX8f0I05hk2ae1xJAJsgoReesYSNSDwHGeyk4ZNO5jyAvSbyHIQSjtLMf5vXsZ95KOBAhp7B79CZFMEnkcKJW3v8FBy4FxDDn8g8rgb+TMCb5EjAnxKR2xZzJxL38d1rsPfnf/7oGICN1nCr+Zv1qYtJIaqpuAuJ3X8yNR6VQkMV8Jpv/w/jJT3hzvS6iDRhnJ9nekRkJjT2F9GFCX8p4aX8Dwqo8KR3LCG6K0ArPFEPeOVyFkJ+AUbvdrAKuKHwwgSvpN7OByVuC5LwscEmAAAAAElFTkSuQmCC",Ur={class:"flex gap-1 py-2px"},Mr=["src","alt"],Br=["title"],dn=J({__name:"UserReferenceField",props:{userName:{},userId:{}},setup(e){const t=e,a=R(Pr);we(async()=>{const l=await tt.getUserProfilePhoto(t.userId,window.__SESSION_ID);l&&l.photoVersionId&&l.smallPhotoUrl&&(a.value=l.smallPhotoUrl)});const n=I(()=>oe(t.userName));return(l,r)=>(_(),N("div",Ur,[A("img",{class:"w-6 h-6 rounded-full",src:a.value,alt:n.value},null,8,Mr),A("div",{title:n.value},K(n.value),9,Br)]))}}),Yr=["id"],Hr=["for"],Wr={key:0,class:"text-red-500"},Kr=["title"],zr={class:"basis-2/3 grow"},Gr={key:0},qr={key:1,class:"flex flex-col"},Jr=["title"],Xr=["title"],Qr={key:2},Zr={key:3},eo={key:4},to={key:5,class:"flex"},ao={key:6,class:"flex flex-col"},no={key:7,class:"flex flex-col"},lo={key:8,class:"flex flex-col"},ro={key:9},oo={key:10},so={key:11,class:"flex flex-col"},io={key:12},yt=J({__name:"Field",props:{label:{},fieldInfo:{},fieldValues:{},objectApiName:{},required:{type:Boolean},density:{},options:{},defaultValue:{},disabled:{type:Boolean},picklistValues:{},hasLabel:{type:Boolean,default:!0},validateOnBlur:{type:Boolean,default:!0},readonlyLayout:{type:Boolean}},emits:["update"],setup(e,{emit:t}){const{t:a}=fe(),n=e,l=Nt(),r=t,c=b=>{r("update",n.fieldInfo.apiName,b,n.fieldInfo.custom)},o=I(()=>P.REFERENCE===n.fieldInfo.dataType&&!n.fieldInfo.updateable&&n.fieldInfo.relationshipName?n.fieldValues[n.fieldInfo.relationshipName].displayValue:n.defaultValue!==void 0&&n.defaultValue!==null&&n.fieldInfo.dataType?n.defaultValue:!n.fieldInfo.updateable&&n.fieldValues[n.fieldInfo.apiName]?.displayValue?n.fieldValues[n.fieldInfo.apiName].displayValue:n.fieldValues[n.fieldInfo.apiName]?.value?n.fieldValues[n.fieldInfo.apiName].value:""),i=I(()=>n.fieldInfo?.relationshipName?.endsWith("__r")??!1),u=I(()=>!n.fieldInfo?.updateable&&![P.BOOLEAN].includes(n.fieldInfo?.dataType)&&!i.value||n.readonlyLayout),p=I(()=>P.BOOLEAN!==n?.fieldInfo?.dataType&&d.value.required&&n?.fieldInfo?.apiName.toLowerCase()!=="ownerid"),d=I(()=>{const b=n.fieldInfo;if(n.required)if(P.PICKLIST===b.dataType&&b.controllerName&&n.picklistValues){const m=n.picklistValues.controllerValues[l.value[b.controllerName]];let y=!1;n.picklistValues.values.forEach(h=>{h.validFor.includes(m)&&(y=!0)}),b.required=y}else b.required=!0;return b});return(b,m)=>(_(),N("div",{class:Q(["flex outline-none",{["flex-row"]:s(Ke)===n.density,["flex-col"]:s(Ve)===n.density,["col-span-full"]:n.fieldInfo.dataType===s(P).TEXTAREA&&s(Ve)===n.density}]),id:n.fieldInfo.apiName,tabindex:"0"},[n.hasLabel?(_(),N("label",{key:0,for:n.fieldInfo.apiName,class:"basis-1/3 flex"},[p.value?(_(),N("span",Wr,"*\xA0")):H("",!0),A("span",{title:s(oe)(n.label),class:"flex pr-4"},K(s(oe)(n.label)),9,Kr),n.fieldInfo.inlineHelpText?(_(),N("span",{key:1,class:Q({["mt-1 mr-1"]:s(Ke)===n.density,flex:s(Ve)===n.density})},[j(zl,{message:n.fieldInfo.inlineHelpText},null,8,["message"])],2)):H("",!0)],8,Hr)):H("",!0),A("div",zr,[n.fieldInfo.apiName==="OwnerId"&&n.fieldInfo!==null?(_(),N("div",Gr,[j(dn,{"user-name":n.fieldValues?.Owner?.displayValue??"","user-id":n.fieldValues?.OwnerId?.value??""},null,8,["user-name","user-id"])])):u.value?(_(),N("div",qr,[A("div",{class:"truncate h-[24px] flex items-end",title:s(oe)(o.value)},K(s(oe)(o.value)),9,Jr),n.fieldInfo.calculated?(_(),N("div",{key:0,class:"truncate text-[12px] italic",title:s(a)("DCENTRY_FORMULA_FIELD_CALCULATE_MESSAGE")},K(s(a)("DCENTRY_FORMULA_FIELD_CALCULATE_MESSAGE")),9,Xr)):H("",!0)])):s(P).TEXTAREA===n.fieldInfo.dataType?(_(),N("div",Qr,[j(Lr,{"field-info":d.value,"default-value":o.value,id:n.fieldInfo.apiName},null,8,["field-info","default-value","id"])])):[s(P).DOUBLE,s(P).INT].includes(n.fieldInfo.dataType)?(_(),N("div",Zr,[j(Da,{"field-info":d.value,"default-value":o.value?String(o.value):void 0},null,8,["field-info","default-value"])])):[s(P).PERCENT].includes(n.fieldInfo.dataType)?(_(),N("div",eo,[j(Da,{"field-info":d.value,formatter:s(Yl),"default-value":o.value?String(o.value):void 0},null,8,["field-info","formatter","default-value"])])):s(P).BOOLEAN===n.fieldInfo.dataType?(_(),N("div",to,[j(er,{"field-info":d.value,"default-value":o.value===""?!1:o.value},null,8,["field-info","default-value"])])):s(P).REFERENCE===b.fieldInfo.dataType?(_(),N("div",ao,[j(Ar,{"object-api-name":n.objectApiName,"field-info":d.value,hasRecentItems:!0,readonly:n.fieldInfo.apiName==="RecordTypeId","default-value":o.value===""?void 0:o.value},null,8,["object-api-name","field-info","readonly","default-value"])])):s(P).PICKLIST===n.fieldInfo.dataType?(_(),N("div",no,[j(jr,{"field-info":d.value,"default-value":o.value,options:n.options,disabled:n.disabled??!1,"picklist-values":n.picklistValues??s(va),onChange:c},null,8,["field-info","default-value","options","disabled","picklist-values"])])):s(P).MULTIPICKLIST===n.fieldInfo.dataType?(_(),N("div",lo,[j(wr,{"field-info":d.value,"default-value":o.value,"picklist-values":n.picklistValues},null,8,["field-info","default-value","picklist-values"])])):s(P).DATE===n.fieldInfo.dataType?(_(),N("div",ro,[j(tr,{"field-info":d.value,"default-value":o.value===""?void 0:o.value},null,8,["field-info","default-value"])])):s(P).TIME===n.fieldInfo.dataType?(_(),N("div",oo,[j($r,{"field-info":d.value,"default-value":o.value===""?void 0:o.value},null,8,["field-info","default-value"])])):s(P).DATETIME===b.fieldInfo.dataType?(_(),N("div",so,[j(or,{"field-info":d.value,"default-value":o.value===""?void 0:o.value},null,8,["field-info","default-value"])])):(_(),N("div",io,[j(Fr,{"field-info":d.value,"default-value":n.defaultValue??o.value,id:n.fieldInfo.apiName},null,8,["field-info","default-value","id"])]))])],10,Yr))}}),uo=J({__name:"CompoundField",props:{objectApiName:{},item:{},objectInfo:{},fieldValues:{},picklistValues:{}},setup(e){const t=e;return(a,n)=>(_(!0),N(re,null,Oe(t.item.layoutComponents,l=>(_(),ne(yt,{label:l.label,"object-api-name":t.objectApiName,fieldInfo:t.objectInfo[l.apiName],density:s(Ve),"field-values":t.fieldValues,"picklist-values":t.picklistValues[l.apiName],required:t.objectInfo[l.apiName].required},null,8,["label","object-api-name","fieldInfo","density","field-values","picklist-values","required"]))),256))}}),fn="__",co=e=>{const t=R({}),a=R(va);return{statePicklistValues:a,updateStatePicklist:(l,r,c)=>{let o=l.replace("CountryCode__s","StateCode__s");if(l.endsWith("__ps")&&(o=l.replace("CountryCode__ps","StateCode__ps")),c&&e[o]){const u=e[o].controllerValues[r],p=e[o].values.filter(d=>d.validFor.includes(u));a.value={...e[o],values:p};return}const i=`${fn}${r}`;t.value[l]!==void 0&&t.value[l]===r||(t.value[l]=r,a.value=e[i]??va)}}},fo=(e,t)=>Object.keys(e).includes(t)?e[t].compoundComponentName===ve.COUNTRYCODE:!1,vo=(e,t)=>Object.keys(e).includes(t)?e[t].compoundComponentName===ve.STATECODE:!1,po=e=>e.length===1?e[0].apiName:e.find(t=>{const a=t?.apiName?.endsWith("Street__s"),n=t?.apiName?.endsWith("Street__ps"),l=t?.apiName?.endsWith("Street");return a||n||l})?.apiName??"",mo={key:0},yo=J({__name:"AddressCompoundField",props:{compoundFieldApiName:{},objectApiName:{},item:{},objectInfo:{},fieldValues:{},picklistValues:{},readonly:{type:Boolean}},setup(e){const t=e,a=new Set(t.item.layoutComponents.map(u=>u.apiName)),n=new Map,{statePicklistValues:l,updateStatePicklist:r}=co(t.picklistValues),c=R(ve.COUNTRYCODE);we(async()=>{Object.values(i.value).forEach(async u=>{if(u.compoundFieldName===t.compoundFieldApiName&&a.has(u.apiName)&&(u.compoundComponentName===ve.COUNTRYCODE||u.compoundComponentName===ve.STATECODE)){u.custom&&u.apiName.includes(ve.COUNTRYCODE)&&(c.value=u.apiName),n.set(u.compoundComponentName,u.apiName);const p=t.item.layoutComponents.find(m=>m.apiName===u.apiName),d=u.compoundComponentName.replace(ve.CODE,""),b=Object.values(i.value).find(m=>m.compoundFieldName===t.compoundFieldApiName&&m.compoundComponentName===d);b!==void 0&&p!==void 0&&(await Ae(),p.label=b.label),u.compoundComponentName===ve.COUNTRYCODE&&t.fieldValues[u.apiName]?.value&&r(u.apiName,t.fieldValues[u.apiName]?.value,u.custom)}})});const o=I(()=>po(t.item.layoutComponents)),i=I(()=>t.objectInfo);return(u,p)=>(_(),N("div",{class:Q(["grid",{["grid-cols-2 gap-2"]:!t.readonly}])},[(_(!0),N(re,null,Oe(t.item.layoutComponents,d=>(_(),N(re,null,[d.componentType==="EmptySpace"?(_(),N("div",mo)):s(fo)(i.value,d.apiName)?(_(),ne(yt,{key:1,"object-api-name":t.objectApiName,label:d.label,"field-info":i.value[d.apiName],density:s(Ve),"field-values":t.fieldValues,"picklist-values":t.picklistValues[c.value],"has-label":!t.readonly,onUpdate:s(r)},null,8,["object-api-name","label","field-info","density","field-values","picklist-values","has-label","onUpdate"])):s(vo)(i.value,d.apiName)?(_(),ne(yt,{key:2,label:d.label,"object-api-name":t.objectApiName,"field-info":i.value[d.apiName],density:s(Ve),"field-values":t.fieldValues,"picklist-values":s(l),"has-label":!t.readonly},null,8,["label","object-api-name","field-info","density","field-values","picklist-values","has-label"])):(_(),ne(yt,{key:3,label:d.label,"object-api-name":t.objectApiName,fieldInfo:i.value[d.apiName],density:s(Ve),"field-values":t.fieldValues,"has-label":!t.readonly,class:Q({["col-span-full"]:o.value===d.apiName})},null,8,["label","object-api-name","fieldInfo","density","field-values","has-label","class"]))],64))),256))],2))}}),ho=["title"],bo={class:"flex"},_o={key:1,class:"py-2px"},go=J({__name:"SystemInfoCompoundField",props:{item:{},objectInfo:{},fieldValues:{},density:{}},setup(e){const t=e,a=t.objectInfo[t.item.layoutComponents[0].apiName].relationshipName;return(n,l)=>(_(),N("div",{class:Q(["flex",{["flex-row"]:s(Ke)===t.density,["flex-col"]:s(Ve)===t.density}])},[A("div",{class:"basis-1/3",title:s(oe)(t.item.label)},K(s(oe)(t.item.label)),9,ho),A("div",bo,[(_(!0),N(re,null,Oe(t.item.layoutComponents,r=>(_(),N(re,null,[s(P).REFERENCE===t.objectInfo[r.apiName].dataType?(_(),ne(dn,{key:0,"user-name":t.fieldValues[s(a)]?.displayValue??"","user-id":t.fieldValues[`${s(a)}Id`]?.value??""},null,8,["user-name","user-id"])):s(P).DATETIME===t.objectInfo[r.apiName].dataType?(_(),N("div",_o," , "+K(t.fieldValues[r.apiName]?.displayValue),1)):H("",!0)],64))),256))])],2))}}),Eo="CreatedBy",Io="LastModifiedBy",No=["title"],So={key:0,class:"text-sf-error"},To=J({__name:"CompoundFieldWrapper",props:{objectApiName:{},item:{},objectInfo:{},fieldValues:{},picklistValues:{},density:{}},setup(e){const t=e,a=t.objectInfo[t.item.layoutComponents[0].apiName].compoundFieldName,n=t.objectInfo[t.item.layoutComponents[0].apiName].relationshipName,l=a!==null&&t.objectInfo[a].dataType===ve.ADDRESS,r=n===Eo||n===Io,c=I(()=>!r),o=I(()=>!t.objectInfo[t.item.layoutComponents[0].apiName].updateable);return(i,u)=>(_(),N("div",{class:Q({["grid grid-cols-3"]:t.density===s(Ke)&&!s(l)&&!s(r)})},[c.value?(_(),N("div",{key:0,title:s(oe)(t.item.label),class:Q(["font-bold mb-[2px]",{["col-span-1 row-span-full"]:t.density===s(Ke)&&!s(l)&&!s(r)}])},[t.item.required?(_(),N("span",So,"*")):H("",!0),ia(" "+K(s(oe)(t.item.label)),1)],10,No)):H("",!0),A("div",{class:Q({["col-span-2"]:t.density===s(Ke)&&!s(l)&&!s(r)})},[s(l)?(_(),ne(yo,{key:0,"compound-field-api-name":s(a),"object-api-name":t.objectApiName,item:i.item,"object-info":t.objectInfo,"field-values":t.fieldValues,"picklist-values":t.picklistValues,readonly:o.value},null,8,["compound-field-api-name","object-api-name","item","object-info","field-values","picklist-values","readonly"])):s(r)?(_(),ne(go,{key:1,item:i.item,"object-info":t.objectInfo,"field-values":t.fieldValues,density:t.density},null,8,["item","object-info","field-values","density"])):(_(),ne(uo,{key:2,"object-api-name":t.objectApiName,item:i.item,"object-info":t.objectInfo,"field-values":t.fieldValues,"picklist-values":t.picklistValues},null,8,["object-api-name","item","object-info","field-values","picklist-values"]))],2)],2))}}),Oo=["onKeydown"],Ro=["onKeydown"],Co={key:2},Ao={key:3},Vo=J({__name:"LayoutItemComponent",props:{layoutItem:{},objectApiName:{},objectInfo:{},fieldValues:{},picklistValues:{},density:{}},setup(e){const t=e,a=Xe(rt),n=Nt(),l=R([]);we(()=>{l.value=[...t.layoutItem.layoutComponents];const m=t.objectInfo[o.value]?.compoundFieldName;Object.values(t.objectInfo).forEach(y=>{y.compoundFieldName===m&&(y.compoundComponentName===ve.LATITUDE||y.compoundComponentName===ve.LONGITUDE)&&l.value.push({apiName:y.apiName,label:"",componentType:""})})});const r=()=>l.value.forEach(m=>{a?.setFieldValue(m.apiName,void 0)}),c=()=>l.value.forEach(m=>{const y=t.objectInfo[m.apiName];y.controllerName&&a?.resetField(y.controllerName),a?.resetField(m.apiName)}),o=I(()=>t.layoutItem.layoutComponents[0].apiName),i=I(()=>n.value[o.value]),u=I(()=>i.value&&[P.TIME,P.DATE,P.DATETIME].includes(t.objectInfo[o.value]?.dataType)),p=I(()=>d.value?!1:l.value.some(m=>a?.isFieldDirty(m.apiName))),d=I(()=>t.layoutItem.layoutComponents[0].componentType==="EmptySpace"),b=I(()=>!t.layoutItem.editableForNew||!t.layoutItem.editableForUpdate);return(m,y)=>(_(),N("div",{class:Q([{["bg-sf-yellow"]:p.value},"relative p-1 h-full"])},[u.value?(_(),N("div",{key:0,onClick:r,onKeydown:Je(Ge(r,["stop","prevent"]),["enter"]),tabindex:"1",role:"button",class:Q(["clear-icon",{absolute:s(Ve)===m.density,["flex flex-row-reverse"]:s(Ke)===m.density,["mr-5"]:p.value}]),"aria-label":"clear-icon"},[j(s($e),{name:"slds-icon-clear",size:12})],42,Oo)):H("",!0),p.value?(_(),N("div",{key:1,onClick:c,onKeydown:Je(Ge(c,["stop","prevent"]),["enter"]),tabindex:"0",role:"button",class:Q(["undo-icon plauti_undo",{absolute:s(Ve)===m.density,["flex flex-row-reverse"]:s(Ke)===m.density}]),"aria-label":"undo-icon"},[j(s($e),{name:"slds-icon-undo",size:12})],42,Ro)):H("",!0),t.layoutItem.layoutComponents.length>1?(_(),N("div",Co,[j(To,{"object-api-name":t.objectApiName,item:t.layoutItem,"object-info":t.objectInfo,"field-values":t.fieldValues,"picklist-values":t.picklistValues,density:t.density},null,8,["object-api-name","item","object-info","field-values","picklist-values","density"])])):d.value?(_(),N("div",Ao)):o.value!==null&&Object.keys(m.objectInfo).includes(o.value)?(_(),ne(yt,{key:4,"object-api-name":t.objectApiName,label:t.layoutItem.label,"field-info":t.objectInfo[o.value],"field-values":t.fieldValues,"picklist-values":t.picklistValues[o.value],density:t.density,required:t.layoutItem.required,"readonly-layout":b.value},null,8,["object-api-name","label","field-info","field-values","picklist-values","density","required","readonly-layout"])):H("",!0)],2))}});const wo=lt(Vo,[["__scopeId","data-v-9821c6ab"]]);var Ee=(e=>(e.ERROR="Error",e.WARNING="Warning",e))(Ee||{}),et=(e=>(e.ALERT="Alert",e.BLOCK="Block",e))(et||{});const Tt=Pt("duplicate-store",()=>{const e=R(et.ALERT),t=ht({duplicateCount:0,noScenario:!1,searchResult:{},objectMeta:{},fieldMeta:{},resultFields:{}});return{duplicateSearchResult:t,doDuplicateSearch:async n=>{const{duplicateCount:l,noScenario:r,searchResult:c,objectMeta:o,fieldMeta:i,resultFields:u}=await _t.doDuplicateSearch(n);t.duplicateCount=l,t.noScenario=r??!1,t.searchResult=c,t.objectMeta=o,t.fieldMeta=i,t.resultFields=u},popoverType:e}});var vn=(e=>(e.VIEW_ONE="ViewOne",e.VIEW_TWO="ViewTwo",e))(vn||{});const ko=async(e,t,a,n)=>{let l;return t?l=await tt.getEditRecordLayout(e,t,a,n):l=await tt.getCreateRecordLayout(e,a,n),l.theme=await tt.getActiveTheme(n),l.picklistValues={},l},xo=async(e,t,a)=>{const n=await tt.getAllPicklistValues(e,t,a),l=await tt.getAllPicklistValues("User","012000000000000AAA",a);if(l?.picklistFieldValues?.CountryCode&&l?.picklistFieldValues?.StateCode){const r=l.picklistFieldValues.CountryCode;n.picklistFieldValues.CountryCode=r,l.picklistFieldValues.StateCode.values.forEach(c=>{const o=`${fn}${r.values[c.validFor[0]].value}`;n.picklistFieldValues[o]||(n.picklistFieldValues[o]={controllerValues:{},defaultValue:{attributes:null,label:"",validFor:[],value:""},url:"",values:[]}),n.picklistFieldValues[o].values.push(c)})}return n},ma={getAllPicklistValues:xo,getLayout:ko},Do=async(e,t)=>{if(Ft===e)try{return await _t.isPersonAccount(t)}catch(a){console.error(a)}return!1},jo=async e=>{try{const t=await ma.getLayout(Vt,"","",window.__SESSION_ID);t?.objectInfos?.[Vt]?.fields&&Object.keys(t.objectInfos[Vt].fields).forEach(a=>{const n=t.objectInfos[Vt].fields[a];a in e.objectInfos[Ft].fields&&n.extraTypeInfo?.includes("Person")&&(e.objectInfos[Ft].fields[a]=n)})}catch(t){console.error(t)}finally{return e}};var ut=(e=>(e.ERROR="error",e))(ut||{});const Mt=Pt("notifications",()=>{const e=R({type:"error",message:""}),t=R(!1);return{notification:e,isActive:t,emit:l=>{e.value=l,t.value=!0},clear:()=>{t.value=!1}}}),{t:Fo}=It.global,Bt=Pt("layout",()=>{const e=R(""),t=R(""),a=R(!1),n=R(!1),l=R(Ve),r=R(),{emit:c}=Mt(),o=(u,p,d)=>{e.value=d,u?.layout.mode==="Create"&&!u?.objectInfos?.[p]?.recordTypeInfos?.[d]?.master&&(t.value=u.objectInfos[p].recordTypeInfos[d].name)};return{initLayout:async u=>{const{objectApiName:p,recordId:d,recordTypeId:b,parentId:m,parentObjectName:y}=u;let h=await ma.getLayout(p,d,b,window.__SESSION_ID);if(h&&h.record?.fields&&h.objectInfos?.[p]?.fields&&h.objectInfos?.[p]?.defaultRecordTypeId&&h.objectInfos?.[p]?.recordTypeInfos){const g=d?h.record.recordTypeId:b;n.value=await Do(p,g),n.value&&(h=await jo(h)),h.layout.mode==="Create"?o(h,p,b??h.objectInfos?.[p]?.defaultRecordTypeId):b?o(h,p,b):o(h,p,h.record?.recordTypeInfo?.recordTypeId??h.objectInfos?.[p]?.defaultRecordTypeId);const S=Object.keys(h.objectInfos?.[p]?.recordTypeInfos).filter(W=>h.objectInfos?.[p]?.recordTypeInfos[W].available);a.value=S.length>1;const T=await ma.getAllPicklistValues(p,e.value,window.__SESSION_ID);h.picklistValues=T.picklistFieldValues;let D="";if(m&&y){let W=!1;y.endsWith("__c")&&(W=!0),y.endsWith("__pc")&&(W=!0),D=`${y}${W?"":"Id"}`}D&&h.record.fields[D]&&(h.record.fields[D].value=m),h.record.fields.RecordTypeId&&b&&(h.record.fields.RecordTypeId.value=b),h.theme&&(l.value=h.theme.density===vn.VIEW_ONE?Ve:Ke)}else c({type:ut.ERROR,message:Fo("DCENTRY_ERROR_LAYOUT_INCOMPLETE",[p])});r.value=h},layout:r,recordTypeId:Ze(e),recordTypeName:Ze(t),hasMultipleRecordTypes:Ze(a),isPersonAccount:Ze(n),density:Ze(l)}}),ct=Pt("dc-entry",()=>{const e=R(""),t=R(""),a=R(""),n=R(""),l=R(""),r=R(!1),c=R({hasOverrideAccess:!1,duplicatePreventionEnabled:!1,maxDupesPerPage:5,duplicateErrorMessage:"",preventionOnAllFields:!0,openRecordInNewTab:!0,configuredScenarioFields:[],prefillParentId:!0}),o=Bt(),{layout:i}=Se(o),u=I(()=>{if(!(!e.value||!i.value?.objectInfos[e.value]))return i.value?.objectInfos[e.value]?.keyPrefix}),p=I(()=>i.value?i.value.record.fields:{}),d=I(()=>!i.value||!e.value?{}:i.value.objectInfos[e.value].fields),b=I(()=>i.value&&i.value.layout.saveOptions&&i.value.layout.saveOptions.length>0?i.value.layout.saveOptions[0]:{}),m=I(()=>b.value?.defaultValue??!1);return{fieldValues:p,objectInfo:d,assignmentRuleData:b,assignmentRuleEnabled:m,objectApiName:e,objectPrefix:u,recordId:t,isConsoleNavigation:r,experienceUrl:a,cancelUrl:n,successUrl:l,dcEntrySettings:c}}),Ot=Symbol("formErrors"),Lo={},$o={class:"grid grid-cols-2 min-h-96 gap-6"},Po=A("div",{class:"h-fit flex flex-col gap-2 py-8 px-6 border-b border-sf-gray-skeleton-border"},[A("div",{class:"bg-sf-gray-neutral h-2 w-1/6 rounded animate-pulse"}),A("div",{class:"bg-sf-gray-skeleton w-1/2 h-2 rounded animate-pulse"})],-1),Uo=[Po];function Mo(e,t){return _(),N("div",$o,[(_(),N(re,null,Oe(26,a=>A("div",null,Uo)),64))])}const Bo=lt(Lo,[["render",Mo]]),qe="topPageErrors",Yo={key:0},Ho={class:"pb-4"},Wo=["title"],Ko={class:"flex col-span-full gap-6"},zo={class:"w-1/2 flex-1"},Go=J({__name:"DcEntryBody",setup(e){const{t}=fe(),a=Dn(),n=Xe(rt),l=Xe(Ot),r=Bt(),{recordTypeId:c,recordTypeName:o,hasMultipleRecordTypes:i,density:u,layout:p,isPersonAccount:d}=Se(r),b=ct(),{objectApiName:m,recordId:y,objectInfo:h,fieldValues:g,dcEntrySettings:S}=Se(b),T=Mt(),D=Tt(),W=gt();we(async()=>{const z=new Date().getTime();b.objectApiName=a.params.objectName,b.recordId=a.params.recordId??"",b.isConsoleNavigation=!!a.query.IsConsole,b.experienceUrl=a.query.ExperienceURL??"",b.successUrl=a.query.SuccessUrl??"",b.cancelUrl=a.query.CancelUrl??"";const Y=a.query.DefaultValues??"",Z=a.params.recordTypeId,le=a.query.ParentId??"";let L=a.query.ParentObjectName??"",G=m.value;if(le&&L==="")try{L=await _t.getObjectNameByPrefix(le.substring(0,3))}catch(ue){console.error(ue)}try{await r.initLayout({objectApiName:m.value,recordId:y.value,recordTypeId:Z,parentId:le,parentObjectName:L}),G=d.value?pa:m.value,n.setFieldValue("recordTypeId",c.value),n.setFieldValue("recordTypeName",o.value),n.setFieldValue("hasMultipleRecordTypes",i.value),n.setFieldValue("objectName",m.value),n.setFieldValue("adjustedObjectName",G),n.setFieldValue("Id",y.value),n.meta.value.initialValues=n.controlledValues.value}catch{T.emit({type:ut.ERROR,message:t("DCENTRY_ERROR_LAYOUT_LOAD",[m.value])})}try{if(Y){const ue=JSON.parse(Y);Object.entries(ue).forEach(([Re,he])=>{n.setFieldValue(Re,he)})}}catch(ue){T.emit({type:ut.ERROR,message:`${t("DCENTRY_URLADDRESSABLE_DEFAULT_VALUES_ERROR")}: ${ue}`})}try{if(b.dcEntrySettings=await _t.getDcEntrySettings(G),!S.value.prefillParentId){let ue="";if(le&&L){let Re=!1;L.endsWith("__c")&&(Re=!0),L.endsWith("__pc")&&(Re=!0),ue=`${L}${Re?"":"Id"}`,n.resetField(ue,{value:""})}}}catch(ue){T.emit({type:ut.ERROR,message:`${t("DCENTRY_ERROR_SETTINGS_LOAD",[G])}: ${ue}`})}W.recordEvent("DC Entry - Loaded",{load_time:new Date().getTime()-z,object_name:G,is_vue:!0}),W.persist()}),U(()=>n.errors.value,z=>{l.formErrorsActions.setFormErrors(z)});const te=R();return U(()=>n.controlledValues.value,(z,Y)=>{if(!z||jn(n.meta.value.initialValues)===z)return;if(n.setFieldError(qe,""),!S.value.preventionOnAllFields){const le=Object.keys(z).filter(G=>z[G]!==Y[G]),L=[];if(le.forEach(G=>{L.push(S.value.configuredScenarioFields.includes(G))}),!L.every(G=>G))return}te.value&&clearTimeout(te.value);const Z=d.value?pa:m.value;te.value=setTimeout(()=>{D.doDuplicateSearch({objectName:Z,recordId:y.value,recordTypeId:c.value,fieldValues:z})},500)}),(z,Y)=>s(p)?(_(),N("div",Yo,[(_(!0),N(re,null,Oe(s(p).layout.sections,Z=>(_(),N("div",Ho,[Z.useHeading?(_(),N("div",{key:0,title:s(oe)(Z.heading),class:"flex items-center bg-sf-gray-neutral rounded h-9 px-3 text-xl leading-9"},K(s(oe)(Z.heading)),9,Wo)):H("",!0),A("div",{class:Q(["grid text-base pt-8px px-[30px] mb-5",{[`grid-cols-${Z.columns}`]:!0}])},[(_(!0),N(re,null,Oe(Z.layoutRows,le=>(_(),N("div",Ko,[(_(!0),N(re,null,Oe(le.layoutItems,L=>(_(),N("div",zo,[j(wo,{"layout-item":L,"object-api-name":s(m),"field-values":s(g),"object-info":s(h),"picklist-values":s(p).picklistValues,density:s(u)},null,8,["layout-item","object-api-name","field-values","object-info","picklist-values","density"])]))),256))]))),256))],2)]))),256))])):(_(),ne(Bo,{key:1}))}}),{t:qo}=It.global,{objectInfo:$a,assignmentRuleEnabled:Jo,isConsoleNavigation:Xo,experienceUrl:Pa,successUrl:Ua,dcEntrySettings:Ma}=Se(ct()),kt=Tt(),{popoverType:Qo}=Se(kt),Zo=Mt(),Lt=gt(),es=async e=>{const{values:t,ctx:a,saveAndNew:n,saveAnyway:l,errors:r,formErrorsActions:c}=e;if(t.objectName===void 0||t.Id===void 0)return;try{await kt.doDuplicateSearch({objectName:t.adjustedObjectName,recordId:t.Id,recordTypeId:t.recordTypeId,fieldValues:t})}catch(i){console.error(i)}if(Ma.value.duplicatePreventionEnabled&&kt.duplicateSearchResult.duplicateCount>0){if(Qo.value=et.BLOCK,!l){Lt.recordEvent("DC Entry - Error triggered after save",{error_details:`Duplicate(s) found: ${kt.duplicateSearchResult.duplicateCount}`}),Lt.persist();return}if(!Ma.value.hasOverrideAccess)return}a.setFieldError(qe,"");let o=null;c.setFormErrors({});try{o=await _t.saveOrUpdateRecord({recordId:t.Id,recordTypeId:t.recordTypeId,objectName:t.adjustedObjectName,fieldValues:t,assignmentRuleEnabled:Jo.value})}catch(i){let u=i;Zo.emit({type:ut.ERROR,message:u})}if(o!==null){if(o.ok){if(Ua.value&&(window.parent.location.href=Ua.value),Pa.value){window.parent.location.href=`${Pa.value}/s/detail/${o.recordId}`;return}const i=`/lightning/o/${t.objectName}/new`,u=`/lightning/r/${t.objectName}/${o.recordId}/view`,p=qo("DCENTRY_SUCCESSFULL_SAVE",[o.objectLabel,o.recordName]);if(Xo.value){const b=t.hasMultipleRecordTypes&&t.recordTypeId?`${i}?recordTypeId=${t.recordTypeId}`:i;at.eventToSf({redirect:{isConsole:!0,saveAndNewUrl:b,recordPageUrl:u,saveAndNew:n,message:p}});return}const d=t.hasMultipleRecordTypes?"?useRecordTypeCheck=1":"";at.eventToSf({redirect:{recordId:o.recordId,saveAndNew:n,url:`${i}${d}`,message:p}});return}if(o.errorMessage!==void 0&&o.fieldErrors!==void 0&&Object.keys(o.fieldErrors).length===0)a.setFieldError(qe,o.errorMessage);else if(o.fieldErrors!==void 0)for(const i in o.fieldErrors)if(i in $a.value)a.setFieldError(i,o.fieldErrors[i]);else{const u=Object.values($a.value).find(p=>i===p.label);u&&a.setFieldError(u.apiName,o.fieldErrors[i])}c.setFormErrors(r)}},wt=e=>{const{formErrorsActions:t,errors:a,setFieldError:n}=e;n(qe,""),t.setFormErrors(a),Lt.recordEvent("DC Entry - Error triggered after save",{error_details:JSON.stringify(a)}),Lt.persist()},ra=R(!1),ts=()=>{const e=Xe(Ot),t=Xe(rt),a=gt(),n=async u=>{const p=new Date().getTime();ra.value=!0,await es(u),ra.value=!1,a.recordEvent(`DC Entry - ${u.saveAndNew?"Save and New Button Clicked":"Save Button Clicked"}`,{time_to_save:new Date().getTime()-p,is_vue:!0}),a.persist()},l=t?.handleSubmit(async(u,p)=>{await n({values:u,ctx:p,errors:t?.errors.value,formErrorsActions:e.formErrorsActions,saveAnyway:!1,saveAndNew:!1})},()=>{wt({formErrorsActions:e.formErrorsActions,errors:t?.errors.value,setFieldError:t?.setFieldError})}),r=t?.handleSubmit(async(u,p)=>{await n({values:u,ctx:p,errors:t?.errors.value,formErrorsActions:e.formErrorsActions,saveAnyway:!1,saveAndNew:!0})},()=>{wt({formErrorsActions:e.formErrorsActions,errors:t?.errors.value,setFieldError:t?.setFieldError})}),c=t?.handleSubmit(async(u,p)=>{await n({values:u,ctx:p,errors:t?.errors.value,formErrorsActions:e.formErrorsActions,saveAnyway:!0,saveAndNew:!1})},()=>{wt({formErrorsActions:e.formErrorsActions,errors:t?.errors.value,setFieldError:t?.setFieldError})}),o=t?.handleSubmit(async(u,p)=>{await n({values:u,ctx:p,errors:t?.errors.value,formErrorsActions:e.formErrorsActions,saveAnyway:!0,saveAndNew:!0})},()=>{wt({formErrorsActions:e.formErrorsActions,errors:t?.errors.value,setFieldError:t?.setFieldError})}),i=u=>{if(u.saveAndNew&&u.saveAnyway&&o){o();return}if(u.saveAndNew&&r){r();return}if(u.saveAnyway&&c){c();return}l&&l()};return{isSubmitting:Ze(ra),save:i}},as={key:0,class:"flex items-center flex-col bg-white absolute -translate-y-16 rounded"},ns={class:"w-min z-20"},ls={class:"pl-[40px] pr-[12px] py-[8px]"},rs=A("div",{class:"w-8 h-8 bg-white -mt-4 rotate-45 absolute top-full"},null,-1),os=["aria-label"],pn=J({__name:"Popover",props:{type:{},headerTitle:{},openPopoverSignal:{type:Boolean},closePopoverSignal:{type:Boolean}},setup(e){const t=e,a=R(!1),n=()=>{a.value=!a.value},l=()=>{a.value=!0},r=()=>{a.value=!1},c=I(()=>`slds-icon-${t.type.toLowerCase()}`),o=I(()=>t.type===Ee.ERROR?"#ea001e":"#dd7a01"),i=I(()=>t.type===Ee.ERROR?"#ffffff":"#000000");return U(()=>t.openPopoverSignal,()=>{a.value||l()},{immediate:!0}),U(()=>t.closePopoverSignal,u=>{a.value&&u&&r()}),(u,p)=>(_(),N("div",{tabindex:"0",class:"flex justify-center items-end mr-3",onKeydown:Je(r,["esc"])},[a.value?(_(),N("div",as,[A("div",ns,[A("div",{class:Q(["w-max flex items-center gap-[12px] pl-[14px] pr-8 py-[8px] rounded-t",{["bg-sf-error-base-40"]:t.type===s(Ee).ERROR,["bg-sf-warning-base-60"]:t.type===s(Ee).WARNING}])},[j(s($e),{name:c.value,color:i.value,size:16},null,8,["name","color"]),A("div",{class:Q(["text-[20px]/[25px]",{["text-white"]:t.type===s(Ee).ERROR,["text-black"]:t.type===s(Ee).WARNING}])},K(t.headerTitle),3),A("button",{class:Q(["flex absolute right-0 top-0 mx-[4px] mb-[4px] mt-2 cursor-pointer focus:ring-1 focus:rounded focus:shadow-sf",{["focus:ring-white focus:shadow-white"]:t.type===s(Ee).ERROR,["focus:ring-black focus:shadow-black"]:t.type===s(Ee).WARNING}]),onClick:n,"aria-label":"close"},[j(s($e),{name:"slds-icon-close",color:i.value,size:12},null,8,["color"])],2)],2),A("div",ls,[oa(u.$slots,"body")])]),rs])):H("",!0),A("button",{class:Q(["flex py-1 px-[0.5px] cursor-pointer rounded focus:ring-2 active:ring-1",{["active:ring-sf-error-base-40"]:t.type===s(Ee).ERROR,["active:ring-sf-warning-base-60"]:t.type===s(Ee).WARNING}]),onClick:n,"aria-label":t.type.toLowerCase()},[j(s($e),{name:c.value,color:o.value,size:24},null,8,["name","color"])],10,os)],32))}}),ss=J({__name:"DuplicatesFoundPopover",props:{openPopoverSignal:{type:Boolean},hasErrors:{type:Boolean},hasOverrideAccess:{type:Boolean}},setup(e){const{t}=fe(),a=e,{dcEntrySettings:n}=Se(ct()),l=Tt(),{popoverType:r}=Se(l),c=I(()=>r.value===et.BLOCK&&a.hasOverrideAccess?o:r.value===et.BLOCK&&!a.hasOverrideAccess?t("DCENTRY_FOOTER_ERROR_DUPLICATES_FOUND_BODY"):t("DCENTRY_FOOTER_WARNING_DUPLICATES_FOUND_BODY")),o=I(()=>{const i={};Object.keys(l.duplicateSearchResult.searchResult).forEach(p=>{const d={count:0,maxScore:0,label:""},b=l.duplicateSearchResult.searchResult[p];d.label=l.duplicateSearchResult.objectMeta[p].Label,d.count=Math.min(b.length,n.value.maxDupesPerPage),0<b.length?d.maxScore=Math.max(...b.map(m=>m.score)):d.maxScore=0,i[p]=d});const u=Object.values(i).reduce((p,d,b)=>p+=`${d.label} - ${d.count} (${d.maxScore}%)${b!==Object.values(i).length-1?", ":""}`,"");return`${n.value.duplicateErrorMessage}: ${u}`});return(i,u)=>(_(),ne(pn,{type:s(r)===s(et).BLOCK?s(Ee).ERROR:s(Ee).WARNING,"header-title":s(r)===s(et).BLOCK?s(t)("DCENTRY_FOOTER_ERROR_DUPLICATES_FOUND_HEADER"):s(t)("DCENTRY_FOOTER_WARNING_DUPLICATES_FOUND_HEADER",[Math.min(s(l).duplicateSearchResult.duplicateCount,s(n).maxDupesPerPage).toString()]),"open-popover-signal":a.openPopoverSignal,"close-popover-signal":a.hasErrors},{body:xt(()=>[A("p",null,K(c.value),1)]),_:1},8,["type","header-title","open-popover-signal","close-popover-signal"]))}}),is={class:"font-bold"},us={class:"list-disc ml-6"},cs={class:"font-bold"},ds={class:"list-disc ml-6"},fs=["onClick"],vs=J({__name:"FormErrorsPopoverContent",props:{errors:{},objectInfo:{}},setup(e){const{t}=fe(),a=e,n=I(()=>Object.keys(a.errors).filter(c=>c!==qe)),l=I(()=>n.value.length>0),r=c=>{(document.querySelector(`#${c} input`)??document.querySelector(`#${c}`))?.focus()};return(c,o)=>(_(),N(re,null,[Object.keys(a.errors).includes(s(qe))?(_(),N("div",{key:0,class:Q({["mb-12px"]:l.value})},[A("div",is,K(s(t)("DCENTRY_FOOTER_ERROR_REVIEW_ERRORS")),1),A("ul",us,[A("li",null,K(a.errors[s(qe)]),1)])],2)):H("",!0),l.value?(_(),N(re,{key:1},[A("div",cs,K(s(t)("DCENTRY_FOOTER_ERROR_REVIEW_FIELDS")),1),A("ul",ds,[(_(!0),N(re,null,Oe(n.value,i=>(_(),N("li",null,[i!==s(qe)?(_(),N("a",{key:0,class:"text-blue-500 cursor-pointer dark:text-blue-500 hover:underline",onClick:()=>r(a.objectInfo[i]?.apiName)},K(s(oe)(a.objectInfo[i]?.label)),9,fs)):H("",!0)]))),256))])],64)):H("",!0)],64))}}),ps=J({__name:"FormErrorsPopover",props:{objectInfo:{},openPopoverSignal:{type:Boolean}},setup(e){const{t}=fe(),a=e,n=Xe(Ot);return(l,r)=>(_(),ne(pn,{type:s(Ee).ERROR,"header-title":s(t)("DCENTRY_FOOTER_ERROR_HEADER"),"open-popover-signal":a.openPopoverSignal},{body:xt(()=>[j(vs,{errors:s(n).formErrors.value,"object-info":a.objectInfo},null,8,["errors","object-info"])]),_:1},8,["type","header-title","open-popover-signal"]))}}),ms={key:0,class:"flex items-center flex-grow"},ys=["aria-checked"],hs=["title"],bs=J({__name:"DcEntryFooter",emits:["save","cancel"],setup(e,{emit:t}){const a=Xe(Ot),{t:n}=fe(),l=gt(),r=ct(),c=Tt(),{assignmentRuleData:o,assignmentRuleEnabled:i,experienceUrl:u,cancelUrl:p,dcEntrySettings:d,objectInfo:b,isConsoleNavigation:m}=Se(r),{isSubmitting:y,save:h}=ts(),g=R(!1),S=R(i.value),T=t,D=I(()=>o.value?o.value.isDisplayed:!1),W=L=>{h({saveAndNew:L,saveAnyway:!d.value.duplicatePreventionEnabled||g.value&&c.duplicateSearchResult.duplicateCount>0&&d.value.hasOverrideAccess,assignmentRuleEnabled:S.value}),g.value=!0},te=()=>{if(l.recordEvent("DC Entry - Cancel Button Clicked",{}),l.persist(),p.value){window.parent.location.href=p.value;return}at.eventToSf({cancel:{isConsole:m.value}}),T("cancel")},z=I(()=>a.formErrors.value?Object.keys(a.formErrors.value)&&Object.keys(a.formErrors.value).length>0:!1),Y=I(()=>u.value!==""),Z=I(()=>d.value.duplicatePreventionEnabled&&d.value.hasOverrideAccess&&c.duplicateSearchResult.duplicateCount>0&&g.value),le=I(()=>c.duplicateSearchResult.duplicateCount>0&&d.value.duplicatePreventionEnabled&&!d.value.hasOverrideAccess&&g.value||z.value);return U(i,L=>{S.value=L},{immediate:!0}),(L,G)=>(_(),N(re,null,[D.value?(_(),N("div",ms,[A("button",{onClick:G[0]||(G[0]=ue=>S.value=!S.value),onKeyup:G[1]||(G[1]=Je(Ge(ue=>S.value=!S.value,["stop","prevent"]),["space"])),tabindex:"0",class:Q(["checkbox",{["checkbox-enabled"]:S.value}]),role:"checkbox","aria-checked":S.value},null,42,ys),A("div",{class:"flex items-center pl-2",title:s(o)?.label??""},K(s(o)?.label),9,hs)])):H("",!0),A("div",{class:Q(["flex gap-[4px] flex-1 items-center drop-shadow",{["justify-end"]:D.value,["justify-center"]:!D.value}])},[z.value?(_(),ne(ps,{key:0,"object-info":s(b),"open-popover-signal":g.value},null,8,["object-info","open-popover-signal"])):H("",!0),s(c).duplicateSearchResult.duplicateCount>0?(_(),ne(ss,{key:1,"open-popover-signal":g.value,"has-errors":z.value,"has-override-access":s(d).hasOverrideAccess},null,8,["open-popover-signal","has-errors","has-override-access"])):H("",!0),j(s(Xt),{type:"regular",label:s(n)("DCENTRY_FOOTER_CANCEL_BUTTON"),onClick:te},null,8,["label"]),Y.value?H("",!0):(_(),ne(s(Xt),{key:2,type:"regular",loading:s(y),disabled:le.value,label:Z.value?s(n)("DCENTRY_FOOTER_SAVENEW_ANYWAY_BUTTON"):s(n)("DCENTRY_FOOTER_SAVENEW_BUTTON"),onClick:G[2]||(G[2]=()=>W(!0))},null,8,["loading","disabled","label"])),j(s(Xt),{type:"primary","spinner-type":"light",loading:s(y),disabled:le.value,label:Z.value?s(n)("DCENTRY_FOOTER_SAVE_ANYWAY_BUTTON"):s(n)("DCENTRY_FOOTER_SAVE_BUTTON"),onClick:G[3]||(G[3]=()=>W(!1))},null,8,["loading","disabled","label"])],2)],64))}});const _s=lt(bs,[["__scopeId","data-v-b744d81c"]]),gs=["title"],Es=J({__name:"DcEntryHeader",setup(e){const{t}=fe(),a=Nt(),n=ct(),{objectApiName:l}=Se(n),r=Bt(),{layout:c}=Se(r),o=I(()=>c.value.layout.mode==="Create"?"":c.value?.record?.fields?.Name?.value??""),i=I(()=>{if(c?.value?.objectInfos){const u=c.value.objectInfos[l.value]?.label;return`${c.value.layout.mode==="Create"?`${t("DCENTRY_HEADER_NEW",[u])}${a.value.recordTypeName?`: ${a.value.recordTypeName}`:""}`:t("DCENTRY_HEADER_EDIT",[o.value])}`}else return""});return(u,p)=>(_(),N("div",{class:"w-full rounded-t flex items-center justify-center p-4 bg-white text-[20px]",title:i.value},K(i.value),9,gs))}}),Is={key:0,class:"fixed z-[99999] left-0 right-0 top-0"},Ns=J({__name:"DcEntryNotification",setup(e){const t=Mt(),{notification:a,isActive:n}=Se(t);return(l,r)=>s(n)?(_(),N("div",Is,[j(s(Fn),{top:10,"toast-type":s(a).type,label:s(a).message,"close-function":s(t).clear,"auto-close-timer":0},null,8,["toast-type","label","close-function"])])):H("",!0)}}),mn=R({}),Ss={setFormErrors:e=>{mn.value={...e}}},Ts={formErrors:mn,formErrorsActions:Ss},Os={key:0,class:"duplicate-search-warning"},Rs=J({__name:"dcEntry",setup(e){ya(Ot,Ts);const{isPersonAccount:t}=Se(Bt()),{duplicateSearchResult:a}=Se(Tt()),{objectApiName:n,objectPrefix:l,dcEntrySettings:r}=Se(ct()),{t:c}=fe(),o=R(),i=R(),u=R(),p=R();Nl({initialValues:{objectName:"",adjustedObjectName:"",Id:"",recordTypeId:"",recordTypeName:"",hasMultipleRecordTypes:!1}});const d=R(!1),b=R(0);return Ba(()=>{const m=i.value?.offsetHeight??0;d.value||(b.value=u.value?.offsetHeight??0,d.value=!0);const y=p.value?.offsetHeight??0,h=o.value?.clientHeight??0,g=m+b.value+y;g<h&&at.eventToSf({name:"resize",value:g})}),(m,y)=>(_(),N(re,null,[A("div",{ref_key:"dcEntryCmp",ref:o,class:"relative flex flex-col pb-12 h-lvh text-base"},[A("div",{ref_key:"header",ref:i,class:"sticky top-0 z-10 bg-white border-b-2 border-b-sf-gray-border"},[j(Es),s(r).duplicatePreventionEnabled&&s(a).noScenario?(_(),N("div",Os,K(s(c)("DCENTRY_NOSCENARIO_WARNING")),1)):H("",!0)],512),A("div",{ref_key:"footer",ref:p,class:"absolute bottom-0 left-0 right-0 z-10 p-4 bg-white border-t-2 border-t-sf-gray-border"},[j(_s)],512),A("div",{ref_key:"body",ref:u,class:"p-4 overflow-y-auto bg-white"},[s(a)&&s(a).duplicateCount>0?(_(),ne(Bl,{key:0,"search-result":s(a),"object-api-name":s(t)?s(pa):s(n),"object-prefix":s(t)?s(Un).PREFIX.PERSON_ACCOUNT:s(l),"max-rows":s(r).maxDupesPerPage,"duplicate-message":s(r).duplicateErrorMessage,"open-record-in-new-tab":s(r).openRecordInNewTab},null,8,["search-result","object-api-name","object-prefix","max-rows","duplicate-message","open-record-in-new-tab"])):H("",!0),j(Go)],512)],512),j(Ns)],64))}});const ks=lt(Rs,[["__scopeId","data-v-d7aa6a1c"]]);export{ks as default};
