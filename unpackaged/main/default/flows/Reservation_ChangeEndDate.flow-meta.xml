<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>52.0</apiVersion>
    <assignments>
        <name>GrosTravaux_nouvelle_date_de_fin_0</name>
        <label>GrosTravaux_nouvelle_date_de_fin</label>
        <locationX>450</locationX>
        <locationY>570</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_de_fin__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GrosTravaux_DateFin</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Reservations</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Maintenance_date_de_fin</name>
        <label>Maintenance_date_de_fin</label>
        <locationX>453</locationX>
        <locationY>247</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_de_fin__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Maintenance_Nouvelle_date_fin</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Reservations</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>PrepaSaison_nouvelle_date_de_fin</name>
        <label>PrepaSaison_nouvelle_date_de_fin</label>
        <locationX>454</locationX>
        <locationY>859</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_de_fin__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PrepaDateFin</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Reservations</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>R_paration_nouvelle_date_de_fin</name>
        <label>Réparation_nouvelle_date_de_fin</label>
        <locationX>451</locationX>
        <locationY>405</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_de_fin__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Reparation_date_fin</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Reservations</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Decision_type_atelier</name>
        <label>Decision_type_atelier</label>
        <locationX>169</locationX>
        <locationY>410</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Reparation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Type_Atelier__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Réparation</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>R_paration_nouvelle_date_de_fin</targetReference>
            </connector>
            <label>Réparation</label>
        </rules>
        <rules>
            <name>Gros_travaux</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Type_Atelier__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Gros Travaux</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GrosTravaux_nouvelle_date_de_fin_0</targetReference>
            </connector>
            <label>Gros travaux</label>
        </rules>
        <rules>
            <name>Maintenance</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Type_Atelier__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Maintenance_date_de_fin</targetReference>
            </connector>
            <label>Maintenance</label>
        </rules>
        <rules>
            <name>Preparation_Saisonniere</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Type_Atelier__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Préparation Saison</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>PrepaSaison_nouvelle_date_de_fin</targetReference>
            </connector>
            <label>Preparation Saisonniere</label>
        </rules>
    </decisions>
    <description>This flow change the end date of the reservation depending of the type d&#39;atelier</description>
    <formulas>
        <name>GrosTravaux_DateFin</name>
        <dataType>Date</dataType>
        <expression>{!$Record.Date_de_debut__c} + 30</expression>
    </formulas>
    <formulas>
        <name>Maintenance_Nouvelle_date_fin</name>
        <dataType>Date</dataType>
        <expression>{!$Record.Date_de_debut__c} + 7</expression>
    </formulas>
    <formulas>
        <name>PrepaDateFin</name>
        <dataType>Date</dataType>
        <expression>{!$Record.Date_de_debut__c} + 90</expression>
    </formulas>
    <formulas>
        <name>Reparation_date_fin</name>
        <dataType>Date</dataType>
        <expression>{!$Record.Date_de_debut__c} + 15</expression>
    </formulas>
    <interviewLabel>Reservation_ChangeEndDate {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Reservation_UpdateRecord_ChangeEndDate</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordUpdates>
        <name>Update_Reservations</name>
        <label>Update_Reservations</label>
        <locationX>681</locationX>
        <locationY>404</locationY>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Decision_type_atelier</targetReference>
        </connector>
        <filterLogic>1 AND (2 OR 3 OR 4 OR 5)</filterLogic>
        <filters>
            <field>Type_Atelier__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Type_Atelier__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Maintenance</stringValue>
            </value>
        </filters>
        <filters>
            <field>Type_Atelier__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Réparation</stringValue>
            </value>
        </filters>
        <filters>
            <field>Type_Atelier__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Gros Travaux</stringValue>
            </value>
        </filters>
        <filters>
            <field>Type_Atelier__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Préparation Saison</stringValue>
            </value>
        </filters>
        <object>Reservation__c</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
</Flow>
