<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>CPT_CodePostalExploitationMajuscule</fullName>
        <field>CodePostalExploitation__c</field>
        <formula>UPPER(CodePostalExploitation__c)</formula>
        <name>CPT_CodePostalExploitationMajuscule</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_CodePostalMajuscule</fullName>
        <field>CodePostal__c</field>
        <formula>UPPER(CodePostal__c)</formula>
        <name>CPT_CodePostalMajuscule</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_EnleverEspacesDeLIdentifiant</fullName>
        <field>IdentifiantNational__c</field>
        <formula>SUBSTITUTE(IdentifiantNational__c, &quot; &quot;, &quot;&quot;)</formula>
        <name>CPT_EnleverEspacesDeLIdentifiant</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_NomCommercialEgaleNom</fullName>
        <field>NomCommercial__c</field>
        <formula>UPPER(Name)</formula>
        <name>CPT_NomCommercialEgaleNom</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateAgenceNiveau1</fullName>
        <field>AgencePF__c</field>
        <literalValue>000 - SIEGE</literalValue>
        <name>CPT_UpdateAgenceNiveau1</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateDateListeNoire</fullName>
        <description>CPT-RG-021 &amp; CPT-RG-022</description>
        <field>TECHDateListeNoire__c</field>
        <formula>TODAY()</formula>
        <name>CPT_UpdateDateListeNoire</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateRegionNiveau1</fullName>
        <description>Evol 45</description>
        <field>PaysRegionPF__c</field>
        <literalValue>PFPF</literalValue>
        <name>CPT_UpdateRegionNiveau1</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateStatut</fullName>
        <description>CPT-RG-008</description>
        <field>Statut__c</field>
        <literalValue>Valid√©</literalValue>
        <name>CPT_UpdateStatut</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateStatutDraft</fullName>
        <field>Statut__c</field>
        <literalValue>Draft</literalValue>
        <name>CPT_UpdateStatutDraft</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>true</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateTECHIDN</fullName>
        <field>TECHIdentifiantNational__c</field>
        <formula>IdentifiantNational__c</formula>
        <name>CPT_UpdateTECHIDN</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateTECHIDNA</fullName>
        <field>TECHIdentifiantNational__c</field>
        <formula>IdentifiantNationalAlternatif__c</formula>
        <name>CPT_UpdateTECHIDNA</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateTECHTypeIDN</fullName>
        <field>TECHTypeIdentifiantNational__c</field>
        <formula>TEXT(TypeIdentifiantNational__c)</formula>
        <name>CPT_UpdateTECHTypeIDN</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CPT_UpdateTECHTypeIDNA</fullName>
        <field>TECHTypeIdentifiantNational__c</field>
        <formula>TEXT(TypeIdentifiantNationalAlternatif__c)</formula>
        <name>CPT_UpdateTECHTypeIDNA</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>CocherMembreGroupement</fullName>
        <field>EstMembreGroupement__c</field>
        <literalValue>1</literalValue>
        <name>CocherMembreGroupement</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>NomCompteMajuscule</fullName>
        <field>Name</field>
        <formula>UPPER(Name)</formula>
        <name>NomCompteMajuscule</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>VilleExploitationMajuscule</fullName>
        <field>VilleExploitation__c</field>
        <formula>UPPER(VilleExploitation__c)</formula>
        <name>VilleExploitationMajuscule</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>VilleMajuscule</fullName>
        <field>Ville__c</field>
        <formula>UPPER(Ville__c)</formula>
        <name>VilleMajuscule</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>j</fullName>
        <field>NomCommercial__c</field>
        <formula>&quot;hbnjmk&quot;</formula>
        <name>j</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>CPT_WF04_ListeNoire</fullName>
        <actions>
            <name>CPT_UpdateDateListeNoire</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>CPT-RG-021 &amp; CPT-RG-022</description>
        <formula>AND(OR(ISNEW(),ISCHANGED( ListeNoire__c )),ListeNoire__c = true, $Setup.Bypass__c.BypassWorkflowRules__c = false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>CPT_WF05_NomToujoursMajuscul</fullName>
        <actions>
            <name>NomCompteMajuscule</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>New4</description>
        <formula>AND(NOT(ISBLANK(Name)),$Setup.Bypass__c.BypassWorkflowRules__c = false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>CPT_WF06_VilleExploitationMajuscule</fullName>
        <actions>
            <name>VilleExploitationMajuscule</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>New5</description>
        <formula>AND(NOT(ISBLANK(VilleExploitation__c )), $Setup.Bypass__c.BypassWorkflowRules__c = false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>CPT_WF07_VilleToujoursMajuscule</fullName>
        <actions>
            <name>VilleMajuscule</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>New5</description>
        <formula>AND(NOT(ISBLANK(Ville__c)), $Setup.Bypass__c.BypassWorkflowRules__c = false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>CPT_WF11_CompteModifieDraft</fullName>
        <actions>
            <name>CPT_UpdateStatutDraft</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>AND( OR(RecordTypeId=$Label.CPT_RecordTypeId_CompteProspectClient15, RecordTypeId=$Label.CPT_RecordTypeId_Administration15, RecordTypeId=$Label.CPT_RecordTypeId_MultiNiveau, RecordTypeId=$Label.CPT_RecordTypeId_GrandCompte), OR ( ISCHANGED( ParentId ), ISCHANGED( PaysRegionPF__c ), ISCHANGED( AgencePF__c ), ISCHANGED( TECHTypeIdentifiantNational__c ), ISCHANGED( TECHIdentifiantNational__c), (ISCHANGED( RecopierAdressePrincipale__c ) &amp;&amp; RecopierAdressePrincipale__c), ISCHANGED( Ligne1Exploitation__c ), ISCHANGED( Ligne2Exploitation__c ), ISCHANGED( Ligne3Exploitation__c ), ISCHANGED( Ligne4Exploitation__c ), ISCHANGED( CodePostalExploitation__c ), ISCHANGED( VilleExploitation__c ), ISCHANGED( PaysExploitation__c ) ), NOT ISCHANGED(TECHWS__c), TEXT(Statut__c) != $Label.CPT_Statut_Inactif , $Setup.Bypass__c.BypassWorkflowRules__c = false )</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>CPT_WF12_CodePostalMajuscule</fullName>
        <actions>
            <name>CPT_CodePostalMajuscule</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>AND(NOT(ISBLANK(CodePostal__c)),$Setup.Bypass__c.BypassWorkflowRules__c = false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>CPT_WF13_CodePostalExploitationMajuscule</fullName>
        <actions>
            <name>CPT_CodePostalExploitationMajuscule</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>AND(NOT(ISBLANK(CodePostalExploitation__c)),$Setup.Bypass__c.BypassWorkflowRules__c = false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>CPT_WF14_NomCommercialEgaleNom</fullName>
        <actions>
            <name>CPT_NomCommercialEgaleNom</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>$Setup.Bypass__c.BypassWorkflowRules__c = false</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>CPT_WF15_IdentifiantSansEspaces</fullName>
        <actions>
            <name>CPT_EnleverEspacesDeLIdentifiant</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>AND 
(
 NOT(ISBLANK(IdentifiantNational__c))
,
 ISPICKVAL(TypeIdentifiantNational__c,&#39;SIREN&#39;)

)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
